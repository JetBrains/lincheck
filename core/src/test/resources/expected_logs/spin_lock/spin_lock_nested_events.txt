= The execution has hung =
| ------------------------------------------ |
|    Thread 1     |         Thread 2         |
| ------------------------------------------ |
| trigger(): void | causesSpinLock(): <hung> |
| ------------------------------------------ |


The following interleaving leads to the error:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                      Thread 1                                                      |                                                         Thread 2                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                                                          |                                                                                                                          |
|   counter.incrementAndGet(): 1 at SpinLockWithAllEventsWrappedInMethodsTest.trigger(SpinlockEventsCutTests.kt:441) |                                                                                                                          |
|   switch                                                                                                           |                                                                                                                          |
|                                                                                                                    | causesSpinLock(): <hung>                                                                                                 |
|                                                                                                                    |   counter.get(): 1 at SpinLockWithAllEventsWrappedInMethodsTest.causesSpinLock(SpinlockEventsCutTests.kt:447)            |
|                                                                                                                    |   deadSpinCycle() at SpinLockWithAllEventsWrappedInMethodsTest.causesSpinLock(SpinlockEventsCutTests.kt:448)             |
|                                                                                                                    |     /* The following events repeat infinitely: */                                                                        |
|                                                                                                                    | ┌╶> getSharedVariable(): false at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454) |
|                                                                                                                    | |   action(false): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)        |
|                                                                                                                    | |   getSharedVariable(): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)  |
|                                                                                                                    | |   action(true): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)         |
|                                                                                                                    | └╶╶ switch (reason: active lock detected)                                                                                |
|   counter.decrementAndGet(): 0 at SpinLockWithAllEventsWrappedInMethodsTest.trigger(SpinlockEventsCutTests.kt:442) |                                                                                                                          |
|   result: void                                                                                                     |                                                                                                                          |
|                                                                                                                    |     /* The following events repeat infinitely: */                                                                        |
|                                                                                                                    | ┌╶> getSharedVariable(): false at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454) |
|                                                                                                                    | |   action(false): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)        |
|                                                                                                                    | |   getSharedVariable(): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)  |
|                                                                                                                    | |   action(true): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)         |
|                                                                                                                    | └╶╶ switch (reason: active lock detected)                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                      Thread 1                                                      |                                                                     Thread 2                                                                     |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                                                          |                                                                                                                                                  |
|   counter.incrementAndGet(): 1 at SpinLockWithAllEventsWrappedInMethodsTest.trigger(SpinlockEventsCutTests.kt:441) |                                                                                                                                                  |
|   switch                                                                                                           |                                                                                                                                                  |
|                                                                                                                    | causesSpinLock(): <hung>                                                                                                                         |
|                                                                                                                    |   counter.get(): 1 at SpinLockWithAllEventsWrappedInMethodsTest.causesSpinLock(SpinlockEventsCutTests.kt:447)                                    |
|                                                                                                                    |   deadSpinCycle() at SpinLockWithAllEventsWrappedInMethodsTest.causesSpinLock(SpinlockEventsCutTests.kt:448)                                     |
|                                                                                                                    |     /* The following events repeat infinitely: */                                                                                                |
|                                                                                                                    | ┌╶> getSharedVariable(): false at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)                         |
|                                                                                                                    | |     someUselessSharedState.get(): false at SpinLockWithAllEventsWrappedInMethodsTest.getSharedVariable(SpinlockEventsCutTests.kt:459)          |
|                                                                                                                    | |   action(false): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)                                |
|                                                                                                                    | |     someUselessSharedState.compareAndSet(false, true): true at SpinLockWithAllEventsWrappedInMethodsTest.action(SpinlockEventsCutTests.kt:460) |
|                                                                                                                    | |   getSharedVariable(): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)                          |
|                                                                                                                    | |     someUselessSharedState.get(): true at SpinLockWithAllEventsWrappedInMethodsTest.getSharedVariable(SpinlockEventsCutTests.kt:459)           |
|                                                                                                                    | |   action(true): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)                                 |
|                                                                                                                    | |     someUselessSharedState.compareAndSet(true, false): true at SpinLockWithAllEventsWrappedInMethodsTest.action(SpinlockEventsCutTests.kt:460) |
|                                                                                                                    | └╶╶ switch (reason: active lock detected)                                                                                                        |
|   counter.decrementAndGet(): 0 at SpinLockWithAllEventsWrappedInMethodsTest.trigger(SpinlockEventsCutTests.kt:442) |                                                                                                                                                  |
|   result: void                                                                                                     |                                                                                                                                                  |
|                                                                                                                    |     /* The following events repeat infinitely: */                                                                                                |
|                                                                                                                    | ┌╶> getSharedVariable(): false at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)                         |
|                                                                                                                    | |     someUselessSharedState.get(): false at SpinLockWithAllEventsWrappedInMethodsTest.getSharedVariable(SpinlockEventsCutTests.kt:459)          |
|                                                                                                                    | |   action(false): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)                                |
|                                                                                                                    | |     someUselessSharedState.compareAndSet(false, true): true at SpinLockWithAllEventsWrappedInMethodsTest.action(SpinlockEventsCutTests.kt:460) |
|                                                                                                                    | |   getSharedVariable(): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:454)                          |
|                                                                                                                    | |     someUselessSharedState.get(): true at SpinLockWithAllEventsWrappedInMethodsTest.getSharedVariable(SpinlockEventsCutTests.kt:459)           |
|                                                                                                                    | |   action(true): true at SpinLockWithAllEventsWrappedInMethodsTest.deadSpinCycle(SpinlockEventsCutTests.kt:455)                                 |
|                                                                                                                    | |     someUselessSharedState.compareAndSet(true, false): true at SpinLockWithAllEventsWrappedInMethodsTest.action(SpinlockEventsCutTests.kt:460) |
|                                                                                                                    | └╶╶ switch (reason: active lock detected)                                                                                                        |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
