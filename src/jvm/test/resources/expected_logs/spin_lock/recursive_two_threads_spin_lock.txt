= The execution has hung =
| ----------------------------- |
|   Thread 1    |   Thread 2    |
| ----------------------------- |
| one(): <hung> | two(): <hung> |
| ----------------------------- |


The following interleaving leads to the error:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                 Thread 1                                                                 |                                                                 Thread 2                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                          |   two(): <hung>                                                                                                                          |
|                                                                                                                                          |     meaninglessActions1() at RecursiveTwoThreadsSpinLockTest.two(RecursiveSpinLockTest.kt:232)                                           |
|                                                                                                                                          |     switch                                                                                                                               |
|   one(): <hung>                                                                                                                          |                                                                                                                                          |
|     meaninglessActions2() at RecursiveTwoThreadsSpinLockTest.one(RecursiveSpinLockTest.kt:221)                                           |                                                                                                                                          |
|     /* The following events repeat infinitely: */                                                                                        |                                                                                                                                          |
| ┌╶> meaninglessActions1() at RecursiveTwoThreadsSpinLockTest.one(RecursiveSpinLockTest.kt:222)                                           |                                                                                                                                          |
| |     sharedState2.compareAndSet(false,true): false at RecursiveTwoThreadsSpinLockTest.meaninglessActions1(RecursiveSpinLockTest.kt:242) |                                                                                                                                          |
| └╶╶╶╶ switch (reason: active lock detected)                                                                                              |                                                                                                                                          |
|                                                                                                                                          |     /* The following events repeat infinitely: */                                                                                        |
|                                                                                                                                          | ┌╶> meaninglessActions2() at RecursiveTwoThreadsSpinLockTest.two(RecursiveSpinLockTest.kt:233)                                           |
|                                                                                                                                          | |     sharedState1.compareAndSet(false,true): false at RecursiveTwoThreadsSpinLockTest.meaninglessActions2(RecursiveSpinLockTest.kt:247) |
|                                                                                                                                          | └╶╶╶╶ switch (reason: active lock detected)                                                                                              |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                 Thread 1                                                                 |                                                                 Thread 2                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                          |   two(): <hung>                                                                                                                          |
|                                                                                                                                          |     meaninglessActions1() at RecursiveTwoThreadsSpinLockTest.two(RecursiveSpinLockTest.kt:232)                                           |
|                                                                                                                                          |       sharedState2.compareAndSet(false,true): true at RecursiveTwoThreadsSpinLockTest.meaninglessActions1(RecursiveSpinLockTest.kt:242)  |
|                                                                                                                                          |     switch                                                                                                                               |
|   one(): <hung>                                                                                                                          |                                                                                                                                          |
|     meaninglessActions2() at RecursiveTwoThreadsSpinLockTest.one(RecursiveSpinLockTest.kt:221)                                           |                                                                                                                                          |
|       sharedState1.compareAndSet(false,true): true at RecursiveTwoThreadsSpinLockTest.meaninglessActions2(RecursiveSpinLockTest.kt:247)  |                                                                                                                                          |
|     /* The following events repeat infinitely: */                                                                                        |                                                                                                                                          |
| ┌╶> meaninglessActions1() at RecursiveTwoThreadsSpinLockTest.one(RecursiveSpinLockTest.kt:222)                                           |                                                                                                                                          |
| |     sharedState2.compareAndSet(false,true): false at RecursiveTwoThreadsSpinLockTest.meaninglessActions1(RecursiveSpinLockTest.kt:242) |                                                                                                                                          |
| └╶╶╶╶ switch (reason: active lock detected)                                                                                              |                                                                                                                                          |
|                                                                                                                                          |     /* The following events repeat infinitely: */                                                                                        |
|                                                                                                                                          | ┌╶> meaninglessActions2() at RecursiveTwoThreadsSpinLockTest.two(RecursiveSpinLockTest.kt:233)                                           |
|                                                                                                                                          | |     sharedState1.compareAndSet(false,true): false at RecursiveTwoThreadsSpinLockTest.meaninglessActions2(RecursiveSpinLockTest.kt:247) |
|                                                                                                                                          | └╶╶╶╶ switch (reason: active lock detected)                                                                                              |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
