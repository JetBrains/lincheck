= The execution has hung =
| ------------------------------------------ |
|    Thread 1     |         Thread 2         |
| ------------------------------------------ |
| trigger(): void | causesSpinLock(): <hung> |
| ------------------------------------------ |


The following interleaving leads to the error:
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                      Thread 1                                                       |                                                                  Thread 2                                                                  |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                                                           |                                                                                                                                            |
|   counter.incrementAndGet(): 1 at RecursiveSpinLockTwoStepRecursionEventsTest.trigger(RecursiveSpinLockTest.kt:175) |                                                                                                                                            |
|   switch                                                                                                            |                                                                                                                                            |
|                                                                                                                     |   causesSpinLock(): <hung>                                                                                                                 |
|                                                                                                                     |     counter.get(): 1 at RecursiveSpinLockTwoStepRecursionEventsTest.causesSpinLock(RecursiveSpinLockTest.kt:181)                           |
|                                                                                                                     |     /* The following events repeat infinitely: */                                                                                          |
|                                                                                                                     | ┌╶> outerRecursiveSpinCycle() at RecursiveSpinLockTwoStepRecursionEventsTest.causesSpinLock(RecursiveSpinLockTest.kt:182)                  |
|                                                                                                                     | |     deadSpinCycleRecursive() at RecursiveSpinLockTwoStepRecursionEventsTest.outerRecursiveSpinCycle(RecursiveSpinLockTest.kt:187)        |
|                                                                                                                     | |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)     |
|                                                                                                                     | |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)            |
|                                                                                                                     | |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)      |
|                                                                                                                     | |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)             |
|                                                                                                                     | |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)     |
|                                                                                                                     | |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)            |
|                                                                                                                     | |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)      |
|                                                                                                                     | |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)             |
|                                                                                                                     | └╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                              |
|   counter.decrementAndGet(): 0 at RecursiveSpinLockTwoStepRecursionEventsTest.trigger(RecursiveSpinLockTest.kt:176) |                                                                                                                                            |
|   result: void                                                                                                      |                                                                                                                                            |
|                                                                                                                     |         /* The following events repeat infinitely: */                                                                                      |
|                                                                                                                     |     ┌╶> outerRecursiveSpinCycle() at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:195)      |
|                                                                                                                     |     |     deadSpinCycleRecursive() at RecursiveSpinLockTwoStepRecursionEventsTest.outerRecursiveSpinCycle(RecursiveSpinLockTest.kt:187)    |
|                                                                                                                     |     |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192) |
|                                                                                                                     |     |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)        |
|                                                                                                                     |     |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)  |
|                                                                                                                     |     |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)         |
|                                                                                                                     |     |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192) |
|                                                                                                                     |     |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)        |
|                                                                                                                     |     |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)  |
|                                                                                                                     |     |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)         |
|                                                                                                                     |     └╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                          |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                      Thread 1                                                       |                                                                         Thread 2                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                                                           |                                                                                                                                                           |
|   counter.incrementAndGet(): 1 at RecursiveSpinLockTwoStepRecursionEventsTest.trigger(RecursiveSpinLockTest.kt:175) |                                                                                                                                                           |
|   switch                                                                                                            |                                                                                                                                                           |
|                                                                                                                     |   causesSpinLock(): <hung>                                                                                                                                |
|                                                                                                                     |     counter.get(): 1 at RecursiveSpinLockTwoStepRecursionEventsTest.causesSpinLock(RecursiveSpinLockTest.kt:181)                                          |
|                                                                                                                     |     /* The following events repeat infinitely: */                                                                                                         |
|                                                                                                                     | ┌╶> outerRecursiveSpinCycle() at RecursiveSpinLockTwoStepRecursionEventsTest.causesSpinLock(RecursiveSpinLockTest.kt:182)                                 |
|                                                                                                                     | |     deadSpinCycleRecursive() at RecursiveSpinLockTwoStepRecursionEventsTest.outerRecursiveSpinCycle(RecursiveSpinLockTest.kt:187)                       |
|                                                                                                                     | |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                    |
|                                                                                                                     | |         someUselessSharedState.get(): false at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)              |
|                                                                                                                     | |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                           |
|                                                                                                                     | |         someUselessSharedState.compareAndSet(false, true): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198)     |
|                                                                                                                     | |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                     |
|                                                                                                                     | |         someUselessSharedState.get(): true at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)               |
|                                                                                                                     | |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                            |
|                                                                                                                     | |         someUselessSharedState.compareAndSet(true, false): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198)     |
|                                                                                                                     | |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                    |
|                                                                                                                     | |         someUselessSharedState.get(): false at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)              |
|                                                                                                                     | |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                           |
|                                                                                                                     | |         someUselessSharedState.compareAndSet(false, true): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198)     |
|                                                                                                                     | |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                     |
|                                                                                                                     | |         someUselessSharedState.get(): true at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)               |
|                                                                                                                     | |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                            |
|                                                                                                                     | |         someUselessSharedState.compareAndSet(true, false): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198)     |
|                                                                                                                     | └╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                                             |
|   counter.decrementAndGet(): 0 at RecursiveSpinLockTwoStepRecursionEventsTest.trigger(RecursiveSpinLockTest.kt:176) |                                                                                                                                                           |
|   result: void                                                                                                      |                                                                                                                                                           |
|                                                                                                                     |         /* The following events repeat infinitely: */                                                                                                     |
|                                                                                                                     |     ┌╶> outerRecursiveSpinCycle() at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:195)                     |
|                                                                                                                     |     |     deadSpinCycleRecursive() at RecursiveSpinLockTwoStepRecursionEventsTest.outerRecursiveSpinCycle(RecursiveSpinLockTest.kt:187)                   |
|                                                                                                                     |     |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                |
|                                                                                                                     |     |         someUselessSharedState.get(): false at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)          |
|                                                                                                                     |     |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                       |
|                                                                                                                     |     |         someUselessSharedState.compareAndSet(false, true): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198) |
|                                                                                                                     |     |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                 |
|                                                                                                                     |     |         someUselessSharedState.get(): true at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)           |
|                                                                                                                     |     |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                        |
|                                                                                                                     |     |         someUselessSharedState.compareAndSet(true, false): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198) |
|                                                                                                                     |     |       getSharedVariable(): false at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                |
|                                                                                                                     |     |         someUselessSharedState.get(): false at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)          |
|                                                                                                                     |     |       action(false): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                       |
|                                                                                                                     |     |         someUselessSharedState.compareAndSet(false, true): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198) |
|                                                                                                                     |     |       getSharedVariable(): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:192)                 |
|                                                                                                                     |     |         someUselessSharedState.get(): true at RecursiveSpinLockTwoStepRecursionEventsTest.getSharedVariable(RecursiveSpinLockTest.kt:200)           |
|                                                                                                                     |     |       action(true): true at RecursiveSpinLockTwoStepRecursionEventsTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:193)                        |
|                                                                                                                     |     |         someUselessSharedState.compareAndSet(true, false): true at RecursiveSpinLockTwoStepRecursionEventsTest.action(RecursiveSpinLockTest.kt:198) |
|                                                                                                                     |     └╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
