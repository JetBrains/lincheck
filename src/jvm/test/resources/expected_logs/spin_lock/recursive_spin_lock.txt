= The execution has hung =
| ------------------------------------------ |
|    Thread 1     |         Thread 2         |
| ------------------------------------------ |
| trigger(): void | causesSpinLock(): <hung> |
| ------------------------------------------ |


The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                           Thread 1                                           |                                                                  Thread 2                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| trigger()                                                                                    |                                                                                                                                             |
|   counter.incrementAndGet(): 1 at RecursiveSpinLockTest.trigger(RecursiveSpinLockTest.kt:34) |                                                                                                                                             |
|   switch                                                                                     |                                                                                                                                             |
|                                                                                              |   causesSpinLock(): <hung>                                                                                                                  |
|                                                                                              |     counter.get(): 1 at RecursiveSpinLockTest.causesSpinLock(RecursiveSpinLockTest.kt:40)                                                   |
|                                                                                              |     /* The following events repeat infinitely: */                                                                                           |
|                                                                                              | ┌╶> deadSpinCycleRecursive() at RecursiveSpinLockTest.causesSpinLock(RecursiveSpinLockTest.kt:41)                                           |
|                                                                                              | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                               |
|                                                                                              | |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                                |
|                                                                                              | |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                               |
|                                                                                              | |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                                |
|                                                                                              | |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | └╶╶╶╶ switch (reason: active lock detected)                                                                                                 |
|   counter.decrementAndGet(): 0 at RecursiveSpinLockTest.trigger(RecursiveSpinLockTest.kt:35) |                                                                                                                                             |
|   result: void                                                                               |                                                                                                                                             |
|                                                                                              |       /* The following events repeat infinitely: */                                                                                         |
|                                                                                              |   ┌╶> deadSpinCycleRecursive() at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:50)                                 |
|                                                                                              |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                             |
|                                                                                              |   |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                              |
|                                                                                              |   |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                             |
|                                                                                              |   |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                              |
|                                                                                              |   |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   └╶╶╶╶ switch (reason: active lock detected)                                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
All unfinished threads are in deadlock

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                           Thread 1                                           |                                                                  Thread 2                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| trigger()                                                                                    |                                                                                                                                             |
|   counter.incrementAndGet(): 1 at RecursiveSpinLockTest.trigger(RecursiveSpinLockTest.kt:34) |                                                                                                                                             |
|   switch                                                                                     |                                                                                                                                             |
|                                                                                              |   causesSpinLock(): <hung>                                                                                                                  |
|                                                                                              |     counter.get(): 1 at RecursiveSpinLockTest.causesSpinLock(RecursiveSpinLockTest.kt:40)                                                   |
|                                                                                              |     /* The following events repeat infinitely: */                                                                                           |
|                                                                                              | ┌╶> deadSpinCycleRecursive() at RecursiveSpinLockTest.causesSpinLock(RecursiveSpinLockTest.kt:41)                                           |
|                                                                                              | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                               |
|                                                                                              | |       someUselessSharedState.get(): false at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                         |
|                                                                                              | |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                                |
|                                                                                              | |       someUselessSharedState.get(): true at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                          |
|                                                                                              | |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                               |
|                                                                                              | |       someUselessSharedState.get(): false at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                         |
|                                                                                              | |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                                |
|                                                                                              | |       someUselessSharedState.get(): true at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                          |
|                                                                                              | |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48)   |
|                                                                                              | └╶╶╶╶ switch (reason: active lock detected)                                                                                                 |
|   counter.decrementAndGet(): 0 at RecursiveSpinLockTest.trigger(RecursiveSpinLockTest.kt:35) |                                                                                                                                             |
|   result: void                                                                               |                                                                                                                                             |
|                                                                                              |       /* The following events repeat infinitely: */                                                                                         |
|                                                                                              |   ┌╶> deadSpinCycleRecursive() at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:50)                                 |
|                                                                                              |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                             |
|                                                                                              |   |       someUselessSharedState.get(): false at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                       |
|                                                                                              |   |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                              |
|                                                                                              |   |       someUselessSharedState.get(): true at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                        |
|                                                                                              |   |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                             |
|                                                                                              |   |       someUselessSharedState.get(): false at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                       |
|                                                                                              |   |     someUselessSharedState.compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:47)                              |
|                                                                                              |   |       someUselessSharedState.get(): true at RecursiveSpinLockTest.getSharedVariable(RecursiveSpinLockTest.kt:53)                        |
|                                                                                              |   |     someUselessSharedState.compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(RecursiveSpinLockTest.kt:48) |
|                                                                                              |   └╶╶╶╶ switch (reason: active lock detected)                                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
All unfinished threads are in deadlock
