= The execution has hung =
| ------------------------------------------------------------------- |
|             Thread 1             |             Thread 2             |
| ------------------------------------------------------------------- |
| cas2_0(0, 0, 2, 1, 0, 3): <hung> | cas2_1(0, 0, 4, 1, 0, 5): <hung> |
| ------------------------------------------------------------------- |


The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                      Thread 1                                       |                                      Thread 2                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                     | cas2_1(0, 0, 4, 1, 0, 5): <hung>                                                    |
|                                                                                     |   array.cas2(0, 0, 4, 1, 0, 5, 1)                                                   |
|                                                                                     |     AtomicArrayWithCAS2.Descriptor.apply(true, 1, false)                            |
|                                                                                     |       getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                    |
|                                                                                     |       status.get(): UNDECIDED                                                       |
|                                                                                     |       installOrHelp(true, 1, false): true                                           |
|                                                                                     |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                      |
|                                                                                     |         AtomicReferenceArray#1[0].get(): Descriptor#2                               |
|                                                                                     |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 |
|                                                                                     |         gate0.set(1)                                                                |
|                                                                                     |         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 |
|                                                                                     |         gate1.get(): 0                                                              |
|                                                                                     |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 |
|                                                                                     |         switch                                                                      |
| cas2_0(0, 0, 2, 1, 0, 3): <hung>                                                    |                                                                                     |
|   array.cas2(0, 0, 2, 1, 0, 3, 0)                                                   |                                                                                     |
|     AtomicArrayWithCAS2.Descriptor.apply(true, 0, false)                            |                                                                                     |
|       getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                    |                                                                                     |
|       status.get(): UNDECIDED                                                       |                                                                                     |
|       installOrHelp(true, 0, false)                                                 |                                                                                     |
|         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                      |                                                                                     |
|         AtomicReferenceArray#1[0].get(): Descriptor#2                               |                                                                                     |
|         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 |                                                                                     |
|         gate1.set(1)                                                                |                                                                                     |
|         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 |                                                                                     |
|         gate0.get(): 1                                                              |                                                                                     |
|         /* The following events repeat infinitely: */                               |                                                                                     |
|     ┌╶> current.apply(false, 0, true)                                               |                                                                                     |
|     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                |                                                                                     |
|     |     status.get(): SUCCESS                                                     |                                                                                     |
|     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                |                                                                                     |
|     |     status.compareAndSet(SUCCESS, SUCCESS): true                              |                                                                                     |
|     |     installOrHelp(true, 0, true)                                              |                                                                                     |
|     |       AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                  |                                                                                     |
|     |       AtomicReferenceArray#1[0].get(): Descriptor#2                           |                                                                                     |
|     |       apply(false, 0, true)                                                   |                                                                                     |
|     |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1            |                                                                                     |
|     └╶╶╶╶╶╶╶╶ switch (reason: active lock detected)                                 |                                                                                     |
|                                                                                     |         gate0.set(0)                                                                |
|                                                                                     |         apply(false, 1, false)                                                      |
|                                                                                     |         current.read(0): 0                                                          |
|                                                                                     |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                  |
|                                                                                     |         status.get(): UNDECIDED                                                     |
|                                                                                     |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                      |
|                                                                                     |         AtomicReferenceArray#1[0].compareAndSet(Descriptor#2, Descriptor#1): true   |
|                                                                                     |       installOrHelp(false, 1, false)                                                |
|                                                                                     |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                      |
|                                                                                     |         AtomicReferenceArray#1[1].get(): Descriptor#4                               |
|                                                                                     |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 |
|                                                                                     |         gate0.set(1)                                                                |
|                                                                                     |         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 |
|                                                                                     |         gate1.get(): 1                                                              |
|                                                                                     |         /* The following events repeat infinitely: */                               |
|                                                                                     |     ┌╶> current.apply(false, 1, true)                                               |
|                                                                                     |     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                |
|                                                                                     |     |     status.get(): SUCCESS                                                     |
|                                                                                     |     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1                |
|                                                                                     |     |     status.compareAndSet(SUCCESS, SUCCESS): true                              |
|                                                                                     |     |     installOrHelp(true, 1, true)                                              |
|                                                                                     |     |       AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1                  |
|                                                                                     |     |       AtomicReferenceArray#1[1].get(): Descriptor#4                           |
|                                                                                     |     |       apply(false, 1, true)                                                   |
|                                                                                     |     |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1            |
|                                                                                     |     └╶╶╶╶╶╶╶╶ switch (reason: active lock detected)                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                  Thread 1                                                                                   |                                                                                  Thread 2                                                                                   |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                                                             | cas2_1(0, 0, 4, 1, 0, 5): <hung>                                                                                                                                            |
|                                                                                                                                                                             |   array.cas2(0, 0, 4, 1, 0, 5, 1) at AtomicArrayWithCAS2LiveLockTest.cas2_1(AtomicArrayWithCAS2LiveLockTest.kt:45)                                                          |
|                                                                                                                                                                             |     AtomicArrayWithCAS2.Descriptor.apply(true, 1, false) at AtomicArrayWithCAS2.<unknown method>(AtomicArrayWithCAS2LiveLockTest.kt:91)                                     |
|                                                                                                                                                                             |       getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                            |
|                                                                                                                                                                             |       status.get(): UNDECIDED at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                                                               |
|                                                                                                                                                                             |       installOrHelp(true, 1, false): true at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:124)                                                   |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                      |
|                                                                                                                                                                             |         AtomicReferenceArray#1[0].get(): Descriptor#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                               |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:149) |
|                                                                                                                                                                             |         gate0.set(1) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:149)                                                                |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:150) |
|                                                                                                                                                                             |         gate1.get(): 0 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:150)                                                              |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:153) |
|                                                                                                                                                                             |         switch                                                                                                                                                              |
| cas2_0(0, 0, 2, 1, 0, 3): <hung>                                                                                                                                            |                                                                                                                                                                             |
|   array.cas2(0, 0, 2, 1, 0, 3, 0) at AtomicArrayWithCAS2LiveLockTest.cas2_0(AtomicArrayWithCAS2LiveLockTest.kt:39)                                                          |                                                                                                                                                                             |
|     AtomicArrayWithCAS2.Descriptor.apply(true, 0, false) at AtomicArrayWithCAS2.<unknown method>(AtomicArrayWithCAS2LiveLockTest.kt:91)                                     |                                                                                                                                                                             |
|       getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                            |                                                                                                                                                                             |
|       status.get(): UNDECIDED at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                                                               |                                                                                                                                                                             |
|       installOrHelp(true, 0, false) at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:124)                                                         |                                                                                                                                                                             |
|         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                      |                                                                                                                                                                             |
|         AtomicReferenceArray#1[0].get(): Descriptor#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                               |                                                                                                                                                                             |
|         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:157) |                                                                                                                                                                             |
|         gate1.set(1) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:157)                                                                |                                                                                                                                                                             |
|         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:158) |                                                                                                                                                                             |
|         gate0.get(): 1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:158)                                                              |                                                                                                                                                                             |
|         /* The following events repeat infinitely: */                                                                                                                       |                                                                                                                                                                             |
|     ┌╶> current.apply(false, 0, true) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:159)                                               |                                                                                                                                                                             |
|     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                        |                                                                                                                                                                             |
|     |     status.get(): SUCCESS at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                                                             |                                                                                                                                                                             |
|     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:120)                        |                                                                                                                                                                             |
|     |     status.compareAndSet(SUCCESS, SUCCESS): true at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:120)                                      |                                                                                                                                                                             |
|     |     installOrHelp(true, 0, true) at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:121)                                                      |                                                                                                                                                                             |
|     |       AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                  |                                                                                                                                                                             |
|     |       AtomicReferenceArray#1[0].get(): Descriptor#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                           |                                                                                                                                                                             |
|     |       apply(false, 0, true) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:143)                                                   |                                                                                                                                                                             |
|     |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                    |                                                                                                                                                                             |
|     └╶╶╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                                                         |                                                                                                                                                                             |
|                                                                                                                                                                             |         gate0.set(0) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:153)                                                                |
|                                                                                                                                                                             |         apply(false, 1, false) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:167)                                                      |
|                                                                                                                                                                             |           getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                        |
|                                                                                                                                                                             |           status.get(): SUCCESS at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:123)                                                             |
|                                                                                                                                                                             |         current.read(0): 0 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:168)                                                          |
|                                                                                                                                                                             |           getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.read(AtomicArrayWithCAS2LiveLockTest.kt:107)                         |
|                                                                                                                                                                             |           status.get(): SUCCESS at AtomicArrayWithCAS2.Descriptor.read(AtomicArrayWithCAS2LiveLockTest.kt:107)                                                              |
|                                                                                                                                                                             |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:172)                  |
|                                                                                                                                                                             |         status.get(): UNDECIDED at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:172)                                                     |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:173)                      |
|                                                                                                                                                                             |         AtomicReferenceArray#1[0].compareAndSet(Descriptor#2, Descriptor#1): true at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:173)   |
|                                                                                                                                                                             |       installOrHelp(false, 1, false) at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:125)                                                        |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                      |
|                                                                                                                                                                             |         AtomicReferenceArray#1[1].get(): Descriptor#4 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                               |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getGate0$volatile$FU(): AtomicIntegerFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:149) |
|                                                                                                                                                                             |         gate0.set(1) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:149)                                                                |
|                                                                                                                                                                             |         AtomicArrayWithCAS2.getGate1$volatile$FU(): AtomicIntegerFieldUpdaterImpl#2 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:150) |
|                                                                                                                                                                             |         gate1.get(): 1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:150)                                                              |
|                                                                                                                                                                             |         /* The following events repeat infinitely: */                                                                                                                       |
|                                                                                                                                                                             |     ┌╶> current.apply(false, 1, true) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:151)                                               |
|                                                                                                                                                                             |     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                        |
|                                                                                                                                                                             |     |     status.get(): SUCCESS at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                                                             |
|                                                                                                                                                                             |     |     getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:120)                        |
|                                                                                                                                                                             |     |     status.compareAndSet(SUCCESS, SUCCESS): true at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:120)                                      |
|                                                                                                                                                                             |     |     installOrHelp(true, 1, true) at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:121)                                                      |
|                                                                                                                                                                             |     |       AtomicArrayWithCAS2.getArray(): AtomicReferenceArray#1 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                  |
|                                                                                                                                                                             |     |       AtomicReferenceArray#1[1].get(): Descriptor#4 at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:141)                           |
|                                                                                                                                                                             |     |       apply(false, 1, true) at AtomicArrayWithCAS2.Descriptor.installOrHelp(AtomicArrayWithCAS2LiveLockTest.kt:143)                                                   |
|                                                                                                                                                                             |     |         getStatus$volatile$FU(): AtomicReferenceFieldUpdaterImpl#1 at AtomicArrayWithCAS2.Descriptor.apply(AtomicArrayWithCAS2LiveLockTest.kt:119)                    |
|                                                                                                                                                                             |     └╶╶╶╶╶╶╶╶ switch (reason: active lock detected)                                                                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
