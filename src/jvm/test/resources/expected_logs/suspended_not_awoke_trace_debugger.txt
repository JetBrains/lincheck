= Invalid execution results =
| ---------------------------------------- |
|    Thread 1     |        Thread 2        |
| ---------------------------------------- |
| trigger(): void | operation(): Suspended |
| ---------------------------------------- |

The following interleaving leads to the error:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                    Thread 1                                     |                                                                                            Thread 2                                                                                             |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                       |                                                                                                                                                                                                 |
|   allowed = true at SuspendedNotAwokeTest.trigger(SuspendedNotAwokeTest.kt:32)  |                                                                                                                                                                                                 |
|   switch                                                                        |                                                                                                                                                                                                 |
|                                                                                 | operation(): Suspended                                                                                                                                                                          |
|                                                                                 |   allowed ➜ true at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:38)                                                                                                                |
|                                                                                 |   $completion ➜ <cont> at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:39)                                                                                                          |
|                                                                                 |   neverWakeUpChannel.receive(<cont>): COROUTINE_SUSPENDED at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:39)                                                                       |
|                                                                                 |     $completion ➜ <cont> at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                       |
|                                                                                 |     BufferedChannel.receive$suspendImpl(BufferedChannel#1, <cont>): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                        |
|                                                                                 |       $this ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                                  |
|                                                                                 |       this_$iv = BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                               |
|                                                                                 |       waiter$iv = null at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:670)                                                                                                           |
|                                                                                 |       $i$f$receiveImpl = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                                       |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                              |
|                                                                                 |       receiveSegment.get(): ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                    |
|                                                                                 |       segment$iv = ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                             |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                              |
|                                                                                 |       SuspendedNotAwokeTest#1.neverWakeUpChannel.isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                    |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                              |
|                                                                                 |       receivers.getAndIncrement(): 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                            |
|                                                                                 |       r$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3528)                                                                                                                  |
|                                                                                 |       id$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3528)                                                                                                                 |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3529)                                                                                                                  |
|                                                                                 |       i$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3529)                                                                                                                  |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3532)                                                                                             |
|                                                                                 |       id$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3532)                                                                                                                 |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                              |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                             |
|                                                                                 |       i$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                                  |
|                                                                                 |       waiter$iv ➜ null at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                          |
|                                                                                 |       BufferedChannel.updateCellReceive(ChannelSegment#1, 0, 0, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                      |
|                                                                                 |       updCellResult$iv = <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                                    |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                             |
|                                                                                 |       i$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                  |
|                                                                                 |       r = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                     |
|                                                                                 |       $this ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                                                  |
|                                                                                 |       $completion ➜ <cont> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                                                       |
|                                                                                 |       SuspendedNotAwokeTest#1.neverWakeUpChannel.receiveOnNoWaiterSuspend(ChannelSegment#1, 0, 0, <cont>): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)   |
|                                                                                 |         $i$f$suspendCancellableCoroutineReusable = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:695)                                                                        |
|                                                                                 |         $completion ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                               |
|                                                                                 |         uCont$iv = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                                  |
|                                                                                 |         $i$a$-suspendCoroutineUninterceptedOrReturn-CancellableContinuationKt$suspendCancellableCoroutineReusable$2$iv = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571) |
|                                                                                 |         uCont$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                                                                  |
|                                                                                 |         CancellableContinuationKt.getOrCreateCancellableContinuation(<cont>): <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                       |
|                                                                                 |         cancellable$iv = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                                                            |
|                                                                                 |         cancellable$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                                                                                            |
|                                                                                 |         cont = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                                                                                                      |
|                                                                                 |         $i$a$-suspendCancellableCoroutineReusable-BufferedChannel$receiveOnNoWaiterSuspend$2 = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                           |
|                                                                                 |         this_$iv = BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:696)                                                                                        |
|                                                                                 |         $i$f$receiveImplOnNoWaiter = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:696)                                                                                      |
|                                                                                 |         this_$iv ➜ BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                       |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                         |
|                                                                                 |         index ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                          |
|                                                                                 |         r ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                              |
|                                                                                 |         cont ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                      |
|                                                                                 |         BufferedChannel.updateCellReceive(ChannelSegment#1, 0, 0, <cont>): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                       |
|                                                                                 |         updCellResult$iv = <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                       |
|                                                                                 |         updCellResult$iv ➜ <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                       |
|                                                                                 |         this_$iv ➜ BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                       |
|                                                                                 |         cont ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                                      |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                         |
|                                                                                 |         index ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                                          |
|                                                                                 |         BufferedChannel.prepareReceiverForSuspension(<cont>, ChannelSegment#1, 0) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                          |
|                                                                                 |         cancellable$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                            |
|                                                                                 |         <cont>.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                            |
|                                                                                 |           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                      |
|                                                                                 |           isReusable = 0 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                           |
|                                                                                 |           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                       |
|                                                                                 |           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                  |
|                                                                                 |           installParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                               |
|                                                                                 |           isReusable ➜ 0 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:318)                                                                                           |
|                                                                                 |         $completion ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                               |
|                                                                                 |   result: Suspended                                                                                                                                                                             |
|                                                                                 |           switch (reason: coroutine is suspended)                                                                                                                                               |
|   allowed = false at SuspendedNotAwokeTest.trigger(SuspendedNotAwokeTest.kt:33) |                                                                                                                                                                                                 |
|   result: void                                                                  |                                                                                                                                                                                                 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                    Thread 1                                     |                                                                                            Thread 2                                                                                             |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| trigger()                                                                       |                                                                                                                                                                                                 |
|   allowed = true at SuspendedNotAwokeTest.trigger(SuspendedNotAwokeTest.kt:32)  |                                                                                                                                                                                                 |
|   switch                                                                        |                                                                                                                                                                                                 |
|                                                                                 | operation(): Suspended                                                                                                                                                                          |
|                                                                                 |   allowed ➜ true at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:38)                                                                                                                |
|                                                                                 |   $completion ➜ <cont> at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:39)                                                                                                          |
|                                                                                 |   neverWakeUpChannel.receive(<cont>): COROUTINE_SUSPENDED at SuspendedNotAwokeTest.operation(SuspendedNotAwokeTest.kt:39)                                                                       |
|                                                                                 |     $completion ➜ <cont> at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                       |
|                                                                                 |     BufferedChannel.receive$suspendImpl(BufferedChannel#1, <cont>): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                        |
|                                                                                 |       $this ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                                  |
|                                                                                 |       this_$iv = BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                               |
|                                                                                 |       waiter$iv = null at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:670)                                                                                                           |
|                                                                                 |       $i$f$receiveImpl = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                                                       |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                              |
|                                                                                 |       receiveSegment.get(): ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                    |
|                                                                                 |       segment$iv = ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                             |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                              |
|                                                                                 |       SuspendedNotAwokeTest#1.neverWakeUpChannel.isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                    |
|                                                                                 |         sendersAndCloseStatus.get(): 0 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                           |
|                                                                                 |         isClosedForReceive0(0): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                            |
|                                                                                 |           $this$isClosedForReceive0 ➜ 0 at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                         |
|                                                                                 |           isClosed(0, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                              |
|                                                                                 |             sendersAndCloseStatusCur ➜ 0 at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                   |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                              |
|                                                                                 |       receivers.getAndIncrement(): 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                            |
|                                                                                 |       r$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3528)                                                                                                                  |
|                                                                                 |       id$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3528)                                                                                                                 |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3529)                                                                                                                  |
|                                                                                 |       i$iv = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3529)                                                                                                                  |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3532)                                                                                             |
|                                                                                 |       id$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3532)                                                                                                                 |
|                                                                                 |       this_$iv ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                              |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                             |
|                                                                                 |       i$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                                  |
|                                                                                 |       waiter$iv ➜ null at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                                          |
|                                                                                 |       BufferedChannel.updateCellReceive(ChannelSegment#1, 0, 0, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                      |
|                                                                                 |         $this ➜ BufferedChannel#1 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                             |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                            |
|                                                                                 |         index ➜ 0 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                             |
|                                                                                 |         r ➜ 0 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                                 |
|                                                                                 |         waiter ➜ null at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                         |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                 |
|                                                                                 |         index ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                  |
|                                                                                 |         ChannelSegment#1.getState$kotlinx_coroutines_core(0): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                 |
|                                                                                 |           index ➜ 0 at ChannelSegment.getState$kotlinx_coroutines_core(BufferedChannel.kt:2773)                                                                                                 |
|                                                                                 |           data[1].get(): null at ChannelSegment.getState$kotlinx_coroutines_core(BufferedChannel.kt:2773)                                                                                       |
|                                                                                 |         state = null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                               |
|                                                                                 |         state ➜ null at BufferedChannel.updateCellReceive(BufferedChannel.kt:1002)                                                                                                              |
|                                                                                 |         sendersAndCloseStatus.get(): 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                            |
|                                                                                 |         senders = 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                               |
|                                                                                 |         $this$sendersCounter$iv = 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                               |
|                                                                                 |         senders ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:3888)                                                                                                               |
|                                                                                 |         r ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1008)                                                                                                                     |
|                                                                                 |         waiter ➜ null at BufferedChannel.updateCellReceive(BufferedChannel.kt:1010)                                                                                                             |
|                                                                                 |       updCellResult$iv = <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                    |
|                                                                                 |       updCellResult$iv ➜ <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                                    |
|                                                                                 |       segment$iv ➜ ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                             |
|                                                                                 |       i$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                  |
|                                                                                 |       r$iv ➜ 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                  |
|                                                                                 |       r = 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3562)                                                                                                                     |
|                                                                                 |       $this ➜ BufferedChannel#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                                                  |
|                                                                                 |       $completion ➜ <cont> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                                                       |
|                                                                                 |       SuspendedNotAwokeTest#1.neverWakeUpChannel.receiveOnNoWaiterSuspend(ChannelSegment#1, 0, 0, <cont>): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)   |
|                                                                                 |         $i$f$suspendCancellableCoroutineReusable = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:695)                                                                        |
|                                                                                 |         $completion ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                               |
|                                                                                 |         uCont$iv = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                                  |
|                                                                                 |         $i$a$-suspendCoroutineUninterceptedOrReturn-CancellableContinuationKt$suspendCancellableCoroutineReusable$2$iv = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571) |
|                                                                                 |         uCont$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                                                                  |
|                                                                                 |         CancellableContinuationKt.getOrCreateCancellableContinuation(<cont>): <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                       |
|                                                                                 |           delegate ➜ <cont> at CancellableContinuationKt.getOrCreateCancellableContinuation(CancellableContinuation.kt:347)                                                                     |
|                                                                                 |           delegate ➜ <cont> at CancellableContinuationKt.getOrCreateCancellableContinuation(CancellableContinuation.kt:348)                                                                     |
|                                                                                 |         cancellable$iv = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                                                            |
|                                                                                 |         cancellable$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                                                                                            |
|                                                                                 |         cont = <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                                                                                                      |
|                                                                                 |         $i$a$-suspendCancellableCoroutineReusable-BufferedChannel$receiveOnNoWaiterSuspend$2 = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3574)                           |
|                                                                                 |         this_$iv = BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:696)                                                                                        |
|                                                                                 |         $i$f$receiveImplOnNoWaiter = 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:696)                                                                                      |
|                                                                                 |         this_$iv ➜ BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                       |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                         |
|                                                                                 |         index ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                          |
|                                                                                 |         r ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                              |
|                                                                                 |         cont ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                                      |
|                                                                                 |         BufferedChannel.updateCellReceive(ChannelSegment#1, 0, 0, <cont>): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                       |
|                                                                                 |           $this ➜ BufferedChannel#1 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                           |
|                                                                                 |           segment ➜ ChannelSegment#1 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                          |
|                                                                                 |           index ➜ 0 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                           |
|                                                                                 |           r ➜ 0 at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                               |
|                                                                                 |           waiter ➜ <cont> at BufferedChannel.access$updateCellReceive(BufferedChannel.kt:0)                                                                                                     |
|                                                                                 |           segment ➜ ChannelSegment#1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                               |
|                                                                                 |           index ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                |
|                                                                                 |           ChannelSegment#1.getState$kotlinx_coroutines_core(0): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                               |
|                                                                                 |             index ➜ 0 at ChannelSegment.getState$kotlinx_coroutines_core(BufferedChannel.kt:2773)                                                                                               |
|                                                                                 |             data[1].get(): null at ChannelSegment.getState$kotlinx_coroutines_core(BufferedChannel.kt:2773)                                                                                     |
|                                                                                 |           state = null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                             |
|                                                                                 |           state ➜ null at BufferedChannel.updateCellReceive(BufferedChannel.kt:1002)                                                                                                            |
|                                                                                 |           sendersAndCloseStatus.get(): 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                          |
|                                                                                 |           senders = 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                             |
|                                                                                 |           $this$sendersCounter$iv = 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                             |
|                                                                                 |           senders ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:3888)                                                                                                             |
|                                                                                 |           r ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1008)                                                                                                                   |
|                                                                                 |           waiter ➜ <cont> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1010)                                                                                                         |
|                                                                                 |           segment ➜ ChannelSegment#1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                              |
|                                                                                 |           index ➜ 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                               |
|                                                                                 |           state ➜ null at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                            |
|                                                                                 |           waiter ➜ <cont> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                         |
|                                                                                 |           ChannelSegment#1.casState$kotlinx_coroutines_core(0, null, <cont>): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                |
|                                                                                 |             index ➜ 0 at ChannelSegment.casState$kotlinx_coroutines_core(BufferedChannel.kt:2779)                                                                                               |
|                                                                                 |             from ➜ null at ChannelSegment.casState$kotlinx_coroutines_core(BufferedChannel.kt:2779)                                                                                             |
|                                                                                 |             to ➜ <cont> at ChannelSegment.casState$kotlinx_coroutines_core(BufferedChannel.kt:2779)                                                                                             |
|                                                                                 |             data[1].compareAndSet(null, <cont>): true at ChannelSegment.casState$kotlinx_coroutines_core(BufferedChannel.kt:2779)                                                               |
|                                                                                 |           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                          |
|                                                                                 |             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                            |
|                                                                                 |               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                        |
|                                                                                 |                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                |
|                                                                                 |               it = 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                          |
|                                                                                 |               $i$a$-let-BufferedChannel$isRendezvousOrUnlimited$1 = 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:3056)                                                       |
|                                                                                 |               it ➜ 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                          |
|                                                                                 |         updCellResult$iv = <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                                       |
|                                                                                 |         updCellResult$iv ➜ <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                       |
|                                                                                 |         this_$iv ➜ BufferedChannel#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                       |
|                                                                                 |         cont ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                                      |
|                                                                                 |         segment ➜ ChannelSegment#1 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                         |
|                                                                                 |         index ➜ 0 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                                                          |
|                                                                                 |         BufferedChannel.prepareReceiverForSuspension(<cont>, ChannelSegment#1, 0) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                          |
|                                                                                 |           $this ➜ BufferedChannel#1 at BufferedChannel.access$prepareReceiverForSuspension(BufferedChannel.kt:0)                                                                                |
|                                                                                 |           $receiver ➜ <cont> at BufferedChannel.access$prepareReceiverForSuspension(BufferedChannel.kt:0)                                                                                       |
|                                                                                 |           segment ➜ ChannelSegment#1 at BufferedChannel.access$prepareReceiverForSuspension(BufferedChannel.kt:0)                                                                               |
|                                                                                 |           index ➜ 0 at BufferedChannel.access$prepareReceiverForSuspension(BufferedChannel.kt:0)                                                                                                |
|                                                                                 |           $this$prepareReceiverForSuspension ➜ <cont> at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                                   |
|                                                                                 |           segment ➜ ChannelSegment#1 at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                                                    |
|                                                                                 |           index ➜ 0 at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                                                                     |
|                                                                                 |           <cont>.invokeOnCancellation(ChannelSegment#1, 0) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                              |
|                                                                                 |             this_$iv = <cont> at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                             |
|                                                                                 |             atomicfu$handler$iv = AtomicIntegerFieldUpdaterImpl#1 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                         |
|                                                                                 |             $i$f$update$atomicfu = 0 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                      |
|                                                                                 |             atomicfu$handler$iv ➜ AtomicIntegerFieldUpdaterImpl#1 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                         |
|                                                                                 |             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                            |
|                                                                                 |             it = 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                |
|                                                                                 |             $i$a$-update$atomicfu-CancellableContinuationImpl$invokeOnCancellation$1 = 0 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                  |
|                                                                                 |             it ➜ 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                              |
|                                                                                 |             it ➜ 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                              |
|                                                                                 |             index ➜ 0 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:715)                                                                                   |
|                                                                                 |             it = 0 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                      |
|                                                                                 |             atomicfu$handler$iv ➜ AtomicIntegerFieldUpdaterImpl#1 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                       |
|                                                                                 |             it ➜ 0 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                      |
|                                                                                 |             _decisionAndIndex.compareAndSet(536870911, 0): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                         |
|                                                                                 |             segment ➜ ChannelSegment#1 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                  |
|                                                                                 |             invokeOnCancellationImpl(ChannelSegment#1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                  |
|                                                                                 |               handler ➜ ChannelSegment#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                            |
|                                                                                 |               handler ➜ ChannelSegment#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                            |
|                                                                                 |               atomicfu$handler$iv = AtomicReferenceFieldUpdaterImpl#2 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                               |
|                                                                                 |               $i$f$loop$atomicfu = 0 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                |
|                                                                                 |               atomicfu$handler$iv ➜ AtomicReferenceFieldUpdaterImpl#2 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                               |
|                                                                                 |               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                |
|                                                                                 |               state = Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                      |
|                                                                                 |               $i$a$-loop$atomicfu-CancellableContinuationImpl$invokeOnCancellationImpl$2 = 0 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)        |
|                                                                                 |               state ➜ Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:405)                                                                      |
|                                                                                 |               state ➜ Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                                                      |
|                                                                                 |               handler ➜ ChannelSegment#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                                            |
|                                                                                 |               _state.compareAndSet(Active#1, ChannelSegment#1): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                |
|                                                                                 |         cancellable$iv ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                            |
|                                                                                 |         <cont>.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                            |
|                                                                                 |           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                      |
|                                                                                 |             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                        |
|                                                                                 |             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                             |
|                                                                                 |               $this$isReusableMode ➜ 1 at DispatchedTaskKt.isReusableMode(DispatchedTask.kt:48)                                                                                                 |
|                                                                                 |           isReusable = 0 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                           |
|                                                                                 |           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                       |
|                                                                                 |             this_$iv = <cont> at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                       |
|                                                                                 |             atomicfu$handler$iv = AtomicIntegerFieldUpdaterImpl#1 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                   |
|                                                                                 |             $i$f$loop$atomicfu = 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                  |
|                                                                                 |             atomicfu$handler$iv ➜ AtomicIntegerFieldUpdaterImpl#1 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                   |
|                                                                                 |             _decisionAndIndex.get(): 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                              |
|                                                                                 |             cur = 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                 |
|                                                                                 |             $i$a$-loop$atomicfu-CancellableContinuationImpl$trySuspend$1 = 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                        |
|                                                                                 |             cur ➜ 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                               |
|                                                                                 |             cur ➜ 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                               |
|                                                                                 |             cur ➜ 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                               |
|                                                                                 |             _decisionAndIndex.compareAndSet(0, 536870912): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                   |
|                                                                                 |           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                  |
|                                                                                 |             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                        |
|                                                                                 |           installParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                               |
|                                                                                 |             CombinedContext#1.get(Key#1): JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                      |
|                                                                                 |               $this ➜ JobImpl#1 at Job$DefaultImpls.get(Job.kt:112)                                                                                                                             |
|                                                                                 |               key ➜ Key#1 at Job$DefaultImpls.get(Job.kt:112)                                                                                                                                   |
|                                                                                 |               CoroutineContext$Element$DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job$DefaultImpls.get(Job.kt:112)                                                                        |
|                                                                                 |                 key ➜ Key#1 at CoroutineContext$Element$DefaultImpls.get(CoroutineContext.kt:0)                                                                                                 |
|                                                                                 |                 $this ➜ JobImpl#1 at CoroutineContext$Element$DefaultImpls.get(CoroutineContext.kt:67)                                                                                          |
|                                                                                 |                 key ➜ Key#1 at CoroutineContext$Element$DefaultImpls.get(CoroutineContext.kt:67)                                                                                                |
|                                                                                 |                 $this ➜ JobImpl#1 at CoroutineContext$Element$DefaultImpls.get(CoroutineContext.kt:67)                                                                                          |
|                                                                                 |                 $this ➜ JobImpl#1 at CoroutineContext$Element$DefaultImpls.get(CoroutineContext.kt:67)                                                                                          |
|                                                                                 |             parent = JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                           |
|                                                                                 |             parent ➜ JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348)                                                                           |
|                                                                                 |             handle = ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                 |
|                                                                                 |             $this$asHandler$iv = 0 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                       |
|                                                                                 |             handle ➜ ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:710)                                                                 |
|                                                                                 |             Job$DefaultImpls.invokeOnCompletion(true, true, ChildContinuation#1): ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348)    |
|                                                                                 |               <set-?> ➜ JobImpl#1 at JobNode.setJob(JobSupport.kt:1348)                                                                                                                         |
|                                                                                 |               ChildContinuation#1.job = JobImpl#1 at JobNode.setJob(JobSupport.kt:1348)                                                                                                         |
|                                                                                 |             $i$f$getAsHandler = ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348)                                                      |
|                                                                                 |             $i$f$getAsHandler ➜ ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                      |
|                                                                                 |             _parentHandle.compareAndSet(null, ChildContinuation#1): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                 |
|                                                                                 |             $i$f$getAsHandler ➜ ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:353)                                                      |
|                                                                                 |           isReusable ➜ 0 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:318)                                                                                           |
|                                                                                 |         $completion ➜ <cont> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                               |
|                                                                                 |   result: Suspended                                                                                                                                                                             |
|                                                                                 |           switch (reason: coroutine is suspended)                                                                                                                                               |
|   allowed = false at SuspendedNotAwokeTest.trigger(SuspendedNotAwokeTest.kt:33) |                                                                                                                                                                                                 |
|   result: void                                                                  |                                                                                                                                                                                                 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
