= The execution has hung, see the thread dump =
| --------------------------------------------------- |
|         Thread 1         |         Thread 2         |
| --------------------------------------------------- |
| cas2_0(0, 0, 2, 1, 0, 3) | cas2_1(0, 0, 4, 1, 0, 5) |
| --------------------------------------------------- |


The following interleaving leads to the error:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                         Thread 1                                                         |                                                         Thread 2                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                          | cas2_1(0, 0, 4, 1, 0, 5)                                                                                                 |
|                                                                                                                          |   cas2(0,0,4,1,0,5,1) at AtomicArrayWithCAS2Test.cas2_1(Cas2Test.kt:40)                                                  |
|                                                                                                                          |     apply$default(Descriptor@1,false,1,false,5,null) at AtomicArrayWithCAS2.cas2(Cas2Test.kt:95)                         |
|                                                                                                                          |       apply(true,1,false) at AtomicArrayWithCAS2$Descriptor.apply$default(Cas2Test.kt:118)                               |
|                                                                                                                          |         installOrHelp$default(Descriptor@1,true,1,false,4,null) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:125) |
|                                                                                                                          |           installOrHelp(true,1,false) at AtomicArrayWithCAS2$Descriptor.installOrHelp$default(Cas2Test.kt:134)           |
|                                                                                                                          |             array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)          |
|                                                                                                                          |             get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                        |
|                                                                                                                          |             gate0.WRITE(1) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:147)                              |
|                                                                                                                          |             switch                                                                                                       |
| cas2_0(0, 0, 2, 1, 0, 3)                                                                                                 |                                                                                                                          |
|   cas2(0,0,2,1,0,3,0) at AtomicArrayWithCAS2Test.cas2_0(Cas2Test.kt:34)                                                  |                                                                                                                          |
|     apply$default(Descriptor@3,false,0,false,5,null) at AtomicArrayWithCAS2.cas2(Cas2Test.kt:95)                         |                                                                                                                          |
|       apply(true,0,false) at AtomicArrayWithCAS2$Descriptor.apply$default(Cas2Test.kt:118)                               |                                                                                                                          |
|         installOrHelp$default(Descriptor@3,true,0,false,4,null) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:125) |                                                                                                                          |
|           installOrHelp(true,0,false) at AtomicArrayWithCAS2$Descriptor.installOrHelp$default(Cas2Test.kt:134)           |                                                                                                                          |
|             array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)          |                                                                                                                          |
|             get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                        |                                                                                                                          |
|             gate1.WRITE(1) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:155)                              |                                                                                                                          |
|             gate0.READ: 1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:156)                               |                                                                                                                          |
|             /* The following events recursively repeat infinitely: */                                                    |                                                                                                                          |
|         ┌—> apply(false,0,true) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:157)                         |                                                                                                                          |
|         |     status.READ: Status@1 at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:120)                             |                                                                                                                          |
|         |     status.compareAndSet(Status@1,Status@1): true at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:121)     |                                                                                                                          |
|         |     installOrHelp(true,0,true) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:122)                        |                                                                                                                          |
|         |       array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)      |                                                                                                                          |
|         |       get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                    |                                                                                                                          |
|         └———————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                         |                                                                                                                          |
|                 switch (reason: active recursive lock detected)                                                          |                                                                                                                          |
|                                                                                                                          |             gate1.READ: 1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:148)                               |
|                                                                                                                          |             /* The following events recursively repeat infinitely: */                                                    |
|                                                                                                                          |         ┌—> apply(false,1,true) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:149)                         |
|                                                                                                                          |         |     status.READ: Status@1 at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:120)                             |
|                                                                                                                          |         |     status.compareAndSet(Status@1,Status@1): true at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:121)     |
|                                                                                                                          |         |     installOrHelp(true,1,true) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:122)                        |
|                                                                                                                          |         |       array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)      |
|                                                                                                                          |         |       get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                    |
|                                                                                                                          |         └———————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                         |
|                                                                                                                          |                 switch (reason: active recursive lock detected)                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                         Thread 1                                                         |                                                         Thread 2                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                          | cas2_1(0, 0, 4, 1, 0, 5)                                                                                                 |
|                                                                                                                          |   cas2(0,0,4,1,0,5,1) at AtomicArrayWithCAS2Test.cas2_1(Cas2Test.kt:40)                                                  |
|                                                                                                                          |     apply$default(Descriptor@1,false,1,false,5,null) at AtomicArrayWithCAS2.cas2(Cas2Test.kt:95)                         |
|                                                                                                                          |       apply(true,1,false) at AtomicArrayWithCAS2$Descriptor.apply$default(Cas2Test.kt:118)                               |
|                                                                                                                          |         installOrHelp$default(Descriptor@1,true,1,false,4,null) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:125) |
|                                                                                                                          |           installOrHelp(true,1,false) at AtomicArrayWithCAS2$Descriptor.installOrHelp$default(Cas2Test.kt:134)           |
|                                                                                                                          |             array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)          |
|                                                                                                                          |             get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                        |
|                                                                                                                          |             gate0.WRITE(1) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:147)                              |
|                                                                                                                          |             switch                                                                                                       |
| cas2_0(0, 0, 2, 1, 0, 3)                                                                                                 |                                                                                                                          |
|   cas2(0,0,2,1,0,3,0) at AtomicArrayWithCAS2Test.cas2_0(Cas2Test.kt:34)                                                  |                                                                                                                          |
|     apply$default(Descriptor@3,false,0,false,5,null) at AtomicArrayWithCAS2.cas2(Cas2Test.kt:95)                         |                                                                                                                          |
|       apply(true,0,false) at AtomicArrayWithCAS2$Descriptor.apply$default(Cas2Test.kt:118)                               |                                                                                                                          |
|         installOrHelp$default(Descriptor@3,true,0,false,4,null) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:125) |                                                                                                                          |
|           installOrHelp(true,0,false) at AtomicArrayWithCAS2$Descriptor.installOrHelp$default(Cas2Test.kt:134)           |                                                                                                                          |
|             array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)          |                                                                                                                          |
|             get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                        |                                                                                                                          |
|             gate1.WRITE(1) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:155)                              |                                                                                                                          |
|             gate0.READ: 1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:156)                               |                                                                                                                          |
|             /* The following events recursively repeat infinitely: */                                                    |                                                                                                                          |
|         ┌—> apply(false,0,true) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:157)                         |                                                                                                                          |
|         |     status.READ: Status@1 at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:120)                             |                                                                                                                          |
|         |     status.compareAndSet(Status@1,Status@1): true at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:121)     |                                                                                                                          |
|         |     installOrHelp(true,0,true) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:122)                        |                                                                                                                          |
|         |       array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)      |                                                                                                                          |
|         |       get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                    |                                                                                                                          |
|         └———————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                         |                                                                                                                          |
|                 switch (reason: active recursive lock detected)                                                          |                                                                                                                          |
|                                                                                                                          |             gate1.READ: 1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:148)                               |
|                                                                                                                          |             /* The following events recursively repeat infinitely: */                                                    |
|                                                                                                                          |         ┌—> apply(false,1,true) at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:149)                         |
|                                                                                                                          |         |     status.READ: Status@1 at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:120)                             |
|                                                                                                                          |         |     status.compareAndSet(Status@1,Status@1): true at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:121)     |
|                                                                                                                          |         |     installOrHelp(true,1,true) at AtomicArrayWithCAS2$Descriptor.apply(Cas2Test.kt:122)                        |
|                                                                                                                          |         |       array.READ: AtomicReferenceArray@1 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)      |
|                                                                                                                          |         |       get(0): Descriptor@2 at AtomicArrayWithCAS2$Descriptor.installOrHelp(Cas2Test.kt:139)                    |
|                                                                                                                          |         └———————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                         |
|                                                                                                                          |                 switch (reason: active recursive lock detected)                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
