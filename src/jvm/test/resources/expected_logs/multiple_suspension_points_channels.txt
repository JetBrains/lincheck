= Invalid execution results =
| ------------------------------------------------------------------------------- |
|                Thread 1                |                Thread 2                |
| ------------------------------------------------------------------------------- |
| operation1(): IllegalStateException #1 | operation2(): IllegalStateException #2 |
| ------------------------------------------------------------------------------- |

---
The number next to an exception name helps you find its stack trace provided after the interleaving section
---

The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                              Thread 1                                              |                                    Thread 2                                     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| operation1(): IllegalStateException #1                                                             |                                                                                 |
|   ResultKt.throwOnFailure(null)                                                                    |                                                                                 |
|   Boxing.boxInt(1): 1                                                                              |                                                                                 |
|   channel1.send(1) [suspendable: Continuation#1]                                                   |                                                                                 |
|     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1                |                                                                                 |
|     sendSegment.get(): ChannelSegment#1                                                            |                                                                                 |
|     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1                           |                                                                                 |
|     sendersAndCloseStatus.getAndIncrement(): 0                                                     |                                                                                 |
|     BufferedChannel.isClosedForSend0(0): false                                                     |                                                                                 |
|     BufferedChannel.updateCellSend(ChannelSegment#1, 0, 1, 0, null, false): 3                      |                                                                                 |
|     sendOnNoWaiterSuspend(ChannelSegment#1, 0, 1, 0, Continuation#1)                               |                                                                                 |
|       CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#2): Continuation#3 |                                                                                 |
|       updateCellSend(ChannelSegment#1, 0, 1, 0, Continuation#3, false): 2                          |                                                                                 |
|       prepareSenderForSuspension(Continuation#3, ChannelSegment#1, 0)                              |                                                                                 |
|         $this$prepareSenderForSuspension.invokeOnCancellation(ChannelSegment#1, 32)                |                                                                                 |
|           _decisionAndIndex.get(): 536870911                                                       |                                                                                 |
|           update$atomicfu$Lambda()                                                                 |                                                                                 |
|           switch                                                                                   |                                                                                 |
|                                                                                                    | operation2(): IllegalStateException #2                                          |
|                                                                                                    |   ResultKt.throwOnFailure(null)                                                 |
|                                                                                                    |   channel1.receive() [suspendable: Continuation#4]: 1                           |
|                                                                                                    |   intValue(): 1                                                                 |
|                                                                                                    |   counter ➜ 0                                                                   |
|                                                                                                    |   switch                                                                        |
|           _decisionAndIndex.compareAndSet(536870911, 32): false                                    |                                                                                 |
|           _decisionAndIndex.get(): 1610612735                                                      |                                                                                 |
|           update$atomicfu$Lambda()                                                                 |                                                                                 |
|           _decisionAndIndex.compareAndSet(1610612735, 1073741856): true                            |                                                                                 |
|           invokeOnCancellationImpl(ChannelSegment#1)                                               |                                                                                 |
|       cancellable.getResult()                                                                      |                                                                                 |
|   counter ➜ 0                                                                                      |                                                                                 |
|   counter = 1                                                                                      |                                                                                 |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED                            |                                                                                 |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED                    |                                                                                 |
|     switch (reason: coroutine is suspended)                                                        |                                                                                 |
|                                                                                                    |   counter = 1                                                                   |
|                                                                                                    |   Boxing.boxInt(1): 1                                                           |
|                                                                                                    |   channel2.send(1) [suspendable: Continuation#4]                                |
|                                                                                                    |   channel1.receive() [suspendable: Continuation#4]: COROUTINE_SUSPENDED         |
|                                                                                                    |     receive$suspendImpl(BufferedChannel#1, Continuation#4): COROUTINE_SUSPENDED |
|                                                                                                    |     switch (reason: coroutine is suspended)                                     |
|   ResultKt.throwOnFailure(1)                                                                       |                                                                                 |
|   intValue(): 1                                                                                    |                                                                                 |
|   Boxing.boxInt(2): 2                                                                              |                                                                                 |
|   channel1.send(2) [suspendable: Continuation#1]                                                   |                                                                                 |
|   counter ➜ 1                                                                                      |                                                                                 |
|   counter = 2                                                                                      |                                                                                 |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED                            |                                                                                 |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED                    |                                                                                 |
|     switch (reason: coroutine is suspended)                                                        |                                                                                 |
|                                                                                                    |   ResultKt.throwOnFailure(2)                                                    |
|                                                                                                    |   intValue(): 2                                                                 |
|                                                                                                    |   counter ➜ 2                                                                   |
|                                                                                                    |   counter = 3                                                                   |
|                                                                                                    |   Boxing.boxInt(2): 2                                                           |
|                                                                                                    |   channel2.send(2) [suspendable: Continuation#4]                                |
|                                                                                                    |   channel1.receive() [suspendable: Continuation#4]: COROUTINE_SUSPENDED         |
|                                                                                                    |     receive$suspendImpl(BufferedChannel#1, Continuation#4): COROUTINE_SUSPENDED |
|                                                                                                    |     switch (reason: coroutine is suspended)                                     |
|   ResultKt.throwOnFailure(2)                                                                       |                                                                                 |
|   intValue(): 2                                                                                    |                                                                                 |
|   Boxing.boxInt(3): 3                                                                              |                                                                                 |
|   channel1.send(3) [suspendable: Continuation#1]                                                   |                                                                                 |
|   counter ➜ 3                                                                                      |                                                                                 |
|   counter = 4                                                                                      |                                                                                 |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED                            |                                                                                 |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED                    |                                                                                 |
|     switch (reason: coroutine is suspended)                                                        |                                                                                 |
|                                                                                                    |   ResultKt.throwOnFailure(3)                                                    |
|                                                                                                    |   intValue(): 3                                                                 |
|                                                                                                    |   counter ➜ 4                                                                   |
|                                                                                                    |   counter = 5                                                                   |
|                                                                                                    |   Boxing.boxInt(3): 3                                                           |
|                                                                                                    |   channel2.send(3) [suspendable: Continuation#4]                                |
|                                                                                                    |   counter ➜ 5                                                                   |
|                                                                                                    |   result: IllegalStateException #2                                              |
|   ResultKt.throwOnFailure(3)                                                                       |                                                                                 |
|   intValue(): 3                                                                                    |                                                                                 |
|   counter ➜ 5                                                                                      |                                                                                 |
|   result: IllegalStateException #1                                                                 |                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

Exception stack traces:
#1: java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:159)
	at org.jetbrains.kotlinx.lincheck_test.representation.MultipleSuspensionPointsChannelsTraceRepresentationTest$operation1$1.invokeSuspend(MultipleSuspensionsTests.kt)
	at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
	at java.base/java.lang.Thread.run(Thread.java:840)

#2: java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:169)
	at org.jetbrains.kotlinx.lincheck_test.representation.MultipleSuspensionPointsChannelsTraceRepresentationTest$operation2$1.invokeSuspend(MultipleSuspensionsTests.kt)
	at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
	at java.base/java.lang.Thread.run(Thread.java:840)

Detailed trace:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                         Thread 1                                                                                                          |                                                                                                         Thread 2                                                                                                          |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| operation1(): IllegalStateException #1                                                                                                                                                                                    |                                                                                                                                                                                                                           |
|   ResultKt.throwOnFailure(null) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:152)                                                                                    |                                                                                                                                                                                                                           |
|   Boxing.boxInt(1): 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                                              |                                                                                                                                                                                                                           |
|   channel1.send(1) [suspendable: Continuation#1] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                   |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |                                                                                                                                                                                                                           |
|     sendSegment.get(): ChannelSegment#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |                                                                                                                                                                                                                           |
|     sendersAndCloseStatus.getAndIncrement(): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|     BufferedChannel.isClosedForSend0(0): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|       isClosed(0, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |                                                                                                                                                                                                                           |
|         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |                                                                                                                                                                                                                           |
|     BufferedChannel.updateCellSend(ChannelSegment#1, 0, 1, 0, null, false): 3 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |                                                                                                                                                                                                                           |
|       segment.storeElement(0, 1) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |                                                                                                                                                                                                                           |
|         setElementLazy(0, 1) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |                                                                                                                                                                                                                           |
|           data[0].lazySet(1) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |                                                                                                                                                                                                                           |
|       segment.getState(0): null at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                                 |                                                                                                                                                                                                                           |
|         data[1].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                           |                                                                                                                                                                                                                           |
|       bufferOrRendezvousSend(0): false at BufferedChannel.updateCellSend(BufferedChannel.kt:432)                                                                                                                          |                                                                                                                                                                                                                           |
|         getBufferEndCounter(): 0 at BufferedChannel.bufferOrRendezvousSend(BufferedChannel.kt:614)                                                                                                                        |                                                                                                                                                                                                                           |
|           bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                                |                                                                                                                                                                                                                           |
|         getReceiversCounter(): 0 at BufferedChannel.bufferOrRendezvousSend(BufferedChannel.kt:614)                                                                                                                        |                                                                                                                                                                                                                           |
|           receivers.get(): 0 at BufferedChannel.getReceiversCounter(BufferedChannel.kt:71)                                                                                                                                |                                                                                                                                                                                                                           |
|     sendOnNoWaiterSuspend(ChannelSegment#1, 0, 1, 0, Continuation#1) at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                        |                                                                                                                                                                                                                           |
|       CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#2): Continuation#3 at BufferedChannel.sendOnNoWaiterSuspend(BufferedChannel.kt:3153)                                                      |                                                                                                                                                                                                                           |
|       updateCellSend(ChannelSegment#1, 0, 1, 0, Continuation#3, false): 2 at BufferedChannel.sendOnNoWaiterSuspend(BufferedChannel.kt:3156)                                                                               |                                                                                                                                                                                                                           |
|         segment.storeElement(0, 1) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                              |                                                                                                                                                                                                                           |
|           setElementLazy(0, 1) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                    |                                                                                                                                                                                                                           |
|             data[0].lazySet(1) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                  |                                                                                                                                                                                                                           |
|         segment.getState(0): null at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                               |                                                                                                                                                                                                                           |
|           data[1].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |                                                                                                                                                                                                                           |
|         bufferOrRendezvousSend(0): false at BufferedChannel.updateCellSend(BufferedChannel.kt:432)                                                                                                                        |                                                                                                                                                                                                                           |
|           getBufferEndCounter(): 0 at BufferedChannel.bufferOrRendezvousSend(BufferedChannel.kt:614)                                                                                                                      |                                                                                                                                                                                                                           |
|             bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                              |                                                                                                                                                                                                                           |
|           getReceiversCounter(): 0 at BufferedChannel.bufferOrRendezvousSend(BufferedChannel.kt:614)                                                                                                                      |                                                                                                                                                                                                                           |
|             receivers.get(): 0 at BufferedChannel.getReceiversCounter(BufferedChannel.kt:71)                                                                                                                              |                                                                                                                                                                                                                           |
|         segment.casState(0, null, Continuation#3): true at BufferedChannel.updateCellSend(BufferedChannel.kt:448)                                                                                                         |                                                                                                                                                                                                                           |
|           data[1].compareAndSet(null, Continuation#3): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                           |                                                                                                                                                                                                                           |
|       prepareSenderForSuspension(Continuation#3, ChannelSegment#1, 0) at BufferedChannel.sendOnNoWaiterSuspend(BufferedChannel.kt:3165)                                                                                   |                                                                                                                                                                                                                           |
|         $this$prepareSenderForSuspension.invokeOnCancellation(ChannelSegment#1, 32) at BufferedChannel.prepareSenderForSuspension(BufferedChannel.kt:178)                                                                 |                                                                                                                                                                                                                           |
|           _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                        |                                                                                                                                                                                                                           |
|           update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                  |                                                                                                                                                                                                                           |
|             Continuation#3.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                             |                                                                                                                                                                                                                           |
|             Continuation#3.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                          |                                                                                                                                                                                                                           |
|             Continuation#3.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                     |                                                                                                                                                                                                                           |
|           switch                                                                                                                                                                                                          |                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                           | operation2(): IllegalStateException #2                                                                                                                                                                                    |
|                                                                                                                                                                                                                           |   ResultKt.throwOnFailure(null) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:162)                                                                                    |
|                                                                                                                                                                                                                           |   channel1.receive() [suspendable: Continuation#4]: 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:165)                                                              |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                   |
|                                                                                                                                                                                                                           |     receiveSegment.get(): ChannelSegment#1 at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                               |
|                                                                                                                                                                                                                           |     isClosedForReceive(): false at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                                          |
|                                                                                                                                                                                                                           |       sendersAndCloseStatus.get(): 1 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                       |
|                                                                                                                                                                                                                           |       isClosedForReceive0(1): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                        |
|                                                                                                                                                                                                                           |         isClosed(1, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                          |
|                                                                                                                                                                                                                           |           getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                    |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                             |
|                                                                                                                                                                                                                           |     receivers.getAndIncrement(): 0 at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                                       |
|                                                                                                                                                                                                                           |     BufferedChannel.updateCellReceive(ChannelSegment#1, 0, 0, null): 1 at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                   |
|                                                                                                                                                                                                                           |       segment.getState(0): Continuation#3 at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                    |
|                                                                                                                                                                                                                           |         data[1].get(): Continuation#3 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                 |
|                                                                                                                                                                                                                           |       updateCellReceiveSlow(ChannelSegment#1, 0, 0, null): 1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1031)                                                                                                |
|                                                                                                                                                                                                                           |         segment.getState(0): Continuation#3 at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1048)                                                                                                             |
|                                                                                                                                                                                                                           |           data[1].get(): Continuation#3 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                               |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getIN_BUFFER$p(): <SHOULD_BUFFER> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1051)                                                                                      |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getINTERRUPTED_SEND$p(): <INTERRUPTED_SEND> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1091)                                                                            |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getPOISONED$p(): <POISONED> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1094)                                                                                            |
|                                                                                                                                                                                                                           |         BufferedChannelKt.getCHANNEL_CLOSED(): <CHANNEL_CLOSED> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1096)                                                                                         |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getRESUMING_BY_EB$p(): <RESUMING_BY_EB> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1108)                                                                                |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getRESUMING_BY_RCV$p(): <S_RESUMING_BY_RCV> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1115)                                                                            |
|                                                                                                                                                                                                                           |         segment.casState(0, Continuation#3, <S_RESUMING_BY_RCV>): true at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1115)                                                                                  |
|                                                                                                                                                                                                                           |           data[1].compareAndSet(Continuation#3, <S_RESUMING_BY_RCV>): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                            |
|                                                                                                                                                                                                                           |         tryResumeSender(Continuation#3, ChannelSegment#1, 0): true at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1120)                                                                                      |
|                                                                                                                                                                                                                           |           BufferedChannelKt.tryResume0(Continuation#3, Unit, null): true at BufferedChannel.tryResumeSender(BufferedChannel.kt:1151)                                                                                      |
|                                                                                                                                                                                                                           |             $this$tryResume0.tryResume(Unit, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                         |
|                                                                                                                                                                                                                           |               tryResumeImpl(Unit, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                |
|                                                                                                                                                                                                                           |                 _state.get(): Active#1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                     |
|                                                                                                                                                                                                                           |                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                     |
|                                                                                                                                                                                                                           |                   resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                         |
|                                                                                                                                                                                                                           |                   resumedState(Active#1, Unit, 1, null, null) at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                            |
|                                                                                                                                                                                                                           |                     DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                           |
|                                                                                                                                                                                                                           |                   Continuation#3._state.compareAndSet(Active#1, Unit): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                              |
|                                                                                                                                                                                                                           |                   detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                             |
|                                                                                                                                                                                                                           |                     isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                       |
|                                                                                                                                                                                                                           |                       resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                        |
|                                                                                                                                                                                                                           |                       DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                             |
|                                                                                                                                                                                                                           |                     detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                             |
|                                                                                                                                                                                                                           |                       getParentHandle(): null at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                              |
|                                                                                                                                                                                                                           |                         _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                      |
|                                                                                                                                                                                                                           |             $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                      |
|                                                                                                                                                                                                                           |               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                     |
|                                                                                                                                                                                                                           |               resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                            |
|                                                                                                                                                                                                                           |               dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                         |
|                                                                                                                                                                                                                           |                 tryResume(): true at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                       |
|                                                                                                                                                                                                                           |                   _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                           |
|                                                                                                                                                                                                                           |                   loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                       |
|                                                                                                                                                                                                                           |                     Continuation#3.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                             |
|                                                                                                                                                                                                                           |                     Continuation#3.getIndex() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:288)                                                                                                |
|                                                                                                                                                                                                                           |                     Continuation#3.decisionAndIndex() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:288)                                                                                        |
|                                                                                                                                                                                                                           |                     Continuation#3._decisionAndIndex.compareAndSet(536870911, 1610612735): true at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:288)                                              |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1128)                                                                                            |
|                                                                                                                                                                                                                           |         segment.setState(0, <DONE_RCV>) at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1128)                                                                                                                 |
|                                                                                                                                                                                                                           |           data[1].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                     |
|                                                                                                                                                                                                                           |         expandBuffer() at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1129)                                                                                                                                  |
|                                                                                                                                                                                                                           |           isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                        |
|                                                                                                                                                                                                                           |             getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                    |
|                                                                                                                                                                                                                           |               bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                            |
|                                                                                                                                                                                                                           |         segment.retrieveElement(0): 1 at BufferedChannel.updateCellReceiveSlow(BufferedChannel.kt:1130)                                                                                                                   |
|                                                                                                                                                                                                                           |           getElement(0): 1 at ChannelSegment.retrieveElement(BufferedChannel.kt:2759)                                                                                                                                     |
|                                                                                                                                                                                                                           |             data[0].get(): 1 at ChannelSegment.getElement(BufferedChannel.kt:2757)                                                                                                                                        |
|                                                                                                                                                                                                                           |           cleanElement(0) at ChannelSegment.retrieveElement(BufferedChannel.kt:2759)                                                                                                                                      |
|                                                                                                                                                                                                                           |             setElementLazy(0, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                               |
|                                                                                                                                                                                                                           |               data[0].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                             |
|                                                                                                                                                                                                                           |     BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                   |
|                                                                                                                                                                                                                           |     BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                     |
|                                                                                                                                                                                                                           |     BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |     segment.cleanPrev() at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                                                                                  |
|                                                                                                                                                                                                                           |       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |
|                                                                                                                                                                                                                           |   intValue(): 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:186)                                                                                                    |
|                                                                                                                                                                                                                           |   counter ➜ 0 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   switch                                                                                                                                                                                                                  |
|           _decisionAndIndex.compareAndSet(536870911, 32): false at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |                                                                                                                                                                                                                           |
|           _decisionAndIndex.get(): 1610612735 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                       |                                                                                                                                                                                                                           |
|           update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                  |                                                                                                                                                                                                                           |
|             Continuation#3.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                             |                                                                                                                                                                                                                           |
|             Continuation#3.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                          |                                                                                                                                                                                                                           |
|             Continuation#3.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                     |                                                                                                                                                                                                                           |
|           _decisionAndIndex.compareAndSet(1610612735, 1073741856): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                           |                                                                                                                                                                                                                           |
|           invokeOnCancellationImpl(ChannelSegment#1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                              |                                                                                                                                                                                                                           |
|             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                             |                                                                                                                                                                                                                           |
|             assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                   |                                                                                                                                                                                                                           |
|             _state.get() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                                      |                                                                                                                                                                                                                           |
|             loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                            |                                                                                                                                                                                                                           |
|       cancellable.getResult() at BufferedChannel.sendOnNoWaiterSuspend(BufferedChannel.kt:3259)                                                                                                                           |                                                                                                                                                                                                                           |
|         isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                  |                                                                                                                                                                                                                           |
|           resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                    |                                                                                                                                                                                                                           |
|           DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                         |                                                                                                                                                                                                                           |
|         trySuspend(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                  |                                                                                                                                                                                                                           |
|           _decisionAndIndex.get(): 1073741856 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                 |                                                                                                                                                                                                                           |
|           loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                              |                                                                                                                                                                                                                           |
|             Continuation#3.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                    |                                                                                                                                                                                                                           |
|         getState() at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:328)                                                                                                                           |                                                                                                                                                                                                                           |
|           _state.get() at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                                        |                                                                                                                                                                                                                           |
|         resumeMode ➜ 1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:334)                                                                                                                       |                                                                                                                                                                                                                           |
|         DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:334)                                                                                          |                                                                                                                                                                                                                           |
|         getContext(): CombinedContext#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:335)                                                                                                      |                                                                                                                                                                                                                           |
|         context.get(Key#1): JobImpl#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:335)                                                                                                        |                                                                                                                                                                                                                           |
|           cur.element.get(Key#1): JobImpl#1 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                           |                                                                                                                                                                                                                           |
|             Job.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at JobSupport.get(JobSupport.kt:25)                                                                                                                         |                                                                                                                                                                                                                           |
|               CoroutineContext.Element.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job.DefaultImpls.get(Job.kt:112)                                                                                                  |                                                                                                                                                                                                                           |
|                 getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                      |                                                                                                                                                                                                                           |
|         job.isActive(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:336)                                                                                                                 |                                                                                                                                                                                                                           |
|           getState(): Empty#1 at JobSupport.isActive(JobSupport.kt:184)                                                                                                                                                   |                                                                                                                                                                                                                           |
|             _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                                 |                                                                                                                                                                                                                           |
|             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                                |                                                                                                                                                                                                                           |
|           state.isActive(): true at JobSupport.isActive(JobSupport.kt:185)                                                                                                                                                |                                                                                                                                                                                                                           |
|         getSuccessfulResult(Unit) at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:342)                                                                                                            |                                                                                                                                                                                                                           |
|   counter ➜ 0 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   counter = 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:157)                                            |                                                                                                                                                                                                                           |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                          |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                   |                                                                                                                                                                                                                           |
|       receiveSegment.get(): ChannelSegment#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                                              |                                                                                                                                                                                                                           |
|       isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 0 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                     |                                                                                                                                                                                                                           |
|         isClosedForReceive0(0): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                      |                                                                                                                                                                                                                           |
|           isClosed(0, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                        |                                                                                                                                                                                                                           |
|             getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:681)                                                                                             |                                                                                                                                                                                                                           |
|       receivers.getAndIncrement(): 0 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                      |                                                                                                                                                                                                                           |
|       BufferedChannel.updateCellReceive(ChannelSegment#2, 0, 0, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                |                                                                                                                                                                                                                           |
|         segment.getState(0): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                            |                                                                                                                                                                                                                           |
|           data[1].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                      |                                                                                                                                                                                                                           |
|         getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                                 |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1013)                                                                              |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                                    |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                              |                                                                                                                                                                                                                           |
|       receiveOnNoWaiterSuspend(ChannelSegment#2, 0, 0, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                |                                                                                                                                                                                                                           |
|         CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#2): Continuation#5 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                 |                                                                                                                                                                                                                           |
|         updateCellReceive(ChannelSegment#2, 0, 0, Continuation#5): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                         |                                                                                                                                                                                                                           |
|           segment.getState(0): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                          |                                                                                                                                                                                                                           |
|             data[1].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                       |                                                                                                                                                                                                                           |
|           sendersAndCloseStatus.get(): 0 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                    |                                                                                                                                                                                                                           |
|           getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                               |                                                                                                                                                                                                                           |
|           segment.casState(0, null, Continuation#5): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                   |                                                                                                                                                                                                                           |
|             data[1].compareAndSet(null, Continuation#5): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                         |                                                                                                                                                                                                                           |
|           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                                                    |                                                                                                                                                                                                                           |
|             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                      |                                                                                                                                                                                                                           |
|               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                  |                                                                                                                                                                                                                           |
|                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                          |                                                                                                                                                                                                                           |
|           BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1020)                                                                                                |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                           |                                                                                                                                                                                                                           |
|         prepareReceiverForSuspension(Continuation#5, ChannelSegment#2, 0) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                            |                                                                                                                                                                                                                           |
|           onReceiveEnqueued() at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:716)                                                                                                                     |                                                                                                                                                                                                                           |
|           $this$prepareReceiverForSuspension.invokeOnCancellation(ChannelSegment#2, 0) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                            |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                      |                                                                                                                                                                                                                           |
|             update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                |                                                                                                                                                                                                                           |
|               Continuation#5.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                           |                                                                                                                                                                                                                           |
|               Continuation#5.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                        |                                                                                                                                                                                                                           |
|               Continuation#5.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                   |                                                                                                                                                                                                                           |
|             _decisionAndIndex.compareAndSet(536870911, 0): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |                                                                                                                                                                                                                           |
|             invokeOnCancellationImpl(ChannelSegment#2) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                            |                                                                                                                                                                                                                           |
|               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                           |                                                                                                                                                                                                                           |
|               assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                 |                                                                                                                                                                                                                           |
|               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|               loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|                 Continuation#5._state.compareAndSet(Active#1, ChannelSegment#2): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                         |                                                                                                                                                                                                                           |
|         cancellable.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                                 |                                                                                                                                                                                                                           |
|           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                |                                                                                                                                                                                                                           |
|             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                  |                                                                                                                                                                                                                           |
|             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                       |                                                                                                                                                                                                                           |
|           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                 |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                        |                                                                                                                                                                                                                           |
|             loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                            |                                                                                                                                                                                                                           |
|               Continuation#5.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                  |                                                                                                                                                                                                                           |
|               Continuation#5.getIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                                     |                                                                                                                                                                                                                           |
|               Continuation#5.decisionAndIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                             |                                                                                                                                                                                                                           |
|               Continuation#5._decisionAndIndex.compareAndSet(0, 536870912): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                            |                                                                                                                                                                                                                           |
|           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                                            |                                                                                                                                                                                                                           |
|             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                                  |                                                                                                                                                                                                                           |
|           installParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                                                         |                                                                                                                                                                                                                           |
|             getContext(): CombinedContext#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                        |                                                                                                                                                                                                                           |
|             context.get(Key#1): JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                          |                                                                                                                                                                                                                           |
|               cur.element.get(Key#1): JobImpl#1 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                       |                                                                                                                                                                                                                           |
|                 Job.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at JobSupport.get(JobSupport.kt:25)                                                                                                                     |                                                                                                                                                                                                                           |
|                   CoroutineContext.Element.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job.DefaultImpls.get(Job.kt:112)                                                                                              |                                                                                                                                                                                                                           |
|                     getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                  |                                                                                                                                                                                                                           |
|             getAsHandler() at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                                                         |                                                                                                                                                                                                                           |
|             Job.DefaultImpls.invokeOnCompletion$default(JobImpl#1, true, false, ChildContinuation#1, 2, null): ChildContinuation#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348) |                                                                                                                                                                                                                           |
|               JobImpl#1.invokeOnCompletion(true, true, ChildContinuation#1): ChildContinuation#1 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                               |                                                                                                                                                                                                                           |
|                 makeNode(ChildContinuation#1, true): ChildContinuation#1 at JobSupport.invokeOnCompletion(JobSupport.kt:460)                                                                                              |                                                                                                                                                                                                                           |
|                   node.setJob(JobImpl#1) at JobSupport.makeNode(JobSupport.kt:521)                                                                                                                                        |                                                                                                                                                                                                                           |
|                 loopOnState() at JobSupport.invokeOnCompletion(JobSupport.kt:461)                                                                                                                                         |                                                                                                                                                                                                                           |
|                   getState(): Empty#1 at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                                |                                                                                                                                                                                                                           |
|                     _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                         |                                                                                                                                                                                                                           |
|                     loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                        |                                                                                                                                                                                                                           |
|                   loopOnState$Lambda() at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                               |                                                                                                                                                                                                                           |
|                     state.isActive(): true at JobSupport.invokeOnCompletion(JobSupport.kt:464)                                                                                                                            |                                                                                                                                                                                                                           |
|                     element._state.compareAndSet(Empty#1, ChildContinuation#1): true at JobSupport.invokeOnCompletion(JobSupport.kt:466)                                                                                  |                                                                                                                                                                                                                           |
|             _parentHandle.compareAndSet(null, ChildContinuation#1): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                           |                                                                                                                                                                                                                           |
|         DebugProbesKt.probeCoroutineSuspended(Continuation#1) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                        |                                                                                                                                                                                                                           |
|     switch (reason: coroutine is suspended)                                                                                                                                                                               |                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                           |   counter = 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   Boxing.boxInt(1): 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                                              |
|                                                                                                                                                                                                                           |   channel2.send(1) [suspendable: Continuation#4] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                   |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |
|                                                                                                                                                                                                                           |     sendSegment.get(): ChannelSegment#2 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |
|                                                                                                                                                                                                                           |     sendersAndCloseStatus.getAndIncrement(): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |     BufferedChannel.isClosedForSend0(0): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |       isClosed(0, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |
|                                                                                                                                                                                                                           |         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |
|                                                                                                                                                                                                                           |     BufferedChannel.updateCellSend(ChannelSegment#2, 0, 1, 0, null, false): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |       segment.storeElement(0, 1) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |
|                                                                                                                                                                                                                           |         setElementLazy(0, 1) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |
|                                                                                                                                                                                                                           |           data[0].lazySet(1) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |
|                                                                                                                                                                                                                           |       segment.getState(0): Continuation#5 at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                       |
|                                                                                                                                                                                                                           |         data[1].get(): Continuation#5 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                 |
|                                                                                                                                                                                                                           |       segment.cleanElement(0) at BufferedChannel.updateCellSend(BufferedChannel.kt:456)                                                                                                                                   |
|                                                                                                                                                                                                                           |         setElementLazy(0, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                                   |
|                                                                                                                                                                                                                           |           data[0].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                 |
|                                                                                                                                                                                                                           |       tryResumeReceiver(Continuation#5, 1): true at BufferedChannel.updateCellSend(BufferedChannel.kt:458)                                                                                                                |
|                                                                                                                                                                                                                           |         BufferedChannelKt.tryResume0(Continuation#5, 1, null): true at BufferedChannel.tryResumeReceiver(BufferedChannel.kt:646)                                                                                          |
|                                                                                                                                                                                                                           |           $this$tryResume0.tryResume(1, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                              |
|                                                                                                                                                                                                                           |             tryResumeImpl(1, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                     |
|                                                                                                                                                                                                                           |               _state.get(): ChannelSegment#2 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |               loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                       |
|                                                                                                                                                                                                                           |                 resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                           |
|                                                                                                                                                                                                                           |                 resumedState(ChannelSegment#2, 1, 1, null, null): 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                      |
|                                                                                                                                                                                                                           |                   DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                             |
|                                                                                                                                                                                                                           |                 Continuation#5._state.compareAndSet(ChannelSegment#2, 1): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                           |
|                                                                                                                                                                                                                           |                 detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                               |
|                                                                                                                                                                                                                           |                   isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                         |
|                                                                                                                                                                                                                           |                     resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                          |
|                                                                                                                                                                                                                           |                     DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                               |
|                                                                                                                                                                                                                           |                   detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                               |
|                                                                                                                                                                                                                           |                     getParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                 |
|                                                                                                                                                                                                                           |                       _parentHandle.get(): ChildContinuation#1 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                         |
|                                                                                                                                                                                                                           |                     handle.dispose() at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:573)                                                                                                       |
|                                                                                                                                                                                                                           |                       getJob(): JobImpl#1 at JobNode.dispose(JobSupport.kt:1351)                                                                                                                                          |
|                                                                                                                                                                                                                           |                         job ➜ JobImpl#1 at JobNode.getJob(JobSupport.kt:1348)                                                                                                                                             |
|                                                                                                                                                                                                                           |                       job.removeNode(ChildContinuation#1) at JobNode.dispose(JobSupport.kt:1351)                                                                                                                          |
|                                                                                                                                                                                                                           |                         loopOnState() at JobSupport.removeNode(JobSupport.kt:594)                                                                                                                                         |
|                                                                                                                                                                                                                           |                           getState(): ChildContinuation#1 at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                    |
|                                                                                                                                                                                                                           |                             _state.get(): ChildContinuation#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                     |
|                                                                                                                                                                                                                           |                             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                |
|                                                                                                                                                                                                                           |                           loopOnState$Lambda() at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                               |
|                                                                                                                                                                                                                           |                             JobSupportKt.access$getEMPTY_ACTIVE$p(): Empty#1 at JobSupport.removeNode(JobSupport.kt:599)                                                                                                  |
|                                                                                                                                                                                                                           |                             job._state.compareAndSet(ChildContinuation#1, Empty#1): true at JobSupport.removeNode(JobSupport.kt:599)                                                                                      |
|                                                                                                                                                                                                                           |                     _parentHandle.set(NonDisposableHandle#1) at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:574)                                                                               |
|                                                                                                                                                                                                                           |           $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                        |
|                                                                                                                                                                                                                           |             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                       |
|                                                                                                                                                                                                                           |             resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                              |
|                                                                                                                                                                                                                           |             dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                           |
|                                                                                                                                                                                                                           |               tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                        |
|                                                                                                                                                                                                                           |                 _decisionAndIndex.get(): 536870912 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                             |
|                                                                                                                                                                                                                           |                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                         |
|                                                                                                                                                                                                                           |                   Continuation#5.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                               |
|                                                                                                                                                                                                                           |               DispatchedTaskKt.dispatch(Continuation#5, 1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:474)                                                                              |
|                                                                                                                                                                                                                           |                 DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.dispatch(DispatchedTask.kt:153)                                                                                                                 |
|                                                                                                                                                                                                                           |                 $this$dispatch.getDelegate(): Continuation#2 at DispatchedTaskKt.dispatch(DispatchedTask.kt:154)                                                                                                          |
|                                                                                                                                                                                                                           |                 DispatchedTaskKt.resume(Continuation#5, Continuation#2, false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:168)                                                                                        |
|                                                                                                                                                                                                                           |                   $this$resume.takeState(): 1 at DispatchedTaskKt.resume(DispatchedTask.kt:174)                                                                                                                           |
|                                                                                                                                                                                                                           |                     getState(): 1 at CancellableContinuationImpl.takeState(CancellableContinuationImpl.kt:168)                                                                                                            |
|                                                                                                                                                                                                                           |                       _state.get(): 1 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                         |
|                                                                                                                                                                                                                           |                   $this$resume.getExceptionalResult(1): null at DispatchedTaskKt.resume(DispatchedTask.kt:175)                                                                                                            |
|                                                                                                                                                                                                                           |                     getExceptionalResult(1): null at CancellableContinuationImpl.getExceptionalResult(CancellableContinuationImpl.kt:613)                                                                                 |
|                                                                                                                                                                                                                           |                   $this$resume.getSuccessfulResult(1): 1 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                |
|                                                                                                                                                                                                                           |                   Result.constructor-impl(1): 1 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                         |
|                                                                                                                                                                                                                           |                   delegate.resumeWith(1) at DispatchedTaskKt.resume(DispatchedTask.kt:179)                                                                                                                                |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                      |
|                                                                                                                                                                                                                           |       segment.setState(0, <DONE_RCV>) at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                                           |
|                                                                                                                                                                                                                           |         data[1].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                       |
|                                                                                                                                                                                                                           |       onReceiveDequeued() at BufferedChannel.updateCellSend(BufferedChannel.kt:461)                                                                                                                                       |
|                                                                                                                                                                                                                           |     segment.cleanPrev() at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                                     |
|                                                                                                                                                                                                                           |       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |
|                                                                                                                                                                                                                           |   channel1.receive() [suspendable: Continuation#4]: COROUTINE_SUSPENDED at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:165)                                            |
|                                                                                                                                                                                                                           |     receive$suspendImpl(BufferedChannel#1, Continuation#4): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                          |
|                                                                                                                                                                                                                           |       BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                   |
|                                                                                                                                                                                                                           |       receiveSegment.get(): ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                                              |
|                                                                                                                                                                                                                           |       isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                                                         |
|                                                                                                                                                                                                                           |         sendersAndCloseStatus.get(): 1 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                     |
|                                                                                                                                                                                                                           |         isClosedForReceive0(1): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                      |
|                                                                                                                                                                                                                           |           isClosed(1, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                        |
|                                                                                                                                                                                                                           |             getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                  |
|                                                                                                                                                                                                                           |       BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:681)                                                                                             |
|                                                                                                                                                                                                                           |       receivers.getAndIncrement(): 1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                      |
|                                                                                                                                                                                                                           |       BufferedChannel.updateCellReceive(ChannelSegment#1, 1, 1, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                |
|                                                                                                                                                                                                                           |         segment.getState(1): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                            |
|                                                                                                                                                                                                                           |           data[3].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |
|                                                                                                                                                                                                                           |         sendersAndCloseStatus.get(): 1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                      |
|                                                                                                                                                                                                                           |         getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                                 |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1013)                                                                              |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                                  |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                                    |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                              |
|                                                                                                                                                                                                                           |       receiveOnNoWaiterSuspend(ChannelSegment#1, 1, 1, Continuation#4): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                |
|                                                                                                                                                                                                                           |         CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#6): Continuation#7 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                 |
|                                                                                                                                                                                                                           |         updateCellReceive(ChannelSegment#1, 1, 1, Continuation#7): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                         |
|                                                                                                                                                                                                                           |           segment.getState(1): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                          |
|                                                                                                                                                                                                                           |             data[3].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                       |
|                                                                                                                                                                                                                           |           sendersAndCloseStatus.get(): 1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                    |
|                                                                                                                                                                                                                           |           getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                               |
|                                                                                                                                                                                                                           |           segment.casState(1, null, Continuation#7): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                   |
|                                                                                                                                                                                                                           |             data[3].compareAndSet(null, Continuation#7): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                         |
|                                                                                                                                                                                                                           |           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                                                    |
|                                                                                                                                                                                                                           |             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                      |
|                                                                                                                                                                                                                           |               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                  |
|                                                                                                                                                                                                                           |                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                          |
|                                                                                                                                                                                                                           |           BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1020)                                                                                                |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                           |
|                                                                                                                                                                                                                           |         prepareReceiverForSuspension(Continuation#7, ChannelSegment#1, 1) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                            |
|                                                                                                                                                                                                                           |           onReceiveEnqueued() at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:716)                                                                                                                     |
|                                                                                                                                                                                                                           |           $this$prepareReceiverForSuspension.invokeOnCancellation(ChannelSegment#1, 1) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                            |
|                                                                                                                                                                                                                           |             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                      |
|                                                                                                                                                                                                                           |             update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                |
|                                                                                                                                                                                                                           |               Continuation#7.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                           |
|                                                                                                                                                                                                                           |               Continuation#7.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                        |
|                                                                                                                                                                                                                           |               Continuation#7.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                   |
|                                                                                                                                                                                                                           |             _decisionAndIndex.compareAndSet(536870911, 1): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |
|                                                                                                                                                                                                                           |             invokeOnCancellationImpl(ChannelSegment#1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                            |
|                                                                                                                                                                                                                           |               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                           |
|                                                                                                                                                                                                                           |               assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                 |
|                                                                                                                                                                                                                           |               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |
|                                                                                                                                                                                                                           |               loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |
|                                                                                                                                                                                                                           |                 Continuation#7._state.compareAndSet(Active#1, ChannelSegment#1): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                         |
|                                                                                                                                                                                                                           |         cancellable.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                                 |
|                                                                                                                                                                                                                           |           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                |
|                                                                                                                                                                                                                           |             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                  |
|                                                                                                                                                                                                                           |             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                       |
|                                                                                                                                                                                                                           |           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                 |
|                                                                                                                                                                                                                           |             _decisionAndIndex.get(): 1 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                        |
|                                                                                                                                                                                                                           |             loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                            |
|                                                                                                                                                                                                                           |               Continuation#7.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                  |
|                                                                                                                                                                                                                           |               Continuation#7.getIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                                     |
|                                                                                                                                                                                                                           |               Continuation#7.decisionAndIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                             |
|                                                                                                                                                                                                                           |               Continuation#7._decisionAndIndex.compareAndSet(1, 536870913): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                            |
|                                                                                                                                                                                                                           |           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                                            |
|                                                                                                                                                                                                                           |             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                                  |
|                                                                                                                                                                                                                           |           installParentHandle(): ChildContinuation#2 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                                                         |
|                                                                                                                                                                                                                           |             getContext(): CombinedContext#2 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                        |
|                                                                                                                                                                                                                           |             context.get(Key#1): JobImpl#2 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                          |
|                                                                                                                                                                                                                           |               cur.element.get(Key#1): JobImpl#2 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                       |
|                                                                                                                                                                                                                           |                 Job.DefaultImpls.get(JobImpl#2, Key#1): JobImpl#2 at JobSupport.get(JobSupport.kt:25)                                                                                                                     |
|                                                                                                                                                                                                                           |                   CoroutineContext.Element.DefaultImpls.get(JobImpl#2, Key#1): JobImpl#2 at Job.DefaultImpls.get(Job.kt:112)                                                                                              |
|                                                                                                                                                                                                                           |                     getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                  |
|                                                                                                                                                                                                                           |             getAsHandler() at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                                                         |
|                                                                                                                                                                                                                           |             Job.DefaultImpls.invokeOnCompletion$default(JobImpl#2, true, false, ChildContinuation#2, 2, null): ChildContinuation#2 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348) |
|                                                                                                                                                                                                                           |               JobImpl#2.invokeOnCompletion(true, true, ChildContinuation#2): ChildContinuation#2 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                               |
|                                                                                                                                                                                                                           |                 makeNode(ChildContinuation#2, true): ChildContinuation#2 at JobSupport.invokeOnCompletion(JobSupport.kt:460)                                                                                              |
|                                                                                                                                                                                                                           |                   node.setJob(JobImpl#2) at JobSupport.makeNode(JobSupport.kt:521)                                                                                                                                        |
|                                                                                                                                                                                                                           |                 loopOnState() at JobSupport.invokeOnCompletion(JobSupport.kt:461)                                                                                                                                         |
|                                                                                                                                                                                                                           |                   getState(): Empty#1 at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                                |
|                                                                                                                                                                                                                           |                     _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                         |
|                                                                                                                                                                                                                           |                     loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                        |
|                                                                                                                                                                                                                           |                   loopOnState$Lambda() at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                               |
|                                                                                                                                                                                                                           |                     state.isActive(): true at JobSupport.invokeOnCompletion(JobSupport.kt:464)                                                                                                                            |
|                                                                                                                                                                                                                           |                     element._state.compareAndSet(Empty#1, ChildContinuation#2): true at JobSupport.invokeOnCompletion(JobSupport.kt:466)                                                                                  |
|                                                                                                                                                                                                                           |             _parentHandle.compareAndSet(null, ChildContinuation#2): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                           |
|                                                                                                                                                                                                                           |         DebugProbesKt.probeCoroutineSuspended(Continuation#4) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                        |
|                                                                                                                                                                                                                           |     switch (reason: coroutine is suspended)                                                                                                                                                                               |
|   ResultKt.throwOnFailure(1) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:152)                                                                                       |                                                                                                                                                                                                                           |
|   intValue(): 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:184)                                                                                                    |                                                                                                                                                                                                                           |
|   Boxing.boxInt(2): 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                                              |                                                                                                                                                                                                                           |
|   channel1.send(2) [suspendable: Continuation#1] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                   |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |                                                                                                                                                                                                                           |
|     sendSegment.get(): ChannelSegment#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |                                                                                                                                                                                                                           |
|     sendersAndCloseStatus.getAndIncrement(): 1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|     BufferedChannel.isClosedForSend0(1): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|       isClosed(1, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |                                                                                                                                                                                                                           |
|         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |                                                                                                                                                                                                                           |
|     BufferedChannel.updateCellSend(ChannelSegment#1, 1, 2, 1, null, false): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |                                                                                                                                                                                                                           |
|       segment.storeElement(1, 2) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |                                                                                                                                                                                                                           |
|         setElementLazy(1, 2) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |                                                                                                                                                                                                                           |
|           data[2].lazySet(2) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |                                                                                                                                                                                                                           |
|       segment.getState(1): Continuation#7 at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                       |                                                                                                                                                                                                                           |
|         data[3].get(): Continuation#7 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                 |                                                                                                                                                                                                                           |
|       segment.cleanElement(1) at BufferedChannel.updateCellSend(BufferedChannel.kt:456)                                                                                                                                   |                                                                                                                                                                                                                           |
|         setElementLazy(1, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                                   |                                                                                                                                                                                                                           |
|           data[2].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                 |                                                                                                                                                                                                                           |
|       tryResumeReceiver(Continuation#7, 2): true at BufferedChannel.updateCellSend(BufferedChannel.kt:458)                                                                                                                |                                                                                                                                                                                                                           |
|         BufferedChannelKt.tryResume0(Continuation#7, 2, null): true at BufferedChannel.tryResumeReceiver(BufferedChannel.kt:646)                                                                                          |                                                                                                                                                                                                                           |
|           $this$tryResume0.tryResume(2, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                              |                                                                                                                                                                                                                           |
|             tryResumeImpl(2, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                     |                                                                                                                                                                                                                           |
|               _state.get(): ChannelSegment#1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                               |                                                                                                                                                                                                                           |
|               loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                       |                                                                                                                                                                                                                           |
|                 resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                           |                                                                                                                                                                                                                           |
|                 resumedState(ChannelSegment#1, 2, 1, null, null): 2 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                      |                                                                                                                                                                                                                           |
|                   DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                             |                                                                                                                                                                                                                           |
|                 Continuation#7._state.compareAndSet(ChannelSegment#1, 2): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                           |                                                                                                                                                                                                                           |
|                 detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                               |                                                                                                                                                                                                                           |
|                   isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                         |                                                                                                                                                                                                                           |
|                     resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                          |                                                                                                                                                                                                                           |
|                     DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                               |                                                                                                                                                                                                                           |
|                   detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                               |                                                                                                                                                                                                                           |
|                     getParentHandle(): ChildContinuation#2 at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                 |                                                                                                                                                                                                                           |
|                       _parentHandle.get(): ChildContinuation#2 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                         |                                                                                                                                                                                                                           |
|                     handle.dispose() at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:573)                                                                                                       |                                                                                                                                                                                                                           |
|                       getJob(): JobImpl#2 at JobNode.dispose(JobSupport.kt:1351)                                                                                                                                          |                                                                                                                                                                                                                           |
|                         job ➜ JobImpl#2 at JobNode.getJob(JobSupport.kt:1348)                                                                                                                                             |                                                                                                                                                                                                                           |
|                       job.removeNode(ChildContinuation#2) at JobNode.dispose(JobSupport.kt:1351)                                                                                                                          |                                                                                                                                                                                                                           |
|                         loopOnState() at JobSupport.removeNode(JobSupport.kt:594)                                                                                                                                         |                                                                                                                                                                                                                           |
|                           getState(): ChildContinuation#2 at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                    |                                                                                                                                                                                                                           |
|                             _state.get(): ChildContinuation#2 at JobSupport.getState(JobSupport.kt:0)                                                                                                                     |                                                                                                                                                                                                                           |
|                             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                |                                                                                                                                                                                                                           |
|                           loopOnState$Lambda() at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                               |                                                                                                                                                                                                                           |
|                             JobSupportKt.access$getEMPTY_ACTIVE$p(): Empty#1 at JobSupport.removeNode(JobSupport.kt:599)                                                                                                  |                                                                                                                                                                                                                           |
|                             job._state.compareAndSet(ChildContinuation#2, Empty#1): true at JobSupport.removeNode(JobSupport.kt:599)                                                                                      |                                                                                                                                                                                                                           |
|                     _parentHandle.set(NonDisposableHandle#1) at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:574)                                                                               |                                                                                                                                                                                                                           |
|           $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                        |                                                                                                                                                                                                                           |
|             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                       |                                                                                                                                                                                                                           |
|             resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                              |                                                                                                                                                                                                                           |
|             dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                           |                                                                                                                                                                                                                           |
|               tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                        |                                                                                                                                                                                                                           |
|                 _decisionAndIndex.get(): 536870913 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                             |                                                                                                                                                                                                                           |
|                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                         |                                                                                                                                                                                                                           |
|                   Continuation#7.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                               |                                                                                                                                                                                                                           |
|               DispatchedTaskKt.dispatch(Continuation#7, 1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:474)                                                                              |                                                                                                                                                                                                                           |
|                 DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.dispatch(DispatchedTask.kt:153)                                                                                                                 |                                                                                                                                                                                                                           |
|                 $this$dispatch.getDelegate(): Continuation#6 at DispatchedTaskKt.dispatch(DispatchedTask.kt:154)                                                                                                          |                                                                                                                                                                                                                           |
|                 DispatchedTaskKt.resume(Continuation#7, Continuation#6, false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:168)                                                                                        |                                                                                                                                                                                                                           |
|                   $this$resume.takeState(): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:174)                                                                                                                           |                                                                                                                                                                                                                           |
|                     getState(): 2 at CancellableContinuationImpl.takeState(CancellableContinuationImpl.kt:168)                                                                                                            |                                                                                                                                                                                                                           |
|                       _state.get(): 2 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                         |                                                                                                                                                                                                                           |
|                   $this$resume.getExceptionalResult(2): null at DispatchedTaskKt.resume(DispatchedTask.kt:175)                                                                                                            |                                                                                                                                                                                                                           |
|                     getExceptionalResult(2): null at CancellableContinuationImpl.getExceptionalResult(CancellableContinuationImpl.kt:613)                                                                                 |                                                                                                                                                                                                                           |
|                   $this$resume.getSuccessfulResult(2): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                |                                                                                                                                                                                                                           |
|                   Result.constructor-impl(2): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                         |                                                                                                                                                                                                                           |
|                   delegate.resumeWith(2) at DispatchedTaskKt.resume(DispatchedTask.kt:179)                                                                                                                                |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                      |                                                                                                                                                                                                                           |
|       segment.setState(1, <DONE_RCV>) at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                                           |                                                                                                                                                                                                                           |
|         data[3].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                       |                                                                                                                                                                                                                           |
|       onReceiveDequeued() at BufferedChannel.updateCellSend(BufferedChannel.kt:461)                                                                                                                                       |                                                                                                                                                                                                                           |
|     segment.cleanPrev() at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                                     |                                                                                                                                                                                                                           |
|       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |                                                                                                                                                                                                                           |
|   counter ➜ 1 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   counter = 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:157)                                            |                                                                                                                                                                                                                           |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                          |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                   |                                                                                                                                                                                                                           |
|       receiveSegment.get(): ChannelSegment#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                                              |                                                                                                                                                                                                                           |
|       isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 1 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                     |                                                                                                                                                                                                                           |
|         isClosedForReceive0(1): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                      |                                                                                                                                                                                                                           |
|           isClosed(1, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                        |                                                                                                                                                                                                                           |
|             getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:681)                                                                                             |                                                                                                                                                                                                                           |
|       receivers.getAndIncrement(): 1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                      |                                                                                                                                                                                                                           |
|       BufferedChannel.updateCellReceive(ChannelSegment#2, 1, 1, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                |                                                                                                                                                                                                                           |
|         segment.getState(1): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                            |                                                                                                                                                                                                                           |
|           data[3].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                      |                                                                                                                                                                                                                           |
|         getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                                 |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1013)                                                                              |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                                    |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                              |                                                                                                                                                                                                                           |
|       receiveOnNoWaiterSuspend(ChannelSegment#2, 1, 1, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                |                                                                                                                                                                                                                           |
|         CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#2): Continuation#8 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                 |                                                                                                                                                                                                                           |
|         updateCellReceive(ChannelSegment#2, 1, 1, Continuation#8): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                         |                                                                                                                                                                                                                           |
|           segment.getState(1): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                          |                                                                                                                                                                                                                           |
|             data[3].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                       |                                                                                                                                                                                                                           |
|           sendersAndCloseStatus.get(): 1 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                    |                                                                                                                                                                                                                           |
|           getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                               |                                                                                                                                                                                                                           |
|           segment.casState(1, null, Continuation#8): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                   |                                                                                                                                                                                                                           |
|             data[3].compareAndSet(null, Continuation#8): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                         |                                                                                                                                                                                                                           |
|           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                                                    |                                                                                                                                                                                                                           |
|             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                      |                                                                                                                                                                                                                           |
|               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                  |                                                                                                                                                                                                                           |
|                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                          |                                                                                                                                                                                                                           |
|           BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1020)                                                                                                |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                           |                                                                                                                                                                                                                           |
|         prepareReceiverForSuspension(Continuation#8, ChannelSegment#2, 1) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                            |                                                                                                                                                                                                                           |
|           onReceiveEnqueued() at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:716)                                                                                                                     |                                                                                                                                                                                                                           |
|           $this$prepareReceiverForSuspension.invokeOnCancellation(ChannelSegment#2, 1) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                            |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                      |                                                                                                                                                                                                                           |
|             update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                |                                                                                                                                                                                                                           |
|               Continuation#8.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                           |                                                                                                                                                                                                                           |
|               Continuation#8.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                        |                                                                                                                                                                                                                           |
|               Continuation#8.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                   |                                                                                                                                                                                                                           |
|             _decisionAndIndex.compareAndSet(536870911, 1): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |                                                                                                                                                                                                                           |
|             invokeOnCancellationImpl(ChannelSegment#2) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                            |                                                                                                                                                                                                                           |
|               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                           |                                                                                                                                                                                                                           |
|               assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                 |                                                                                                                                                                                                                           |
|               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|               loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|                 Continuation#8._state.compareAndSet(Active#1, ChannelSegment#2): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                         |                                                                                                                                                                                                                           |
|         cancellable.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                                 |                                                                                                                                                                                                                           |
|           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                |                                                                                                                                                                                                                           |
|             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                  |                                                                                                                                                                                                                           |
|             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                       |                                                                                                                                                                                                                           |
|           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                 |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 1 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                        |                                                                                                                                                                                                                           |
|             loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                            |                                                                                                                                                                                                                           |
|               Continuation#8.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                  |                                                                                                                                                                                                                           |
|               Continuation#8.getIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                                     |                                                                                                                                                                                                                           |
|               Continuation#8.decisionAndIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                             |                                                                                                                                                                                                                           |
|               Continuation#8._decisionAndIndex.compareAndSet(1, 536870913): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                            |                                                                                                                                                                                                                           |
|           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                                            |                                                                                                                                                                                                                           |
|             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                                  |                                                                                                                                                                                                                           |
|           installParentHandle(): ChildContinuation#3 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                                                         |                                                                                                                                                                                                                           |
|             getContext(): CombinedContext#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                        |                                                                                                                                                                                                                           |
|             context.get(Key#1): JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                          |                                                                                                                                                                                                                           |
|               cur.element.get(Key#1): JobImpl#1 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                       |                                                                                                                                                                                                                           |
|                 Job.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at JobSupport.get(JobSupport.kt:25)                                                                                                                     |                                                                                                                                                                                                                           |
|                   CoroutineContext.Element.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job.DefaultImpls.get(Job.kt:112)                                                                                              |                                                                                                                                                                                                                           |
|                     getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                  |                                                                                                                                                                                                                           |
|             getAsHandler() at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                                                         |                                                                                                                                                                                                                           |
|             Job.DefaultImpls.invokeOnCompletion$default(JobImpl#1, true, false, ChildContinuation#3, 2, null): ChildContinuation#3 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348) |                                                                                                                                                                                                                           |
|               JobImpl#1.invokeOnCompletion(true, true, ChildContinuation#3): ChildContinuation#3 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                               |                                                                                                                                                                                                                           |
|                 makeNode(ChildContinuation#3, true): ChildContinuation#3 at JobSupport.invokeOnCompletion(JobSupport.kt:460)                                                                                              |                                                                                                                                                                                                                           |
|                   node.setJob(JobImpl#1) at JobSupport.makeNode(JobSupport.kt:521)                                                                                                                                        |                                                                                                                                                                                                                           |
|                 loopOnState() at JobSupport.invokeOnCompletion(JobSupport.kt:461)                                                                                                                                         |                                                                                                                                                                                                                           |
|                   getState(): Empty#1 at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                                |                                                                                                                                                                                                                           |
|                     _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                         |                                                                                                                                                                                                                           |
|                     loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                        |                                                                                                                                                                                                                           |
|                   loopOnState$Lambda() at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                               |                                                                                                                                                                                                                           |
|                     state.isActive(): true at JobSupport.invokeOnCompletion(JobSupport.kt:464)                                                                                                                            |                                                                                                                                                                                                                           |
|                     element._state.compareAndSet(Empty#1, ChildContinuation#3): true at JobSupport.invokeOnCompletion(JobSupport.kt:466)                                                                                  |                                                                                                                                                                                                                           |
|             _parentHandle.compareAndSet(null, ChildContinuation#3): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                           |                                                                                                                                                                                                                           |
|         DebugProbesKt.probeCoroutineSuspended(Continuation#1) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                        |                                                                                                                                                                                                                           |
|     switch (reason: coroutine is suspended)                                                                                                                                                                               |                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                           |   ResultKt.throwOnFailure(2) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:162)                                                                                       |
|                                                                                                                                                                                                                           |   intValue(): 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:186)                                                                                                    |
|                                                                                                                                                                                                                           |   counter ➜ 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   counter = 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   Boxing.boxInt(2): 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                                              |
|                                                                                                                                                                                                                           |   channel2.send(2) [suspendable: Continuation#4] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                   |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |
|                                                                                                                                                                                                                           |     sendSegment.get(): ChannelSegment#2 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |
|                                                                                                                                                                                                                           |     sendersAndCloseStatus.getAndIncrement(): 1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |     BufferedChannel.isClosedForSend0(1): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |       isClosed(1, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |
|                                                                                                                                                                                                                           |         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |
|                                                                                                                                                                                                                           |     BufferedChannel.updateCellSend(ChannelSegment#2, 1, 2, 1, null, false): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |       segment.storeElement(1, 2) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |
|                                                                                                                                                                                                                           |         setElementLazy(1, 2) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |
|                                                                                                                                                                                                                           |           data[2].lazySet(2) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |
|                                                                                                                                                                                                                           |       segment.getState(1): Continuation#8 at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                       |
|                                                                                                                                                                                                                           |         data[3].get(): Continuation#8 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                 |
|                                                                                                                                                                                                                           |       segment.cleanElement(1) at BufferedChannel.updateCellSend(BufferedChannel.kt:456)                                                                                                                                   |
|                                                                                                                                                                                                                           |         setElementLazy(1, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                                   |
|                                                                                                                                                                                                                           |           data[2].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                 |
|                                                                                                                                                                                                                           |       tryResumeReceiver(Continuation#8, 2): true at BufferedChannel.updateCellSend(BufferedChannel.kt:458)                                                                                                                |
|                                                                                                                                                                                                                           |         BufferedChannelKt.tryResume0(Continuation#8, 2, null): true at BufferedChannel.tryResumeReceiver(BufferedChannel.kt:646)                                                                                          |
|                                                                                                                                                                                                                           |           $this$tryResume0.tryResume(2, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                              |
|                                                                                                                                                                                                                           |             tryResumeImpl(2, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                     |
|                                                                                                                                                                                                                           |               _state.get(): ChannelSegment#2 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |               loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                       |
|                                                                                                                                                                                                                           |                 resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                           |
|                                                                                                                                                                                                                           |                 resumedState(ChannelSegment#2, 2, 1, null, null): 2 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                      |
|                                                                                                                                                                                                                           |                   DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                             |
|                                                                                                                                                                                                                           |                 Continuation#8._state.compareAndSet(ChannelSegment#2, 2): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                           |
|                                                                                                                                                                                                                           |                 detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                               |
|                                                                                                                                                                                                                           |                   isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                         |
|                                                                                                                                                                                                                           |                     resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                          |
|                                                                                                                                                                                                                           |                     DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                               |
|                                                                                                                                                                                                                           |                   detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                               |
|                                                                                                                                                                                                                           |                     getParentHandle(): ChildContinuation#3 at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                 |
|                                                                                                                                                                                                                           |                       _parentHandle.get(): ChildContinuation#3 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                         |
|                                                                                                                                                                                                                           |                     handle.dispose() at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:573)                                                                                                       |
|                                                                                                                                                                                                                           |                       getJob(): JobImpl#1 at JobNode.dispose(JobSupport.kt:1351)                                                                                                                                          |
|                                                                                                                                                                                                                           |                         job ➜ JobImpl#1 at JobNode.getJob(JobSupport.kt:1348)                                                                                                                                             |
|                                                                                                                                                                                                                           |                       job.removeNode(ChildContinuation#3) at JobNode.dispose(JobSupport.kt:1351)                                                                                                                          |
|                                                                                                                                                                                                                           |                         loopOnState() at JobSupport.removeNode(JobSupport.kt:594)                                                                                                                                         |
|                                                                                                                                                                                                                           |                           getState(): ChildContinuation#3 at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                    |
|                                                                                                                                                                                                                           |                             _state.get(): ChildContinuation#3 at JobSupport.getState(JobSupport.kt:0)                                                                                                                     |
|                                                                                                                                                                                                                           |                             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                |
|                                                                                                                                                                                                                           |                           loopOnState$Lambda() at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                               |
|                                                                                                                                                                                                                           |                             JobSupportKt.access$getEMPTY_ACTIVE$p(): Empty#1 at JobSupport.removeNode(JobSupport.kt:599)                                                                                                  |
|                                                                                                                                                                                                                           |                             job._state.compareAndSet(ChildContinuation#3, Empty#1): true at JobSupport.removeNode(JobSupport.kt:599)                                                                                      |
|                                                                                                                                                                                                                           |                     _parentHandle.set(NonDisposableHandle#1) at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:574)                                                                               |
|                                                                                                                                                                                                                           |           $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                        |
|                                                                                                                                                                                                                           |             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                       |
|                                                                                                                                                                                                                           |             resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                              |
|                                                                                                                                                                                                                           |             dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                           |
|                                                                                                                                                                                                                           |               tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                        |
|                                                                                                                                                                                                                           |                 _decisionAndIndex.get(): 536870913 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                             |
|                                                                                                                                                                                                                           |                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                         |
|                                                                                                                                                                                                                           |                   Continuation#8.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                               |
|                                                                                                                                                                                                                           |               DispatchedTaskKt.dispatch(Continuation#8, 1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:474)                                                                              |
|                                                                                                                                                                                                                           |                 DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.dispatch(DispatchedTask.kt:153)                                                                                                                 |
|                                                                                                                                                                                                                           |                 $this$dispatch.getDelegate(): Continuation#2 at DispatchedTaskKt.dispatch(DispatchedTask.kt:154)                                                                                                          |
|                                                                                                                                                                                                                           |                 DispatchedTaskKt.resume(Continuation#8, Continuation#2, false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:168)                                                                                        |
|                                                                                                                                                                                                                           |                   $this$resume.takeState(): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:174)                                                                                                                           |
|                                                                                                                                                                                                                           |                     getState(): 2 at CancellableContinuationImpl.takeState(CancellableContinuationImpl.kt:168)                                                                                                            |
|                                                                                                                                                                                                                           |                       _state.get(): 2 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                         |
|                                                                                                                                                                                                                           |                   $this$resume.getExceptionalResult(2): null at DispatchedTaskKt.resume(DispatchedTask.kt:175)                                                                                                            |
|                                                                                                                                                                                                                           |                     getExceptionalResult(2): null at CancellableContinuationImpl.getExceptionalResult(CancellableContinuationImpl.kt:613)                                                                                 |
|                                                                                                                                                                                                                           |                   $this$resume.getSuccessfulResult(2): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                |
|                                                                                                                                                                                                                           |                   Result.constructor-impl(2): 2 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                         |
|                                                                                                                                                                                                                           |                   delegate.resumeWith(2) at DispatchedTaskKt.resume(DispatchedTask.kt:179)                                                                                                                                |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                      |
|                                                                                                                                                                                                                           |       segment.setState(1, <DONE_RCV>) at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                                           |
|                                                                                                                                                                                                                           |         data[3].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                       |
|                                                                                                                                                                                                                           |       onReceiveDequeued() at BufferedChannel.updateCellSend(BufferedChannel.kt:461)                                                                                                                                       |
|                                                                                                                                                                                                                           |     segment.cleanPrev() at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                                     |
|                                                                                                                                                                                                                           |       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |
|                                                                                                                                                                                                                           |   channel1.receive() [suspendable: Continuation#4]: COROUTINE_SUSPENDED at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:165)                                            |
|                                                                                                                                                                                                                           |     receive$suspendImpl(BufferedChannel#1, Continuation#4): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                          |
|                                                                                                                                                                                                                           |       BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                   |
|                                                                                                                                                                                                                           |       receiveSegment.get(): ChannelSegment#1 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                                              |
|                                                                                                                                                                                                                           |       isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                                                         |
|                                                                                                                                                                                                                           |         sendersAndCloseStatus.get(): 2 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                     |
|                                                                                                                                                                                                                           |         isClosedForReceive0(2): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                      |
|                                                                                                                                                                                                                           |           isClosed(2, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                        |
|                                                                                                                                                                                                                           |             getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                  |
|                                                                                                                                                                                                                           |       BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:681)                                                                                             |
|                                                                                                                                                                                                                           |       receivers.getAndIncrement(): 2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                      |
|                                                                                                                                                                                                                           |       BufferedChannel.updateCellReceive(ChannelSegment#1, 2, 2, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                |
|                                                                                                                                                                                                                           |         segment.getState(2): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                            |
|                                                                                                                                                                                                                           |           data[5].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |
|                                                                                                                                                                                                                           |         sendersAndCloseStatus.get(): 2 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                      |
|                                                                                                                                                                                                                           |         getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                                 |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1013)                                                                              |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                                  |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                                    |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                              |
|                                                                                                                                                                                                                           |       receiveOnNoWaiterSuspend(ChannelSegment#1, 2, 2, Continuation#4): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                |
|                                                                                                                                                                                                                           |         CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#6): Continuation#9 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                 |
|                                                                                                                                                                                                                           |         updateCellReceive(ChannelSegment#1, 2, 2, Continuation#9): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                         |
|                                                                                                                                                                                                                           |           segment.getState(2): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                          |
|                                                                                                                                                                                                                           |             data[5].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                       |
|                                                                                                                                                                                                                           |           sendersAndCloseStatus.get(): 2 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                    |
|                                                                                                                                                                                                                           |           getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                               |
|                                                                                                                                                                                                                           |           segment.casState(2, null, Continuation#9): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                   |
|                                                                                                                                                                                                                           |             data[5].compareAndSet(null, Continuation#9): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                         |
|                                                                                                                                                                                                                           |           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                                                    |
|                                                                                                                                                                                                                           |             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                      |
|                                                                                                                                                                                                                           |               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                  |
|                                                                                                                                                                                                                           |                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                          |
|                                                                                                                                                                                                                           |           BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1020)                                                                                                |
|                                                                                                                                                                                                                           |         BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                           |
|                                                                                                                                                                                                                           |         prepareReceiverForSuspension(Continuation#9, ChannelSegment#1, 2) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                            |
|                                                                                                                                                                                                                           |           onReceiveEnqueued() at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:716)                                                                                                                     |
|                                                                                                                                                                                                                           |           $this$prepareReceiverForSuspension.invokeOnCancellation(ChannelSegment#1, 2) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                            |
|                                                                                                                                                                                                                           |             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                      |
|                                                                                                                                                                                                                           |             update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                |
|                                                                                                                                                                                                                           |               Continuation#9.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                           |
|                                                                                                                                                                                                                           |               Continuation#9.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                        |
|                                                                                                                                                                                                                           |               Continuation#9.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                   |
|                                                                                                                                                                                                                           |             _decisionAndIndex.compareAndSet(536870911, 2): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |
|                                                                                                                                                                                                                           |             invokeOnCancellationImpl(ChannelSegment#1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                            |
|                                                                                                                                                                                                                           |               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                           |
|                                                                                                                                                                                                                           |               assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                 |
|                                                                                                                                                                                                                           |               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |
|                                                                                                                                                                                                                           |               loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |
|                                                                                                                                                                                                                           |                 Continuation#9._state.compareAndSet(Active#1, ChannelSegment#1): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                         |
|                                                                                                                                                                                                                           |         cancellable.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                                 |
|                                                                                                                                                                                                                           |           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                |
|                                                                                                                                                                                                                           |             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                  |
|                                                                                                                                                                                                                           |             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                       |
|                                                                                                                                                                                                                           |           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                 |
|                                                                                                                                                                                                                           |             _decisionAndIndex.get(): 2 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                        |
|                                                                                                                                                                                                                           |             loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                            |
|                                                                                                                                                                                                                           |               Continuation#9.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                  |
|                                                                                                                                                                                                                           |               Continuation#9.getIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                                     |
|                                                                                                                                                                                                                           |               Continuation#9.decisionAndIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                             |
|                                                                                                                                                                                                                           |               Continuation#9._decisionAndIndex.compareAndSet(2, 536870914): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                            |
|                                                                                                                                                                                                                           |           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                                            |
|                                                                                                                                                                                                                           |             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                                  |
|                                                                                                                                                                                                                           |           installParentHandle(): ChildContinuation#4 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                                                         |
|                                                                                                                                                                                                                           |             getContext(): CombinedContext#2 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                        |
|                                                                                                                                                                                                                           |             context.get(Key#1): JobImpl#2 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                          |
|                                                                                                                                                                                                                           |               cur.element.get(Key#1): JobImpl#2 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                       |
|                                                                                                                                                                                                                           |                 Job.DefaultImpls.get(JobImpl#2, Key#1): JobImpl#2 at JobSupport.get(JobSupport.kt:25)                                                                                                                     |
|                                                                                                                                                                                                                           |                   CoroutineContext.Element.DefaultImpls.get(JobImpl#2, Key#1): JobImpl#2 at Job.DefaultImpls.get(Job.kt:112)                                                                                              |
|                                                                                                                                                                                                                           |                     getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                  |
|                                                                                                                                                                                                                           |             getAsHandler() at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                                                         |
|                                                                                                                                                                                                                           |             Job.DefaultImpls.invokeOnCompletion$default(JobImpl#2, true, false, ChildContinuation#4, 2, null): ChildContinuation#4 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348) |
|                                                                                                                                                                                                                           |               JobImpl#2.invokeOnCompletion(true, true, ChildContinuation#4): ChildContinuation#4 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                               |
|                                                                                                                                                                                                                           |                 makeNode(ChildContinuation#4, true): ChildContinuation#4 at JobSupport.invokeOnCompletion(JobSupport.kt:460)                                                                                              |
|                                                                                                                                                                                                                           |                   node.setJob(JobImpl#2) at JobSupport.makeNode(JobSupport.kt:521)                                                                                                                                        |
|                                                                                                                                                                                                                           |                 loopOnState() at JobSupport.invokeOnCompletion(JobSupport.kt:461)                                                                                                                                         |
|                                                                                                                                                                                                                           |                   getState(): Empty#1 at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                                |
|                                                                                                                                                                                                                           |                     _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                         |
|                                                                                                                                                                                                                           |                     loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                        |
|                                                                                                                                                                                                                           |                   loopOnState$Lambda() at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                               |
|                                                                                                                                                                                                                           |                     state.isActive(): true at JobSupport.invokeOnCompletion(JobSupport.kt:464)                                                                                                                            |
|                                                                                                                                                                                                                           |                     element._state.compareAndSet(Empty#1, ChildContinuation#4): true at JobSupport.invokeOnCompletion(JobSupport.kt:466)                                                                                  |
|                                                                                                                                                                                                                           |             _parentHandle.compareAndSet(null, ChildContinuation#4): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                           |
|                                                                                                                                                                                                                           |         DebugProbesKt.probeCoroutineSuspended(Continuation#4) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                        |
|                                                                                                                                                                                                                           |     switch (reason: coroutine is suspended)                                                                                                                                                                               |
|   ResultKt.throwOnFailure(2) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:152)                                                                                       |                                                                                                                                                                                                                           |
|   intValue(): 2 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:184)                                                                                                    |                                                                                                                                                                                                                           |
|   Boxing.boxInt(3): 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                                              |                                                                                                                                                                                                                           |
|   channel1.send(3) [suspendable: Continuation#1] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:155)                                                                   |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |                                                                                                                                                                                                                           |
|     sendSegment.get(): ChannelSegment#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |                                                                                                                                                                                                                           |
|     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |                                                                                                                                                                                                                           |
|     sendersAndCloseStatus.getAndIncrement(): 2 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|     BufferedChannel.isClosedForSend0(2): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |                                                                                                                                                                                                                           |
|       isClosed(2, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |                                                                                                                                                                                                                           |
|         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |                                                                                                                                                                                                                           |
|     BufferedChannel.updateCellSend(ChannelSegment#1, 2, 3, 2, null, false): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |                                                                                                                                                                                                                           |
|       segment.storeElement(2, 3) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |                                                                                                                                                                                                                           |
|         setElementLazy(2, 3) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |                                                                                                                                                                                                                           |
|           data[4].lazySet(3) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |                                                                                                                                                                                                                           |
|       segment.getState(2): Continuation#9 at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                       |                                                                                                                                                                                                                           |
|         data[5].get(): Continuation#9 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                 |                                                                                                                                                                                                                           |
|       segment.cleanElement(2) at BufferedChannel.updateCellSend(BufferedChannel.kt:456)                                                                                                                                   |                                                                                                                                                                                                                           |
|         setElementLazy(2, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                                   |                                                                                                                                                                                                                           |
|           data[4].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                 |                                                                                                                                                                                                                           |
|       tryResumeReceiver(Continuation#9, 3): true at BufferedChannel.updateCellSend(BufferedChannel.kt:458)                                                                                                                |                                                                                                                                                                                                                           |
|         BufferedChannelKt.tryResume0(Continuation#9, 3, null): true at BufferedChannel.tryResumeReceiver(BufferedChannel.kt:646)                                                                                          |                                                                                                                                                                                                                           |
|           $this$tryResume0.tryResume(3, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                              |                                                                                                                                                                                                                           |
|             tryResumeImpl(3, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                     |                                                                                                                                                                                                                           |
|               _state.get(): ChannelSegment#1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                               |                                                                                                                                                                                                                           |
|               loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                       |                                                                                                                                                                                                                           |
|                 resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                           |                                                                                                                                                                                                                           |
|                 resumedState(ChannelSegment#1, 3, 1, null, null): 3 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                      |                                                                                                                                                                                                                           |
|                   DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                             |                                                                                                                                                                                                                           |
|                 Continuation#9._state.compareAndSet(ChannelSegment#1, 3): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                           |                                                                                                                                                                                                                           |
|                 detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                               |                                                                                                                                                                                                                           |
|                   isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                         |                                                                                                                                                                                                                           |
|                     resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                          |                                                                                                                                                                                                                           |
|                     DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                               |                                                                                                                                                                                                                           |
|                   detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                               |                                                                                                                                                                                                                           |
|                     getParentHandle(): ChildContinuation#4 at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                 |                                                                                                                                                                                                                           |
|                       _parentHandle.get(): ChildContinuation#4 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                         |                                                                                                                                                                                                                           |
|                     handle.dispose() at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:573)                                                                                                       |                                                                                                                                                                                                                           |
|                       getJob(): JobImpl#2 at JobNode.dispose(JobSupport.kt:1351)                                                                                                                                          |                                                                                                                                                                                                                           |
|                         job ➜ JobImpl#2 at JobNode.getJob(JobSupport.kt:1348)                                                                                                                                             |                                                                                                                                                                                                                           |
|                       job.removeNode(ChildContinuation#4) at JobNode.dispose(JobSupport.kt:1351)                                                                                                                          |                                                                                                                                                                                                                           |
|                         loopOnState() at JobSupport.removeNode(JobSupport.kt:594)                                                                                                                                         |                                                                                                                                                                                                                           |
|                           getState(): ChildContinuation#4 at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                    |                                                                                                                                                                                                                           |
|                             _state.get(): ChildContinuation#4 at JobSupport.getState(JobSupport.kt:0)                                                                                                                     |                                                                                                                                                                                                                           |
|                             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                |                                                                                                                                                                                                                           |
|                           loopOnState$Lambda() at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                               |                                                                                                                                                                                                                           |
|                             JobSupportKt.access$getEMPTY_ACTIVE$p(): Empty#1 at JobSupport.removeNode(JobSupport.kt:599)                                                                                                  |                                                                                                                                                                                                                           |
|                             job._state.compareAndSet(ChildContinuation#4, Empty#1): true at JobSupport.removeNode(JobSupport.kt:599)                                                                                      |                                                                                                                                                                                                                           |
|                     _parentHandle.set(NonDisposableHandle#1) at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:574)                                                                               |                                                                                                                                                                                                                           |
|           $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                        |                                                                                                                                                                                                                           |
|             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                       |                                                                                                                                                                                                                           |
|             resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                              |                                                                                                                                                                                                                           |
|             dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                           |                                                                                                                                                                                                                           |
|               tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                        |                                                                                                                                                                                                                           |
|                 _decisionAndIndex.get(): 536870914 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                             |                                                                                                                                                                                                                           |
|                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                         |                                                                                                                                                                                                                           |
|                   Continuation#9.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                               |                                                                                                                                                                                                                           |
|               DispatchedTaskKt.dispatch(Continuation#9, 1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:474)                                                                              |                                                                                                                                                                                                                           |
|                 DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.dispatch(DispatchedTask.kt:153)                                                                                                                 |                                                                                                                                                                                                                           |
|                 $this$dispatch.getDelegate(): Continuation#6 at DispatchedTaskKt.dispatch(DispatchedTask.kt:154)                                                                                                          |                                                                                                                                                                                                                           |
|                 DispatchedTaskKt.resume(Continuation#9, Continuation#6, false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:168)                                                                                        |                                                                                                                                                                                                                           |
|                   $this$resume.takeState(): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:174)                                                                                                                           |                                                                                                                                                                                                                           |
|                     getState(): 3 at CancellableContinuationImpl.takeState(CancellableContinuationImpl.kt:168)                                                                                                            |                                                                                                                                                                                                                           |
|                       _state.get(): 3 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                         |                                                                                                                                                                                                                           |
|                   $this$resume.getExceptionalResult(3): null at DispatchedTaskKt.resume(DispatchedTask.kt:175)                                                                                                            |                                                                                                                                                                                                                           |
|                     getExceptionalResult(3): null at CancellableContinuationImpl.getExceptionalResult(CancellableContinuationImpl.kt:613)                                                                                 |                                                                                                                                                                                                                           |
|                   $this$resume.getSuccessfulResult(3): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                |                                                                                                                                                                                                                           |
|                   Result.constructor-impl(3): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                         |                                                                                                                                                                                                                           |
|                   delegate.resumeWith(3) at DispatchedTaskKt.resume(DispatchedTask.kt:179)                                                                                                                                |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                      |                                                                                                                                                                                                                           |
|       segment.setState(2, <DONE_RCV>) at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                                           |                                                                                                                                                                                                                           |
|         data[5].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                       |                                                                                                                                                                                                                           |
|       onReceiveDequeued() at BufferedChannel.updateCellSend(BufferedChannel.kt:461)                                                                                                                                       |                                                                                                                                                                                                                           |
|     segment.cleanPrev() at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                                     |                                                                                                                                                                                                                           |
|       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |                                                                                                                                                                                                                           |
|   counter ➜ 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   counter = 4 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:156)                                                                                                      |                                                                                                                                                                                                                           |
|   channel2.receive() [suspendable: Continuation#1]: COROUTINE_SUSPENDED at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:157)                                            |                                                                                                                                                                                                                           |
|     receive$suspendImpl(BufferedChannel#2, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive(BufferedChannel.kt:0)                                                                                          |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceiveSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:667)                                                                   |                                                                                                                                                                                                                           |
|       receiveSegment.get(): ChannelSegment#2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3519)                                                                                                              |                                                                                                                                                                                                                           |
|       isClosedForReceive(): false at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3523)                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 2 at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                     |                                                                                                                                                                                                                           |
|         isClosedForReceive0(2): false at BufferedChannel.isClosedForReceive(BufferedChannel.kt:2188)                                                                                                                      |                                                                                                                                                                                                                           |
|           isClosed(2, true): false at BufferedChannel.isClosedForReceive0(BufferedChannel.kt:2191)                                                                                                                        |                                                                                                                                                                                                                           |
|             getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannel.access$getReceivers$FU$p(): CASUpdater#3 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:681)                                                                                             |                                                                                                                                                                                                                           |
|       receivers.getAndIncrement(): 2 at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3526)                                                                                                                      |                                                                                                                                                                                                                           |
|       BufferedChannel.updateCellReceive(ChannelSegment#2, 2, 2, null): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3541)                                                                |                                                                                                                                                                                                                           |
|         segment.getState(2): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                            |                                                                                                                                                                                                                           |
|           data[5].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                         |                                                                                                                                                                                                                           |
|         sendersAndCloseStatus.get(): 2 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                      |                                                                                                                                                                                                                           |
|         getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                                 |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1013)                                                                              |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3543)                                                                                                  |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getFAILED$p(): <FAILED> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3549)                                                                                                    |                                                                                                                                                                                                                           |
|       BufferedChannelKt.access$getSUSPEND_NO_WAITER$p(): <SUSPEND_NO_WAITER> at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:3559)                                                                              |                                                                                                                                                                                                                           |
|       receiveOnNoWaiterSuspend(ChannelSegment#2, 2, 2, Continuation#1): COROUTINE_SUSPENDED at BufferedChannel.receive$suspendImpl(BufferedChannel.kt:685)                                                                |                                                                                                                                                                                                                           |
|         CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#2): Continuation#10 at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3572)                                                |                                                                                                                                                                                                                           |
|         updateCellReceive(ChannelSegment#2, 2, 2, Continuation#10): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3575)                                                                        |                                                                                                                                                                                                                           |
|           segment.getState(2): null at BufferedChannel.updateCellReceive(BufferedChannel.kt:999)                                                                                                                          |                                                                                                                                                                                                                           |
|             data[5].get(): null at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                       |                                                                                                                                                                                                                           |
|           sendersAndCloseStatus.get(): 2 at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                    |                                                                                                                                                                                                                           |
|           getSendersCounter() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1007)                                                                                                                               |                                                                                                                                                                                                                           |
|           segment.casState(2, null, Continuation#10): true at BufferedChannel.updateCellReceive(BufferedChannel.kt:1016)                                                                                                  |                                                                                                                                                                                                                           |
|             data[5].compareAndSet(null, Continuation#10): true at ChannelSegment.casState(BufferedChannel.kt:2779)                                                                                                        |                                                                                                                                                                                                                           |
|           expandBuffer() at BufferedChannel.updateCellReceive(BufferedChannel.kt:1019)                                                                                                                                    |                                                                                                                                                                                                                           |
|             isRendezvousOrUnlimited(): true at BufferedChannel.expandBuffer(BufferedChannel.kt:1173)                                                                                                                      |                                                                                                                                                                                                                           |
|               getBufferEndCounter(): 0 at BufferedChannel.isRendezvousOrUnlimited(BufferedChannel.kt:90)                                                                                                                  |                                                                                                                                                                                                                           |
|                 bufferEnd.get(): 0 at BufferedChannel.getBufferEndCounter(BufferedChannel.kt:72)                                                                                                                          |                                                                                                                                                                                                                           |
|           BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.updateCellReceive(BufferedChannel.kt:1020)                                                                                                |                                                                                                                                                                                                                           |
|         BufferedChannelKt.access$getSUSPEND$p(): <SUSPEND> at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3577)                                                                                           |                                                                                                                                                                                                                           |
|         prepareReceiverForSuspension(Continuation#10, ChannelSegment#2, 2) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3578)                                                                           |                                                                                                                                                                                                                           |
|           onReceiveEnqueued() at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:716)                                                                                                                     |                                                                                                                                                                                                                           |
|           $this$prepareReceiverForSuspension.invokeOnCancellation(ChannelSegment#2, 2) at BufferedChannel.prepareReceiverForSuspension(BufferedChannel.kt:717)                                                            |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                      |                                                                                                                                                                                                                           |
|             update$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                                                |                                                                                                                                                                                                                           |
|               Continuation#10.getIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:389)                                                                                          |                                                                                                                                                                                                                           |
|               Continuation#10.getDecision() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                       |                                                                                                                                                                                                                           |
|               Continuation#10.decisionAndIndex() at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                                  |                                                                                                                                                                                                                           |
|             _decisionAndIndex.compareAndSet(536870911, 2): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:392)                                                                   |                                                                                                                                                                                                                           |
|             invokeOnCancellationImpl(ChannelSegment#2) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:394)                                                                            |                                                                                                                                                                                                                           |
|               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                           |                                                                                                                                                                                                                           |
|               assert$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:663)                                                                                                 |                                                                                                                                                                                                                           |
|               _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|               loop$atomicfu$Lambda() at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                                                                          |                                                                                                                                                                                                                           |
|                 Continuation#10._state.compareAndSet(Active#1, ChannelSegment#2): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)                                        |                                                                                                                                                                                                                           |
|         cancellable.getResult(): COROUTINE_SUSPENDED at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3648)                                                                                                 |                                                                                                                                                                                                                           |
|           isReusable(): false at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:297)                                                                                                                |                                                                                                                                                                                                                           |
|             resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                                  |                                                                                                                                                                                                                           |
|             DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                       |                                                                                                                                                                                                                           |
|           trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                                                                                 |                                                                                                                                                                                                                           |
|             _decisionAndIndex.get(): 2 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                        |                                                                                                                                                                                                                           |
|             loop$atomicfu$Lambda() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                            |                                                                                                                                                                                                                           |
|               Continuation#10.getDecision() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:277)                                                                                                 |                                                                                                                                                                                                                           |
|               Continuation#10.getIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                                    |                                                                                                                                                                                                                           |
|               Continuation#10.decisionAndIndex() at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                                                            |                                                                                                                                                                                                                           |
|               Continuation#10._decisionAndIndex.compareAndSet(2, 536870914): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)                                                           |                                                                                                                                                                                                                           |
|           getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                                                                                            |                                                                                                                                                                                                                           |
|             _parentHandle.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                                                  |                                                                                                                                                                                                                           |
|           installParentHandle(): ChildContinuation#5 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:311)                                                                                         |                                                                                                                                                                                                                           |
|             getContext(): CombinedContext#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                        |                                                                                                                                                                                                                           |
|             context.get(Key#1): JobImpl#1 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:346)                                                                                          |                                                                                                                                                                                                                           |
|               cur.element.get(Key#1): JobImpl#1 at CombinedContext.get(CoroutineContextImpl.kt:122)                                                                                                                       |                                                                                                                                                                                                                           |
|                 Job.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at JobSupport.get(JobSupport.kt:25)                                                                                                                     |                                                                                                                                                                                                                           |
|                   CoroutineContext.Element.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job.DefaultImpls.get(Job.kt:112)                                                                                              |                                                                                                                                                                                                                           |
|                     getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                  |                                                                                                                                                                                                                           |
|             getAsHandler() at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:350)                                                                                                         |                                                                                                                                                                                                                           |
|             Job.DefaultImpls.invokeOnCompletion$default(JobImpl#1, true, false, ChildContinuation#5, 2, null): ChildContinuation#5 at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:348) |                                                                                                                                                                                                                           |
|               JobImpl#1.invokeOnCompletion(true, true, ChildContinuation#5): ChildContinuation#5 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                               |                                                                                                                                                                                                                           |
|                 makeNode(ChildContinuation#5, true): ChildContinuation#5 at JobSupport.invokeOnCompletion(JobSupport.kt:460)                                                                                              |                                                                                                                                                                                                                           |
|                   node.setJob(JobImpl#1) at JobSupport.makeNode(JobSupport.kt:521)                                                                                                                                        |                                                                                                                                                                                                                           |
|                 loopOnState() at JobSupport.invokeOnCompletion(JobSupport.kt:461)                                                                                                                                         |                                                                                                                                                                                                                           |
|                   getState(): Empty#1 at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                                |                                                                                                                                                                                                                           |
|                     _state.get(): Empty#1 at JobSupport.getState(JobSupport.kt:0)                                                                                                                                         |                                                                                                                                                                                                                           |
|                     loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                        |                                                                                                                                                                                                                           |
|                   loopOnState$Lambda() at JobSupport.invokeOnCompletion(JobSupport.kt:1522)                                                                                                                               |                                                                                                                                                                                                                           |
|                     state.isActive(): true at JobSupport.invokeOnCompletion(JobSupport.kt:464)                                                                                                                            |                                                                                                                                                                                                                           |
|                     element._state.compareAndSet(Empty#1, ChildContinuation#5): true at JobSupport.invokeOnCompletion(JobSupport.kt:466)                                                                                  |                                                                                                                                                                                                                           |
|             _parentHandle.compareAndSet(null, ChildContinuation#5): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352)                                                           |                                                                                                                                                                                                                           |
|         DebugProbesKt.probeCoroutineSuspended(Continuation#1) at BufferedChannel.receiveOnNoWaiterSuspend(BufferedChannel.kt:3571)                                                                                        |                                                                                                                                                                                                                           |
|     switch (reason: coroutine is suspended)                                                                                                                                                                               |                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                           |   ResultKt.throwOnFailure(3) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:162)                                                                                       |
|                                                                                                                                                                                                                           |   intValue(): 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:186)                                                                                                    |
|                                                                                                                                                                                                                           |   counter ➜ 4 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   counter = 5 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:166)                                                                                                      |
|                                                                                                                                                                                                                           |   Boxing.boxInt(3): 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                                              |
|                                                                                                                                                                                                                           |   channel2.send(3) [suspendable: Continuation#4] at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:167)                                                                   |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendSegment$FU$p(): AtomicReferenceFieldUpdaterImpl#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                         |
|                                                                                                                                                                                                                           |     sendSegment.get(): ChannelSegment#2 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                     |
|                                                                                                                                                                                                                           |     BufferedChannel.access$getSendersAndCloseStatus$FU$p(): CASUpdater#1 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                    |
|                                                                                                                                                                                                                           |     sendersAndCloseStatus.getAndIncrement(): 2 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |     BufferedChannel.isClosedForSend0(2): false at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                              |
|                                                                                                                                                                                                                           |       isClosed(2, false): false at BufferedChannel.isClosedForSend0(BufferedChannel.kt:2184)                                                                                                                              |
|                                                                                                                                                                                                                           |         getSendersCloseStatus() at BufferedChannel.isClosed(BufferedChannel.kt:2196)                                                                                                                                      |
|                                                                                                                                                                                                                           |     BufferedChannel.updateCellSend(ChannelSegment#2, 2, 3, 2, null, false): 0 at BufferedChannel.send(BufferedChannel.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |       segment.storeElement(2, 3) at BufferedChannel.updateCellSend(BufferedChannel.kt:422)                                                                                                                                |
|                                                                                                                                                                                                                           |         setElementLazy(2, 3) at ChannelSegment.storeElement(BufferedChannel.kt:2753)                                                                                                                                      |
|                                                                                                                                                                                                                           |           data[4].lazySet(3) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                    |
|                                                                                                                                                                                                                           |       segment.getState(2): Continuation#10 at BufferedChannel.updateCellSend(BufferedChannel.kt:425)                                                                                                                      |
|                                                                                                                                                                                                                           |         data[5].get(): Continuation#10 at ChannelSegment.getState(BufferedChannel.kt:2773)                                                                                                                                |
|                                                                                                                                                                                                                           |       segment.cleanElement(2) at BufferedChannel.updateCellSend(BufferedChannel.kt:456)                                                                                                                                   |
|                                                                                                                                                                                                                           |         setElementLazy(2, null) at ChannelSegment.cleanElement(BufferedChannel.kt:2762)                                                                                                                                   |
|                                                                                                                                                                                                                           |           data[4].lazySet(null) at ChannelSegment.setElementLazy(BufferedChannel.kt:2766)                                                                                                                                 |
|                                                                                                                                                                                                                           |       tryResumeReceiver(Continuation#10, 3): true at BufferedChannel.updateCellSend(BufferedChannel.kt:458)                                                                                                               |
|                                                                                                                                                                                                                           |         BufferedChannelKt.tryResume0(Continuation#10, 3, null): true at BufferedChannel.tryResumeReceiver(BufferedChannel.kt:646)                                                                                         |
|                                                                                                                                                                                                                           |           $this$tryResume0.tryResume(3, null, null): <RESUME_TOKEN> at BufferedChannelKt.tryResume0(BufferedChannel.kt:2894)                                                                                              |
|                                                                                                                                                                                                                           |             tryResumeImpl(3, null, null): <RESUME_TOKEN> at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:582)                                                                                     |
|                                                                                                                                                                                                                           |               _state.get(): ChannelSegment#2 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                               |
|                                                                                                                                                                                                                           |               loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                                                                       |
|                                                                                                                                                                                                                           |                 resumeMode ➜ 1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                                                           |
|                                                                                                                                                                                                                           |                 resumedState(ChannelSegment#2, 3, 1, null, null): 3 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:540)                                                                      |
|                                                                                                                                                                                                                           |                   DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.resumedState(CancellableContinuationImpl.kt:489)                                                                             |
|                                                                                                                                                                                                                           |                 Continuation#10._state.compareAndSet(ChannelSegment#2, 3): true at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:541)                                                          |
|                                                                                                                                                                                                                           |                 detachChildIfNonResuable() at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:542)                                                                                               |
|                                                                                                                                                                                                                           |                   isReusable(): false at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                         |
|                                                                                                                                                                                                                           |                     resumeMode ➜ 1 at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                                                          |
|                                                                                                                                                                                                                           |                     DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.isReusable(CancellableContinuationImpl.kt:141)                                                                               |
|                                                                                                                                                                                                                           |                   detachChild() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:565)                                                                                               |
|                                                                                                                                                                                                                           |                     getParentHandle(): ChildContinuation#5 at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:572)                                                                                 |
|                                                                                                                                                                                                                           |                       _parentHandle.get(): ChildContinuation#5 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                                                                         |
|                                                                                                                                                                                                                           |                     handle.dispose() at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:573)                                                                                                       |
|                                                                                                                                                                                                                           |                       getJob(): JobImpl#1 at JobNode.dispose(JobSupport.kt:1351)                                                                                                                                          |
|                                                                                                                                                                                                                           |                         job ➜ JobImpl#1 at JobNode.getJob(JobSupport.kt:1348)                                                                                                                                             |
|                                                                                                                                                                                                                           |                       job.removeNode(ChildContinuation#5) at JobNode.dispose(JobSupport.kt:1351)                                                                                                                          |
|                                                                                                                                                                                                                           |                         loopOnState() at JobSupport.removeNode(JobSupport.kt:594)                                                                                                                                         |
|                                                                                                                                                                                                                           |                           getState(): ChildContinuation#5 at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                    |
|                                                                                                                                                                                                                           |                             _state.get(): ChildContinuation#5 at JobSupport.getState(JobSupport.kt:0)                                                                                                                     |
|                                                                                                                                                                                                                           |                             loop$atomicfu$Lambda() at JobSupport.getState(JobSupport.kt:0)                                                                                                                                |
|                                                                                                                                                                                                                           |                           loopOnState$Lambda() at JobSupport.removeNode(JobSupport.kt:1556)                                                                                                                               |
|                                                                                                                                                                                                                           |                             JobSupportKt.access$getEMPTY_ACTIVE$p(): Empty#1 at JobSupport.removeNode(JobSupport.kt:599)                                                                                                  |
|                                                                                                                                                                                                                           |                             job._state.compareAndSet(ChildContinuation#5, Empty#1): true at JobSupport.removeNode(JobSupport.kt:599)                                                                                      |
|                                                                                                                                                                                                                           |                     _parentHandle.set(NonDisposableHandle#1) at CancellableContinuationImpl.detachChild(CancellableContinuationImpl.kt:574)                                                                               |
|                                                                                                                                                                                                                           |           $this$tryResume0.completeResume(<RESUME_TOKEN>) at BufferedChannelKt.tryResume0(BufferedChannel.kt:2896)                                                                                                        |
|                                                                                                                                                                                                                           |             DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:589)                                                                                       |
|                                                                                                                                                                                                                           |             resumeMode ➜ 1 at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                              |
|                                                                                                                                                                                                                           |             dispatchResume(1) at CancellableContinuationImpl.completeResume(CancellableContinuationImpl.kt:590)                                                                                                           |
|                                                                                                                                                                                                                           |               tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:472)                                                                                                        |
|                                                                                                                                                                                                                           |                 _decisionAndIndex.get(): 536870914 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                             |
|                                                                                                                                                                                                                           |                 loop$atomicfu$Lambda() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                                                                         |
|                                                                                                                                                                                                                           |                   Continuation#10.getDecision() at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:287)                                                                                              |
|                                                                                                                                                                                                                           |               DispatchedTaskKt.dispatch(Continuation#10, 1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:474)                                                                             |
|                                                                                                                                                                                                                           |                 DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.dispatch(DispatchedTask.kt:153)                                                                                                                 |
|                                                                                                                                                                                                                           |                 $this$dispatch.getDelegate(): Continuation#2 at DispatchedTaskKt.dispatch(DispatchedTask.kt:154)                                                                                                          |
|                                                                                                                                                                                                                           |                 DispatchedTaskKt.resume(Continuation#10, Continuation#2, false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:168)                                                                                       |
|                                                                                                                                                                                                                           |                   $this$resume.takeState(): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:174)                                                                                                                           |
|                                                                                                                                                                                                                           |                     getState(): 3 at CancellableContinuationImpl.takeState(CancellableContinuationImpl.kt:168)                                                                                                            |
|                                                                                                                                                                                                                           |                       _state.get(): 3 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                                                                         |
|                                                                                                                                                                                                                           |                   $this$resume.getExceptionalResult(3): null at DispatchedTaskKt.resume(DispatchedTask.kt:175)                                                                                                            |
|                                                                                                                                                                                                                           |                     getExceptionalResult(3): null at CancellableContinuationImpl.getExceptionalResult(CancellableContinuationImpl.kt:613)                                                                                 |
|                                                                                                                                                                                                                           |                   $this$resume.getSuccessfulResult(3): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                |
|                                                                                                                                                                                                                           |                   Result.constructor-impl(3): 3 at DispatchedTaskKt.resume(DispatchedTask.kt:176)                                                                                                                         |
|                                                                                                                                                                                                                           |                   delegate.resumeWith(3) at DispatchedTaskKt.resume(DispatchedTask.kt:179)                                                                                                                                |
|                                                                                                                                                                                                                           |       BufferedChannelKt.access$getDONE_RCV$p(): <DONE_RCV> at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                      |
|                                                                                                                                                                                                                           |       segment.setState(2, <DONE_RCV>) at BufferedChannel.updateCellSend(BufferedChannel.kt:460)                                                                                                                           |
|                                                                                                                                                                                                                           |         data[5].set(<DONE_RCV>) at ChannelSegment.setState(BufferedChannel.kt:2776)                                                                                                                                       |
|                                                                                                                                                                                                                           |       onReceiveDequeued() at BufferedChannel.updateCellSend(BufferedChannel.kt:461)                                                                                                                                       |
|                                                                                                                                                                                                                           |     segment.cleanPrev() at BufferedChannel.send(BufferedChannel.kt:0)                                                                                                                                                     |
|                                                                                                                                                                                                                           |       _prev.lazySet(null) at ConcurrentLinkedListNode.cleanPrev(ConcurrentLinkedList.kt:132)                                                                                                                              |
|                                                                                                                                                                                                                           |   counter ➜ 5 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation2(MultipleSuspensionsTests.kt:169)                                                                                                      |
|                                                                                                                                                                                                                           |   result: IllegalStateException #2                                                                                                                                                                                        |
|   ResultKt.throwOnFailure(3) at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:152)                                                                                       |                                                                                                                                                                                                                           |
|   intValue(): 3 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:184)                                                                                                    |                                                                                                                                                                                                                           |
|   counter ➜ 5 at MultipleSuspensionPointsChannelsTraceRepresentationTest.operation1(MultipleSuspensionsTests.kt:159)                                                                                                      |                                                                                                                                                                                                                           |
|   result: IllegalStateException #1                                                                                                                                                                                        |                                                                                                                                                                                                                           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
