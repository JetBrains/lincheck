= Invalid execution results =
| ----------------------------------------------------------------------- |
|                   Thread 1                   |         Thread 2         |
| ----------------------------------------------------------------------- |
| operation1(): void                           |                          |
| operation1(): void                           |                          |
| operation1(): void                           |                          |
| operation2(): void                           |                          |
| operation2(): void                           |                          |
| ----------------------------------------------------------------------- |
| operation2(): IllegalStateException #1 [0,1] | operation1(): void       |
| operation2(): IllegalStateException #2 [1,1] | operation1(): void [0,1] |
| ----------------------------------------------------------------------- |
| operation1(): void                           |                          |
| operation2(): void                           |                          |
| operation2(): void                           |                          |
| operation1(): void                           |                          |
| operation1(): void                           |                          |
| ----------------------------------------------------------------------- |

---
All operations above the horizontal line | ----- | happen before those below the line
---
Values in "[..]" brackets indicate the number of completed operations
in each of the parallel threads seen at the beginning of the current operation
---
The number next to an exception name helps you find its stack trace provided after the interleaving section
---

The following interleaving leads to the error:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                Thread 1                |                                                            Thread 2                                                            |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| operation1()                           |                                                                                                                                |
| operation1()                           |                                                                                                                                |
| operation1()                           |                                                                                                                                |
| operation2()                           |                                                                                                                                |
| operation2()                           |                                                                                                                                |
|                                        | operation1()                                                                                                                   |
|                                        | operation1()                                                                                                                   |
|                                        |   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |
|                                        |   switch                                                                                                                       |
| operation2(): IllegalStateException #1 |                                                                                                                                |
| operation2(): IllegalStateException #2 |                                                                                                                                |
|                                        |   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |
|                                        |   result: void                                                                                                                 |
| operation1()                           |                                                                                                                                |
| operation2()                           |                                                                                                                                |
| operation2()                           |                                                                                                                                |
| operation1()                           |                                                                                                                                |
| operation1()                           |                                                                                                                                |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Exception stack traces:
#1: java.lang.IllegalStateException
	at org.jetbrains.kotlinx.lincheck_test.representation.ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)

#2: java.lang.IllegalStateException
	at org.jetbrains.kotlinx.lincheck_test.representation.ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                            Thread 1                                                            |                                                            Thread 2                                                            |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation2()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.READ: false at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)  |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation2()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.READ: false at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)  |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
|                                                                                                                                | operation1()                                                                                                                   |
|                                                                                                                                |   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |
|                                                                                                                                |   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |
|                                                                                                                                |   result: void                                                                                                                 |
|                                                                                                                                | operation1()                                                                                                                   |
|                                                                                                                                |   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |
|                                                                                                                                |   switch                                                                                                                       |
| operation2(): IllegalStateException #1                                                                                         |                                                                                                                                |
|   canEnterForbiddenSection.READ: true at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)   |                                                                                                                                |
|   result: IllegalStateException #1                                                                                             |                                                                                                                                |
| operation2(): IllegalStateException #2                                                                                         |                                                                                                                                |
|   canEnterForbiddenSection.READ: true at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)   |                                                                                                                                |
|   result: IllegalStateException #2                                                                                             |                                                                                                                                |
|                                                                                                                                |   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |
|                                                                                                                                |   result: void                                                                                                                 |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation2()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.READ: false at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)  |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation2()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.READ: false at ClocksWithExceptionsInOutputTest.operation2(ClocksWithExceptionsInOutputTest.kt:34)  |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| operation1()                                                                                                                   |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(true) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:29)  |                                                                                                                                |
|   canEnterForbiddenSection.WRITE(false) at ClocksWithExceptionsInOutputTest.operation1(ClocksWithExceptionsInOutputTest.kt:30) |                                                                                                                                |
|   result: void                                                                                                                 |                                                                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |


= To reproduce exactly this test execution with the same scenarios, you can add this setting in your testing options configuration =
.withReproduceSettings("eyJyYW5kb21TZWVkR2VuZXJhdG9yU2VlZCI6MjUyNTQyNjk2NzcxNzY1NDQ0N30=")

= You can add this scenario as a custom test. Insert this code in your testing options configuration =
.addCustomScenario {
	initial {
		actor(::operation1)
		actor(::operation1)
		actor(::operation1)
		actor(::operation2)
		actor(::operation2)
	}
	parallel {
		thread {
			actor(::operation2)
			actor(::operation2)
		}
		thread {
			actor(::operation1)
			actor(::operation1)
		}
	}
	post {
		actor(::operation1)
		actor(::operation2)
		actor(::operation2)
		actor(::operation1)
		actor(::operation1)
	}
}
