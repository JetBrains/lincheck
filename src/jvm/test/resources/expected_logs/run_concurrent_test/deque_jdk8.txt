= Concurrent test failed =

java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:324)
	at org.jetbrains.kotlinx.lincheck_test.representation.IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:308)
	at org.jetbrains.kotlinx.lincheck_test.representation.BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:48)
	at java.lang.Thread.run(Thread.java:750)

The following interleaving leads to the error:
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                           Thread 1                                                                                                            |                                                                     Thread 2                                                                     |                                                                    Thread 3                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest#1.block(): threw IllegalStateException at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:48) |                                                                                                                                                  |                                                                                                                                                 |
|   block(): threw IllegalStateException at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:308)                                                                        |                                                                                                                                                  |                                                                                                                                                 |
|     deque.addLast(1) at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:313)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#2.start() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:322)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#3.start() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:322)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|     switch (reason: waiting for Thread 2 to finish)                                                                                                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|                                                                                                                                                                                                                               | run()                                                                                                                                            |                                                                                                                                                 |
|                                                                                                                                                                                                                               |   switch                                                                                                                                         |                                                                                                                                                 |
|                                                                                                                                                                                                                               |                                                                                                                                                  | run()                                                                                                                                           |
|                                                                                                                                                                                                                               |                                                                                                                                                  |   $deque.addFirst(0) at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:318)   |
|                                                                                                                                                                                                                               |                                                                                                                                                  |   $deque.peekLast(): 1 at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:319) |
|                                                                                                                                                                                                                               |   $deque.pollFirst(): 1 at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$0(RunConcurrentRepresentationTests.kt:315) |                                                                                                                                                 |
|     Thread#2.join() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:323)                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#3.join() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:323)                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|   result: IllegalStateException #1                                                                                                                                                                                            |                                                                                                                                                  |                                                                                                                                                 |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Detailed trace:
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                           Thread 1                                                                                                            |                                                                     Thread 2                                                                     |                                                                    Thread 3                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest#1.block(): threw IllegalStateException at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:48) |                                                                                                                                                  |                                                                                                                                                 |
|   block(): threw IllegalStateException at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:308)                                                                        |                                                                                                                                                  |                                                                                                                                                 |
|     deque.addLast(1) at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:313)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|       linkLast(1) at ConcurrentLinkedDeque.addLast(ConcurrentLinkedDeque.java:903)                                                                                                                                            |                                                                                                                                                  |                                                                                                                                                 |
|         Node#2.casNext(null, Node#1): true at ConcurrentLinkedDeque.linkLast(ConcurrentLinkedDeque.java:402)                                                                                                                  |                                                                                                                                                  |                                                                                                                                                 |
|           next.compareAndSwapObject(null, Node#1): true at ConcurrentLinkedDeque$Node.casNext(ConcurrentLinkedDeque.java:315)                                                                                                 |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#2.start() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:322)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#3.start() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:322)                                                                                          |                                                                                                                                                  |                                                                                                                                                 |
|     switch (reason: waiting for Thread 2 to finish)                                                                                                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|                                                                                                                                                                                                                               | run()                                                                                                                                            |                                                                                                                                                 |
|                                                                                                                                                                                                                               |   switch                                                                                                                                         |                                                                                                                                                 |
|                                                                                                                                                                                                                               |                                                                                                                                                  | run()                                                                                                                                           |
|                                                                                                                                                                                                                               |                                                                                                                                                  |   $deque.addFirst(0) at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:318)   |
|                                                                                                                                                                                                                               |                                                                                                                                                  |     linkFirst(0) at ConcurrentLinkedDeque.addFirst(ConcurrentLinkedDeque.java:890)                                                              |
|                                                                                                                                                                                                                               |                                                                                                                                                  |       Node#2.casPrev(null, Node#3): true at ConcurrentLinkedDeque.linkFirst(ConcurrentLinkedDeque.java:369)                                     |
|                                                                                                                                                                                                                               |                                                                                                                                                  |         prev.compareAndSwapObject(null, Node#3): true at ConcurrentLinkedDeque$Node.casPrev(ConcurrentLinkedDeque.java:323)                     |
|                                                                                                                                                                                                                               |                                                                                                                                                  |   $deque.peekLast(): 1 at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:319) |
|                                                                                                                                                                                                                               |                                                                                                                                                  |     last(): Node#1 at ConcurrentLinkedDeque.peekLast(ConcurrentLinkedDeque.java:942)                                                            |
|                                                                                                                                                                                                                               |                                                                                                                                                  |       casTail(Node#2, Node#1): true at ConcurrentLinkedDeque.last(ConcurrentLinkedDeque.java:782)                                               |
|                                                                                                                                                                                                                               |                                                                                                                                                  |         tail.compareAndSwapObject(Node#2, Node#1): true at ConcurrentLinkedDeque.casTail(ConcurrentLinkedDeque.java:1562)                       |
|                                                                                                                                                                                                                               |   $deque.pollFirst(): 1 at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block$lambda$0(RunConcurrentRepresentationTests.kt:315) |                                                                                                                                                 |
|                                                                                                                                                                                                                               |     Node#1.casItem(1, null): true at ConcurrentLinkedDeque.pollFirst(ConcurrentLinkedDeque.java:967)                                             |                                                                                                                                                 |
|                                                                                                                                                                                                                               |       item.compareAndSwapObject(1, null): true at ConcurrentLinkedDeque$Node.casItem(ConcurrentLinkedDeque.java:307)                             |                                                                                                                                                 |
|                                                                                                                                                                                                                               |     unlink(Node#1) at ConcurrentLinkedDeque.pollFirst(ConcurrentLinkedDeque.java:968)                                                            |                                                                                                                                                 |
|                                                                                                                                                                                                                               |       unlinkLast(Node#1, Node#2) at ConcurrentLinkedDeque.unlink(ConcurrentLinkedDeque.java:431)                                                 |                                                                                                                                                 |
|                                                                                                                                                                                                                               |         Node#1.casPrev(Node#2, Node#3): true at ConcurrentLinkedDeque.unlinkLast(ConcurrentLinkedDeque.java:571)                                 |                                                                                                                                                 |
|                                                                                                                                                                                                                               |           prev.compareAndSwapObject(Node#2, Node#3): true at ConcurrentLinkedDeque$Node.casPrev(ConcurrentLinkedDeque.java:323)                  |                                                                                                                                                 |
|                                                                                                                                                                                                                               |         skipDeletedSuccessors(Node#3) at ConcurrentLinkedDeque.unlinkLast(ConcurrentLinkedDeque.java:572)                                        |                                                                                                                                                 |
|                                                                                                                                                                                                                               |           Node#3.casNext(Node#2, Node#1): true at ConcurrentLinkedDeque.skipDeletedSuccessors(ConcurrentLinkedDeque.java:712)                    |                                                                                                                                                 |
|                                                                                                                                                                                                                               |             next.compareAndSwapObject(Node#2, Node#1): true at ConcurrentLinkedDeque$Node.casNext(ConcurrentLinkedDeque.java:315)                |                                                                                                                                                 |
|                                                                                                                                                                                                                               |         updateHead() at ConcurrentLinkedDeque.unlinkLast(ConcurrentLinkedDeque.java:577)                                                         |                                                                                                                                                 |
|                                                                                                                                                                                                                               |           casHead(Node#2, Node#3): true at ConcurrentLinkedDeque.updateHead(ConcurrentLinkedDeque.java:613)                                      |                                                                                                                                                 |
|                                                                                                                                                                                                                               |             head.compareAndSwapObject(Node#2, Node#3): true at ConcurrentLinkedDeque.casHead(ConcurrentLinkedDeque.java:1558)                    |                                                                                                                                                 |
|     Thread#2.join() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:323)                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|     Thread#3.join() at IncorrectConcurrentLinkedDequeRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:323)                                                                                           |                                                                                                                                                  |                                                                                                                                                 |
|   result: IllegalStateException #1                                                                                                                                                                                            |                                                                                                                                                  |                                                                                                                                                 |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
