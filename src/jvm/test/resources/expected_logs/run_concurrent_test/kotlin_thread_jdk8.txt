= Invalid execution results =
| -------------------------------------- |
|                Thread 1                |
| -------------------------------------- |
| run(() -> R): IllegalStateException #1 |
| -------------------------------------- |

---
The number next to an exception name helps you find its stack trace provided after the interleaving section
---

The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                                   Thread 1                                                                                                    | Thread 2 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| run(() -> R): IllegalStateException #1                                                                                                                                                                        |          |
|   KotlinThreadRunConcurrentRepresentationTest#1.block(): threw IllegalStateException at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:35) |          |
|     block(): threw IllegalStateException at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:214)                                                                        |          |
|       ThreadsKt.thread$default(false,false,null,null,0,block$t$1#1,31,null): Thread#2 at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:224)                           |          |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                                                         |          |
|                                                                                                                                                                                                               | run()    |
|       Thread#2.join() at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:227)                                                                                           |          |
|   result: IllegalStateException #1                                                                                                                                                                            |          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

Exception stack traces:
#1: java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:228)
	at org.jetbrains.kotlinx.lincheck_test.representation.KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:214)
	at org.jetbrains.kotlinx.lincheck_test.representation.BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:35)
	at java.lang.Thread.run(Thread.java:750)

Detailed trace:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                   Thread 1                                                                                                    |                                                                                 Thread 2                                                                                  |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| run(() -> R): IllegalStateException #1                                                                                                                                                                        |                                                                                                                                                                           |
|   KotlinThreadRunConcurrentRepresentationTest#1.block(): threw IllegalStateException at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:35) |                                                                                                                                                                           |
|     block(): threw IllegalStateException at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:214)                                                                        |                                                                                                                                                                           |
|       ThreadsKt.thread$default(false,false,null,null,0,block$t$1#1,31,null): Thread#2 at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:224)                           |                                                                                                                                                                           |
|         ThreadsKt.thread(true,false,null,null,-1,block$t$1#1): Thread#2 at ThreadsKt.thread$default(Thread.kt:20)                                                                                             |                                                                                                                                                                           |
|           Thread#2.start() at ThreadsKt.thread(Thread.kt:42)                                                                                                                                                  |                                                                                                                                                                           |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                                                         |                                                                                                                                                                           |
|                                                                                                                                                                                                               | run()                                                                                                                                                                     |
|                                                                                                                                                                                                               |   block$t$1#1.invoke(): Unit#1 at ThreadsKt$thread$thread$1.run(Thread.kt:30)                                                                                             |
|                                                                                                                                                                                                               |     invoke() at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:224)                                                     |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.READ: 0 at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225)  |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.WRITE(1) at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225) |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.READ: 1 at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225)  |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.WRITE(2) at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225) |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.READ: 2 at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225)  |
|                                                                                                                                                                                                               |       KotlinThreadRunConcurrentRepresentationTest.value.WRITE(3) at KotlinThreadRunConcurrentRepresentationTest$block$t$1.invoke(RunConcurrentRepresentationTests.kt:225) |
|                                                                                                                                                                                                               |   result: void                                                                                                                                                            |
|       Thread#2.join() at KotlinThreadRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:227)                                                                                           |                                                                                                                                                                           |
|   result: IllegalStateException #1                                                                                                                                                                            |                                                                                                                                                                           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
