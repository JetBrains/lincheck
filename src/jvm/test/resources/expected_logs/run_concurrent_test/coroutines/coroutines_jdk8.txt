Wow! You've caught a bug in Lincheck.
We kindly ask to provide an issue here: https://github.com/JetBrains/lincheck/issues,
attaching a stack trace printed below and the code that causes the error.

Exception stacktrace:
java.lang.IllegalStateException: Trying to switch the execution to thread 2,
but only the following threads are eligible to switch: [1]
	at org.jetbrains.kotlinx.lincheck.strategy.managed.ManagedStrategy.chooseThreadSwitch(ManagedStrategy.kt:712)
	at org.jetbrains.kotlinx.lincheck.strategy.managed.ManagedStrategy.switchCurrentThread(ManagedStrategy.kt:686)
	at org.jetbrains.kotlinx.lincheck.strategy.managed.ManagedStrategy.switchCurrentThread$default(ManagedStrategy.kt:671)
	at org.jetbrains.kotlinx.lincheck.strategy.managed.ManagedStrategy.newSwitchPoint(ManagedStrategy.kt:477)
	at org.jetbrains.kotlinx.lincheck.strategy.managed.ManagedStrategy.beforeMethodCall(ManagedStrategy.kt:1305)
	at sun.nio.ch.lincheck.Injections.beforeMethodCall(Injections.java:378)
	at kotlinx.coroutines.internal.LockFreeLinkedListNode.tryCondAddNext(LockFreeLinkedList.kt:182)
	at kotlinx.coroutines.JobSupport.addLastAtomic(JobSupport.kt:1537)
	at kotlinx.coroutines.JobSupport.invokeOnCompletion(JobSupport.kt:498)
	at kotlinx.coroutines.Job$DefaultImpls.invokeOnCompletion$default(Job.kt:357)
	at kotlinx.coroutines.JobSupport.attachChild(JobSupport.kt:974)
	at kotlinx.coroutines.JobSupport.initParentJob(JobSupport.kt:152)
	at kotlinx.coroutines.AbstractCoroutine.<init>(AbstractCoroutine.kt:51)
	at kotlinx.coroutines.StandaloneCoroutine.<init>(Builders.common.kt:192)
	at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch(Builders.common.kt:55)
	at kotlinx.coroutines.BuildersKt.launch(Unknown Source)
	at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch$default(Builders.common.kt:47)
	at kotlinx.coroutines.BuildersKt.launch$default(Unknown Source)
	at org.jetbrains.kotlinx.lincheck_test.representation.CoroutinesRunConcurrentRepresentationTest$block$1.invokeSuspend(RunConcurrentRepresentationTests.kt:453)
	at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
	at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:108)
	at kotlinx.coroutines.EventLoopImplBase.processNextEvent(EventLoop.common.kt:280)
	at kotlinx.coroutines.BlockingCoroutine.joinBlocking(Builders.kt:85)
	at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking(Builders.kt:59)
	at kotlinx.coroutines.BuildersKt.runBlocking(Unknown Source)
	at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking$default(Builders.kt:38)
	at kotlinx.coroutines.BuildersKt.runBlocking$default(Unknown Source)
	at org.jetbrains.kotlinx.lincheck_test.representation.CoroutinesRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:447)
	at org.jetbrains.kotlinx.lincheck_test.representation.CoroutinesRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:420)
	at org.jetbrains.kotlinx.lincheck_test.representation.BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:42)
	at org.jetbrains.kotlinx.lincheck.GeneralPurposeModelCheckingWrapper.run(Lincheck.kt:78)
	at org.jetbrains.kotlinx.lincheck.runner.TestThreadExecution0.run(Unknown Source)
	at org.jetbrains.kotlinx.lincheck.runner.FixedActiveThreadsExecutor.testThreadRunnable$lambda$10(FixedActiveThreadsExecutor.kt:172)
	at java.lang.Thread.run(Thread.java:750)
