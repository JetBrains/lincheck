= The execution has hung =
| -------------------- |
|       Thread 1       |
| -------------------- |
| run(() -> R): <hung> |
| -------------------- |


The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                   Thread 1                                                                                   |                                                                                                  Thread 2                                                                                                  |                                                                                                  Thread 3                                                                                                  |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   LivelockRunConcurrentRepresentationTest#1.block() at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:35) |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|     block() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:232)                                                                        |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       Thread#2.start() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:254)                                                             |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       Thread#3.start() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:254)                                                             |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                        |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|                                                                                                                                                                              |                                                                                                                                                                                                            | run()                                                                                                                                                                                                      |
|                                                                                                                                                                              |                                                                                                                                                                                                            |   SpinLockTestKt.withLock(SpinLock#1,LivelockRunConcurrentRepresentationTest$block$t2$1$1) at LivelockRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:247)              |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                       |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     switch                                                                                                                                                                                                 |
|                                                                                                                                                                              | run()                                                                                                                                                                                                      |                                                                                                                                                                                                            |
|                                                                                                                                                                              |   SpinLockTestKt.withLock(SpinLock#2,LivelockRunConcurrentRepresentationTest$block$t1$1$1) at LivelockRunConcurrentRepresentationTest.block$lambda$0(RunConcurrentRepresentationTests.kt:240)              |                                                                                                                                                                                                            |
|                                                                                                                                                                              |     SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                       |                                                                                                                                                                                                            |
|                                                                                                                                                                              |     LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                           |                                                                                                                                                                                                            |
|                                                                                                                                                                              |       invoke() at LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke(RunConcurrentRepresentationTests.kt:240)                                                                                     |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         SpinLockTestKt.withLock(SpinLock#1,LivelockRunConcurrentRepresentationTest$block$t1$1$1$1) at LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke(RunConcurrentRepresentationTests.kt:241) |                                                                                                                                                                                                            |
|                                                                                                                                                                              |           SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                 |                                                                                                                                                                                                            |
|                                                                                                                                                                              |             /* The following events repeat infinitely: */                                                                                                                                                  |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         ┌╶> AtomicBoolean#1.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                                          |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         └╶╶ switch (reason: active lock detected)                                                                                                                                                          |                                                                                                                                                                                                            |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                           |
|                                                                                                                                                                              |                                                                                                                                                                                                            |       invoke() at LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke(RunConcurrentRepresentationTests.kt:247)                                                                                     |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         SpinLockTestKt.withLock(SpinLock#2,LivelockRunConcurrentRepresentationTest$block$t2$1$1$1) at LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke(RunConcurrentRepresentationTests.kt:248) |
|                                                                                                                                                                              |                                                                                                                                                                                                            |           SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                 |
|                                                                                                                                                                              |                                                                                                                                                                                                            |             /* The following events repeat infinitely: */                                                                                                                                                  |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         ┌╶> AtomicBoolean#2.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                                          |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         └╶╶ switch (reason: active lock detected)                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
All unfinished threads are in deadlock

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                   Thread 1                                                                                   |                                                                                                  Thread 2                                                                                                  |                                                                                                  Thread 3                                                                                                  |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   LivelockRunConcurrentRepresentationTest#1.block() at BaseRunConcurrentRepresentationTest$testRunWithModelChecker$result$1$1.invoke(RunConcurrentRepresentationTests.kt:35) |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|     block() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:232)                                                                        |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       Thread#2.start() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:254)                                                             |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       Thread#3.start() at LivelockRunConcurrentRepresentationTest.block(RunConcurrentRepresentationTests.kt:254)                                                             |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                        |                                                                                                                                                                                                            |                                                                                                                                                                                                            |
|                                                                                                                                                                              |                                                                                                                                                                                                            | run()                                                                                                                                                                                                      |
|                                                                                                                                                                              |                                                                                                                                                                                                            |   SpinLockTestKt.withLock(SpinLock#1,LivelockRunConcurrentRepresentationTest$block$t2$1$1) at LivelockRunConcurrentRepresentationTest.block$lambda$1(RunConcurrentRepresentationTests.kt:247)              |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                       |
|                                                                                                                                                                              |                                                                                                                                                                                                            |       AtomicBoolean#1.compareAndSet(false,true): true at SpinLock.lock(SpinLockTest.kt:83)                                                                                                                 |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     switch                                                                                                                                                                                                 |
|                                                                                                                                                                              | run()                                                                                                                                                                                                      |                                                                                                                                                                                                            |
|                                                                                                                                                                              |   SpinLockTestKt.withLock(SpinLock#2,LivelockRunConcurrentRepresentationTest$block$t1$1$1) at LivelockRunConcurrentRepresentationTest.block$lambda$0(RunConcurrentRepresentationTests.kt:240)              |                                                                                                                                                                                                            |
|                                                                                                                                                                              |     SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                       |                                                                                                                                                                                                            |
|                                                                                                                                                                              |       AtomicBoolean#2.compareAndSet(false,true): true at SpinLock.lock(SpinLockTest.kt:83)                                                                                                                 |                                                                                                                                                                                                            |
|                                                                                                                                                                              |     LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                           |                                                                                                                                                                                                            |
|                                                                                                                                                                              |       invoke() at LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke(RunConcurrentRepresentationTests.kt:240)                                                                                     |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         SpinLockTestKt.withLock(SpinLock#1,LivelockRunConcurrentRepresentationTest$block$t1$1$1$1) at LivelockRunConcurrentRepresentationTest$block$t1$1$1.invoke(RunConcurrentRepresentationTests.kt:241) |                                                                                                                                                                                                            |
|                                                                                                                                                                              |           SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                 |                                                                                                                                                                                                            |
|                                                                                                                                                                              |             /* The following events repeat infinitely: */                                                                                                                                                  |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         ┌╶> AtomicBoolean#1.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                                          |                                                                                                                                                                                                            |
|                                                                                                                                                                              |         └╶╶ switch (reason: active lock detected)                                                                                                                                                          |                                                                                                                                                                                                            |
|                                                                                                                                                                              |                                                                                                                                                                                                            |     LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                           |
|                                                                                                                                                                              |                                                                                                                                                                                                            |       invoke() at LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke(RunConcurrentRepresentationTests.kt:247)                                                                                     |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         SpinLockTestKt.withLock(SpinLock#2,LivelockRunConcurrentRepresentationTest$block$t2$1$1$1) at LivelockRunConcurrentRepresentationTest$block$t2$1$1.invoke(RunConcurrentRepresentationTests.kt:248) |
|                                                                                                                                                                              |                                                                                                                                                                                                            |           SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                                 |
|                                                                                                                                                                              |                                                                                                                                                                                                            |             /* The following events repeat infinitely: */                                                                                                                                                  |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         ┌╶> AtomicBoolean#2.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                                          |
|                                                                                                                                                                              |                                                                                                                                                                                                            |         └╶╶ switch (reason: active lock detected)                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
All unfinished threads are in deadlock
