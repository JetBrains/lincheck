= Concurrent test failed =

java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:36)
	at java.base/java.lang.Thread.run(Unknown Source)

The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                         Main Thread                                                                          |                                                            Thread 1                                                            |                                                            Thread 2                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| DirectMethodHandle#1.invokeExact(IntRef#1): Lambda#2 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |                                                                                                                                |
| thread(block = Lambda#2): Thread#1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:30)                   |                                                                                                                                |                                                                                                                                |
| DirectMethodHandle#2.invokeExact(IntRef#1): Lambda#3 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:31) |                                                                                                                                |                                                                                                                                |
| thread(block = Lambda#3): Thread#2 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:31)                   |                                                                                                                                |                                                                                                                                |
| switch (reason: waiting for Thread 1 to finish)                                                                                                              |                                                                                                                                |                                                                                                                                |
|                                                                                                                                                              |                                                                                                                                | run()                                                                                                                          |
|                                                                                                                                                              |                                                                                                                                |   counter ➜ 0 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$1(MultipleRootsInRunConcurrent.kt:31) |
|                                                                                                                                                              |                                                                                                                                |   switch                                                                                                                       |
|                                                                                                                                                              | run()                                                                                                                          |                                                                                                                                |
|                                                                                                                                                              |   counter ➜ 0 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$0(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |
|                                                                                                                                                              |   counter = 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$0(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |
|                                                                                                                                                              |                                                                                                                                |   counter = 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$1(MultipleRootsInRunConcurrent.kt:31) |
| Thread#1.join() at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:33)                                      |                                                                                                                                |                                                                                                                                |
| Thread#2.join() at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:34)                                      |                                                                                                                                |                                                                                                                                |
| counter.element ➜ 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:36)                                  |                                                                                                                                |                                                                                                                                |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                         Main Thread                                                                          |                                                            Thread 1                                                            |                                                            Thread 2                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| DirectMethodHandle#1.invokeExact(IntRef#1): Lambda#2 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |                                                                                                                                |
|   DirectMethodHandle.internalMemberName(DirectMethodHandle#1): MemberName#1 at DirectMethodHandle.Holder.invokeStatic(DirectMethodHandle$Holder:0)           |                                                                                                                                |                                                                                                                                |
|   MethodHandle.linkToStatic(IntRef#1, MemberName#1): Lambda#2 at DirectMethodHandle.Holder.invokeStatic(DirectMethodHandle$Holder:0)                         |                                                                                                                                |                                                                                                                                |
| thread(block = Lambda#2): Thread#1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:30)                   |                                                                                                                                |                                                                                                                                |
|   Thread#1.start() at ThreadsKt.thread(Thread.kt:42)                                                                                                         |                                                                                                                                |                                                                                                                                |
| DirectMethodHandle#2.invokeExact(IntRef#1): Lambda#3 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:31) |                                                                                                                                |                                                                                                                                |
|   DirectMethodHandle.internalMemberName(DirectMethodHandle#2): MemberName#2 at DirectMethodHandle.Holder.invokeStatic(DirectMethodHandle$Holder:0)           |                                                                                                                                |                                                                                                                                |
|   MethodHandle.linkToStatic(IntRef#1, MemberName#2): Lambda#3 at DirectMethodHandle.Holder.invokeStatic(DirectMethodHandle$Holder:0)                         |                                                                                                                                |                                                                                                                                |
| thread(block = Lambda#3): Thread#2 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:31)                   |                                                                                                                                |                                                                                                                                |
|   Thread#2.start() at ThreadsKt.thread(Thread.kt:42)                                                                                                         |                                                                                                                                |                                                                                                                                |
| switch (reason: waiting for Thread 1 to finish)                                                                                                              |                                                                                                                                |                                                                                                                                |
|                                                                                                                                                              |                                                                                                                                | run()                                                                                                                          |
|                                                                                                                                                              |                                                                                                                                |   counter ➜ 0 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$1(MultipleRootsInRunConcurrent.kt:31) |
|                                                                                                                                                              |                                                                                                                                |   switch                                                                                                                       |
|                                                                                                                                                              | run()                                                                                                                          |                                                                                                                                |
|                                                                                                                                                              |   counter ➜ 0 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$0(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |
|                                                                                                                                                              |   counter = 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$0(MultipleRootsInRunConcurrent.kt:30) |                                                                                                                                |
|                                                                                                                                                              |                                                                                                                                |   counter = 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2$lambda$1(MultipleRootsInRunConcurrent.kt:31) |
| Thread#1.join() at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:33)                                      |                                                                                                                                |                                                                                                                                |
| Thread#2.join() at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:34)                                      |                                                                                                                                |                                                                                                                                |
| counter.element ➜ 1 at MultipleRootsInRunConcurrent.multipleRootsTest$lambda$3$lambda$2(MultipleRootsInRunConcurrent.kt:36)                                  |                                                                                                                                |                                                                                                                                |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
