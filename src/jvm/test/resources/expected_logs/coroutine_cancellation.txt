= Invalid execution results =
Parallel part:
| cancelledOp() + cancel: SUSPENDED + CANCELLED | isAbsurd(): true |

= The following interleaving leads to the error =
Parallel part trace:
|                                                                                                                                                  | isAbsurd()                                                                                                               |
|                                                                                                                                                  |   correct.READ: true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:44)  |
|                                                                                                                                                  |   switch                                                                                                                 |
| cancelledOp() + cancel                                                                                                                           |                                                                                                                          |
|   invokeOnCancellation(@1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:37)                 |                                                                                                                          |
|   getResult(): CoroutineSingletons@1 at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:65)       |                                                                                                                          |
|     trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:273)                                              |                                                                                                                          |
|   CANCELLED BEFORE RESUMPTION                                                                                                                    |                                                                                                                          |
|   _state.compareAndSet(InvokeOnCancel@1,CancelledContinuation@1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:193) |                                                                                                                          |
|   callCancelHandler(InvokeOnCancel@1,Exception@1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:195)                      |                                                                                                                          |
|   result: SUSPENDED + CANCELLED                                                                                                                  |                                                                                                                          |
|   thread is finished                                                                                                                             |                                                                                                                          |
|                                                                                                                                                  |   correct.READ: false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:44) |
|                                                                                                                                                  |   result: true                                                                                                           |
|                                                                                                                                                  |   thread is finished                                                                                                     |

Detailed parallel part trace:
|                                                                                                                                                                                        | isAbsurd()                                                                                                               |
|                                                                                                                                                                                        |   correct.READ: true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:44)  |
|                                                                                                                                                                                        |   switch                                                                                                                 |
| cancelledOp() + cancel                                                                                                                                                                 |                                                                                                                          |
|   invokeOnCancellation(@1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:37)                                                       |                                                                                                                          |
|     _state.compareAndSet(Active@1,InvokeOnCancel@1): true at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:303)                                      |                                                                                                                          |
|   getResult(): CoroutineSingletons@1 at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:65)                                             |                                                                                                                          |
|     trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:273)                                                                                    |                                                                                                                          |
|       _decision.compareAndSet(0,1): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:253)                                                                 |                                                                                                                          |
|   CANCELLED BEFORE RESUMPTION                                                                                                                                                          |                                                                                                                          |
|   _state.compareAndSet(InvokeOnCancel@1,CancelledContinuation@1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:193)                                       |                                                                                                                          |
|   callCancelHandler(InvokeOnCancel@1,Exception@1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:195)                                                            |                                                                                                                          |
|     invoke(Exception@1) at CancellableContinuationImpl.callCancelHandler(CancellableContinuationImpl.kt:230)                                                                           |                                                                                                                          |
|       invoke(Exception@1): Unit@1 at InvokeOnCancel.invoke(CancellableContinuationImpl.kt:539)                                                                                         |                                                                                                                          |
|         invoke(Exception@1) at CoroutineCancellationTraceReportingTest$cancelledOp$$inlined$suspendCancellableCoroutine$lambda$1.invoke(CoroutineCancellationTraceReportingTest.kt:29) |                                                                                                                          |
|           setCorrect(false) at CoroutineCancellationTraceReportingTest$cancelledOp$$inlined$suspendCancellableCoroutine$lambda$1.invoke(CoroutineCancellationTraceReportingTest.kt:38) |                                                                                                                          |
|             correct.WRITE(false) at CoroutineCancellationTraceReportingTest.setCorrect(CoroutineCancellationTraceReportingTest.kt:31)                                                  |                                                                                                                          |
|   result: SUSPENDED + CANCELLED                                                                                                                                                        |                                                                                                                          |
|   thread is finished                                                                                                                                                                   |                                                                                                                          |
|                                                                                                                                                                                        |   correct.READ: false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:44) |
|                                                                                                                                                                                        |   result: true                                                                                                           |
|                                                                                                                                                                                        |   thread is finished                                                                                                     |