= Invalid execution results =
| ---------------------------------------------------------------- |
|                   Thread 1                    |     Thread 2     |
| ---------------------------------------------------------------- |
| cancelledOp() + cancel: SUSPENDED + CANCELLED | isAbsurd(): true |
| ---------------------------------------------------------------- |

The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                         Thread 1                                                                          |                                                         Thread 2                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                                                                                           | isAbsurd(): true                                                                                                         |
|                                                                                                                                                           |   correct.READ: true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36)  |
|                                                                                                                                                           |   switch                                                                                                                 |
| cancelledOp() + cancel: SUSPENDED + CANCELLED                                                                                                             |                                                                                                                          |
|   invokeOnCancellation(cancelledOp$2$1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:29)             |                                                                                                                          |
|   getResult(): CoroutineSingletons@1 at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:59)                |                                                                                                                          |
|     trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:296)                                                       |                                                                                                                          |
|     getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:306)                                                  |                                                                                                                          |
|   CANCELLED BEFORE RESUMPTION                                                                                                                             |                                                                                                                          |
|   _state$volatile.get(): InvokeOnCancel@1 at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:200)                                       |                                                                                                                          |
|   _state$volatile.compareAndSet(InvokeOnCancel@1,CancelledContinuation@1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:205) |                                                                                                                          |
|   callCancelHandler(InvokeOnCancel@1,Exception@1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:208)                               |                                                                                                                          |
|   detachChildIfNonResuable() at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:212)                                                    |                                                                                                                          |
|   dispatchResume(1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:213)                                                             |                                                                                                                          |
|   result: SUSPENDED + CANCELLED                                                                                                                           |                                                                                                                          |
|                                                                                                                                                           |   correct.READ: false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36) |
|                                                                                                                                                           |   result: true                                                                                                           |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

Detailed trace:
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                  Thread 1                                                                                  |                                                         Thread 2                                                         |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                                                            | isAbsurd(): true                                                                                                         |
|                                                                                                                                                                            |   correct.READ: true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36)  |
|                                                                                                                                                                            |   switch                                                                                                                 |
| cancelledOp() + cancel: SUSPENDED + CANCELLED                                                                                                                              |                                                                                                                          |
|   invokeOnCancellation(cancelledOp$2$1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:29)                              |                                                                                                                          |
|     invokeOnCancellationImpl(InvokeOnCancel@1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:395)                                     |                                                                                                                          |
|       _state$volatile.get(): Active@1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:398)                                          |                                                                                                                          |
|       _state$volatile.compareAndSet(Active@1,InvokeOnCancel@1): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)           |                                                                                                                          |
|   getResult(): CoroutineSingletons@1 at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:59)                                 |                                                                                                                          |
|     trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:296)                                                                        |                                                                                                                          |
|       _decisionAndIndex$volatile.get(): 536870911 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:271)                                            |                                                                                                                          |
|       _decisionAndIndex$volatile.compareAndSet(536870911,1073741823): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:274)                   |                                                                                                                          |
|     getParentHandle(): null at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:306)                                                                   |                                                                                                                          |
|       _parentHandle$volatile.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:102)                                                |                                                                                                                          |
|   CANCELLED BEFORE RESUMPTION                                                                                                                                              |                                                                                                                          |
|   _state$volatile.get(): InvokeOnCancel@1 at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:200)                                                        |                                                                                                                          |
|   _state$volatile.compareAndSet(InvokeOnCancel@1,CancelledContinuation@1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:205)                  |                                                                                                                          |
|   callCancelHandler(InvokeOnCancel@1,Exception@1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:208)                                                |                                                                                                                          |
|     invoke(Exception@1) at CancellableContinuationImpl.callCancelHandler(CancellableContinuationImpl.kt:245)                                                               |                                                                                                                          |
|       invoke(Exception@1): Unit@1 at InvokeOnCancel.invoke(CancellableContinuationImpl.kt:638)                                                                             |                                                                                                                          |
|         invoke(Exception@1) at CoroutineCancellationTraceReportingTest$cancelledOp$2$1.invoke(CoroutineCancellationTraceReportingTest.kt:29)                               |                                                                                                                          |
|           setCorrect(false) at CoroutineCancellationTraceReportingTest$cancelledOp$2$1.invoke(CoroutineCancellationTraceReportingTest.kt:30)                               |                                                                                                                          |
|             correct.WRITE(false) at CoroutineCancellationTraceReportingTest.setCorrect(CoroutineCancellationTraceReportingTest.kt:23)                                      |                                                                                                                          |
|   detachChildIfNonResuable() at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:212)                                                                     |                                                                                                                          |
|     detachChild$kotlinx_coroutines_core() at CancellableContinuationImpl.detachChildIfNonResuable(CancellableContinuationImpl.kt:561)                                      |                                                                                                                          |
|       getParentHandle(): null at CancellableContinuationImpl.detachChild$kotlinx_coroutines_core(CancellableContinuationImpl.kt:568)                                       |                                                                                                                          |
|         _parentHandle$volatile.get(): null at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:102)                                              |                                                                                                                          |
|   dispatchResume(1) at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:213)                                                                              |                                                                                                                          |
|     tryResume(): false at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:468)                                                                   |                                                                                                                          |
|       _decisionAndIndex$volatile.get(): 1073741823 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:281)                                            |                                                                                                                          |
|     dispatch(<cont>,1) at CancellableContinuationImpl.dispatchResume(CancellableContinuationImpl.kt:470)                                                                   |                                                                                                                          |
|       resume(<cont>,<cont>,false) at DispatchedTaskKt.dispatch(DispatchedTask.kt:164)                                                                                      |                                                                                                                          |
|         takeState$kotlinx_coroutines_core(): CancelledContinuation@1 at DispatchedTaskKt.resume(DispatchedTask.kt:170)                                                     |                                                                                                                          |
|           getState$kotlinx_coroutines_core(): CancelledContinuation@1 at CancellableContinuationImpl.takeState$kotlinx_coroutines_core(CancellableContinuationImpl.kt:164) |                                                                                                                          |
|             _state$volatile.get(): CancelledContinuation@1 at CancellableContinuationImpl.getState$kotlinx_coroutines_core(CancellableContinuationImpl.kt:104)             |                                                                                                                          |
|   result: SUSPENDED + CANCELLED                                                                                                                                            |                                                                                                                          |
|                                                                                                                                                                            |   correct.READ: false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36) |
|                                                                                                                                                                            |   result: true                                                                                                           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
