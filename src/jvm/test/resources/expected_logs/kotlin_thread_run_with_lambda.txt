= Invalid execution results =
| -------------------------------------- |
|                Thread 1                |
| -------------------------------------- |
| run(() -> R): IllegalStateException #1 |
| -------------------------------------- |

---
The number next to an exception name helps you find its stack trace provided after the interleaving section
---

The following interleaving leads to the error:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                            Thread 1                                                                                            | Thread 2 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| run(() -> R): IllegalStateException #1                                                                                                                                                         |          |
|   KotlinThreadRunWithLambdaTest#1.block(): threw IllegalStateException at BaseRunWithLambdaRepresentationTest$testRunWithModelChecker$failure$1.invoke(RunWithLambdaRepresentationTests.kt:42) |          |
|     block(): threw IllegalStateException at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:204)                                                                       |          |
|       ThreadsKt.thread$default(false,false,null,null,0,t$1,31,null): Thread#2 at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:214)                                  |          |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                                          |          |
|                                                                                                                                                                                                | run()    |
|       Thread#2.join() at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:217)                                                                                          |          |
|   result: IllegalStateException #1                                                                                                                                                             |          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Exception stack traces:
#1: java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.KotlinThreadRunWithLambdaTest.block(Unknown Source)
	at org.jetbrains.kotlinx.lincheck_test.representation.KotlinThreadRunWithLambdaTest.block(Unknown Source)
	at org.jetbrains.kotlinx.lincheck_test.representation.BaseRunWithLambdaRepresentationTest$testRunWithModelChecker$failure$1.invoke(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

Detailed trace:
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                            Thread 1                                                                                            |                                                                   Thread 2                                                                    |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| run(() -> R): IllegalStateException #1                                                                                                                                                         |                                                                                                                                               |
|   KotlinThreadRunWithLambdaTest#1.block(): threw IllegalStateException at BaseRunWithLambdaRepresentationTest$testRunWithModelChecker$failure$1.invoke(RunWithLambdaRepresentationTests.kt:42) |                                                                                                                                               |
|     block(): threw IllegalStateException at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:204)                                                                       |                                                                                                                                               |
|       ThreadsKt.thread$default(false,false,null,null,0,t$1,31,null): Thread#2 at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:214)                                  |                                                                                                                                               |
|         ThreadsKt.thread(true,false,null,null,-1,t$1): Thread#2 at ThreadsKt.thread$default(Thread.kt:20)                                                                                      |                                                                                                                                               |
|           Thread#2.start() at ThreadsKt.thread(Thread.kt:42)                                                                                                                                   |                                                                                                                                               |
|       switch (reason: waiting for Thread 2 to finish)                                                                                                                                          |                                                                                                                                               |
|                                                                                                                                                                                                | run()                                                                                                                                         |
|                                                                                                                                                                                                |   t$1.invoke(): Unit#1 at ThreadsKt$thread$thread$1.run(Thread.kt:30)                                                                         |
|                                                                                                                                                                                                |     invoke() at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:214)                                       |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.READ: 0 at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215)  |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.WRITE(1) at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215) |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.READ: 1 at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215)  |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.WRITE(2) at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215) |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.READ: 2 at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215)  |
|                                                                                                                                                                                                |       KotlinThreadRunWithLambdaTest.value.WRITE(3) at KotlinThreadRunWithLambdaTest$block$t$1.invoke(RunWithLambdaRepresentationTests.kt:215) |
|                                                                                                                                                                                                |   result: void                                                                                                                                |
|       Thread#2.join() at KotlinThreadRunWithLambdaTest.block(RunWithLambdaRepresentationTests.kt:217)                                                                                          |                                                                                                                                               |
|   result: IllegalStateException #1                                                                                                                                                             |                                                                                                                                               |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
