= The execution has hung, see the thread dump =
| ---------------------------- |
| Thread 1  |     Thread 2     |
| ---------------------------- |
| trigger() | causesSpinLock() |
| ---------------------------- |


The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                        Thread 1                                        |                                                       Thread 2                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   trigger()                                                                            |                                                                                                                      |
|     incrementAndGet(): 1 at RecursiveSpinLockTest.trigger(FaaQueueSpinLockTest.kt:270) |                                                                                                                      |
|     switch                                                                             |                                                                                                                      |
|                                                                                        |   causesSpinLock()                                                                                                   |
|                                                                                        |     get(): 1 at RecursiveSpinLockTest.causesSpinLock(FaaQueueSpinLockTest.kt:276)                                    |
|                                                                                        |     /* The following events recursively repeat infinitely: */                                                        |
|                                                                                        | ┌—> deadSpinCycleRecursive() at RecursiveSpinLockTest.causesSpinLock(FaaQueueSpinLockTest.kt:277)                    |
|                                                                                        | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)        |
|                                                                                        | |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)         |
|                                                                                        | |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)        |
|                                                                                        | |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)         |
|                                                                                        | |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | └—————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                               |
|                                                                                        |       switch (reason: active recursive lock detected)                                                                |
|     decrementAndGet(): 0 at RecursiveSpinLockTest.trigger(FaaQueueSpinLockTest.kt:271) |                                                                                                                      |
|                                                                                        |       /* The following events recursively repeat infinitely: */                                                      |
|                                                                                        |   ┌—> deadSpinCycleRecursive() at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:286)          |
|                                                                                        |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)      |
|                                                                                        |   |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)       |
|                                                                                        |   |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)      |
|                                                                                        |   |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)       |
|                                                                                        |   |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   └—————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                             |
|                                                                                        |         switch (reason: active recursive lock detected)                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                        Thread 1                                        |                                                       Thread 2                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   trigger()                                                                            |                                                                                                                      |
|     incrementAndGet(): 1 at RecursiveSpinLockTest.trigger(FaaQueueSpinLockTest.kt:270) |                                                                                                                      |
|     switch                                                                             |                                                                                                                      |
|                                                                                        |   causesSpinLock()                                                                                                   |
|                                                                                        |     get(): 1 at RecursiveSpinLockTest.causesSpinLock(FaaQueueSpinLockTest.kt:276)                                    |
|                                                                                        |     /* The following events recursively repeat infinitely: */                                                        |
|                                                                                        | ┌—> deadSpinCycleRecursive() at RecursiveSpinLockTest.causesSpinLock(FaaQueueSpinLockTest.kt:277)                    |
|                                                                                        | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)        |
|                                                                                        | |       get(): false at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                         |
|                                                                                        | |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)         |
|                                                                                        | |       get(): true at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                          |
|                                                                                        | |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)        |
|                                                                                        | |       get(): false at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                         |
|                                                                                        | |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)         |
|                                                                                        | |       get(): true at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                          |
|                                                                                        | |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284)   |
|                                                                                        | └—————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                               |
|                                                                                        |       switch (reason: active recursive lock detected)                                                                |
|     decrementAndGet(): 0 at RecursiveSpinLockTest.trigger(FaaQueueSpinLockTest.kt:271) |                                                                                                                      |
|                                                                                        |       /* The following events recursively repeat infinitely: */                                                      |
|                                                                                        |   ┌—> deadSpinCycleRecursive() at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:286)          |
|                                                                                        |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)      |
|                                                                                        |   |       get(): false at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                       |
|                                                                                        |   |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)       |
|                                                                                        |   |       get(): true at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                        |
|                                                                                        |   |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): false at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)      |
|                                                                                        |   |       get(): false at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                       |
|                                                                                        |   |     compareAndSet(false,true): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   |     getSharedVariable(): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:283)       |
|                                                                                        |   |       get(): true at RecursiveSpinLockTest.getSharedVariable(FaaQueueSpinLockTest.kt:289)                        |
|                                                                                        |   |     compareAndSet(true,false): true at RecursiveSpinLockTest.deadSpinCycleRecursive(FaaQueueSpinLockTest.kt:284) |
|                                                                                        |   └—————/* The next call would cause infinite recursion spin-lock, switch to avoid it */                             |
|                                                                                        |         switch (reason: active recursive lock detected)                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
