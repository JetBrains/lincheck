= Invalid execution results =
| ---------------------------------------------------- |
|     Thread 1     |             Thread 2              |
| ---------------------------------------------------- |
| isAbsurd(): true | cancelledOp() + cancel: CANCELLED |
| ---------------------------------------------------- |

The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                       Thread 1                                                       |                                                                        Thread 2                                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| isAbsurd(): true                                                                                                     |                                                                                                                                                         |
|   correct ➜ true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36)  |                                                                                                                                                         |
|   switch                                                                                                             |                                                                                                                                                         |
|                                                                                                                      | cancelledOp(): CANCELLED                                                                                                                                |
|                                                                                                                      |   cancellable$iv.initCancellability() at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:55)             |
|                                                                                                                      |   cont.invokeOnCancellation(cancelledOp$2$1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:29)      |
|                                                                                                                      |   cancellable$iv.getResult(): COROUTINE_SUSPENDED at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:57) |
|                                                                                                                      |   CANCELLED BEFORE RESUMPTION                                                                                                                           |
|                                                                                                                      |   _state.get(): InvokeOnCancel#1 at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:0)                                                |
|                                                                                                                      |   _state.compareAndSet(InvokeOnCancel#1, CancelledContinuation#1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:209)       |
|                                                                                                                      |   result: CANCELLED                                                                                                                                     |
|   correct ➜ false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36) |                                                                                                                                                         |
|   result: true                                                                                                       |                                                                                                                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |

Detailed trace:
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                       Thread 1                                                       |                                                                         Thread 2                                                                          |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| isAbsurd(): true                                                                                                     |                                                                                                                                                           |
|   correct ➜ true at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36)  |                                                                                                                                                           |
|   switch                                                                                                             |                                                                                                                                                           |
|                                                                                                                      | cancelledOp(): CANCELLED                                                                                                                                  |
|                                                                                                                      |   cancellable$iv.initCancellability() at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:55)               |
|                                                                                                                      |     installParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.initCancellability(CancellableContinuationImpl.kt:129)                      |
|                                                                                                                      |       _parentHandle.compareAndSet(null, ChildContinuation#1): true at CancellableContinuationImpl.installParentHandle(CancellableContinuationImpl.kt:352) |
|                                                                                                                      |     isCompleted(): false at CancellableContinuationImpl.initCancellability(CancellableContinuationImpl.kt:134)                                            |
|                                                                                                                      |       getState(): Active#1 at CancellableContinuationImpl.isCompleted(CancellableContinuationImpl.kt:112)                                                 |
|                                                                                                                      |         _state.get(): Active#1 at CancellableContinuationImpl.getState(CancellableContinuationImpl.kt:108)                                                |
|                                                                                                                      |   cont.invokeOnCancellation(cancelledOp$2$1) at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:29)        |
|                                                                                                                      |     invokeOnCancellationImpl(InvokeOnCancel#1) at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:399)                    |
|                                                                                                                      |       _state.get(): Active#1 at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:403)                                  |
|                                                                                                                      |       _state.compareAndSet(Active#1, InvokeOnCancel#1): true at CancellableContinuationImpl.invokeOnCancellationImpl(CancellableContinuationImpl.kt:407)  |
|                                                                                                                      |   cancellable$iv.getResult(): COROUTINE_SUSPENDED at CoroutineCancellationTraceReportingTest.cancelledOp(CoroutineCancellationTraceReportingTest.kt:57)   |
|                                                                                                                      |     trySuspend(): true at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:300)                                                       |
|                                                                                                                      |       _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                      |
|                                                                                                                      |       _decisionAndIndex.compareAndSet(536870911, 1073741823): true at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:278)          |
|                                                                                                                      |     getParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.getResult(CancellableContinuationImpl.kt:310)                                   |
|                                                                                                                      |       _parentHandle.get(): ChildContinuation#1 at CancellableContinuationImpl.getParentHandle(CancellableContinuationImpl.kt:106)                         |
|                                                                                                                      |   CANCELLED BEFORE RESUMPTION                                                                                                                             |
|                                                                                                                      |   _state.get(): InvokeOnCancel#1 at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:0)                                                  |
|                                                                                                                      |   _state.compareAndSet(InvokeOnCancel#1, CancelledContinuation#1): true at CancellableContinuationImpl.cancel(CancellableContinuationImpl.kt:209)         |
|                                                                                                                      |   result: CANCELLED                                                                                                                                       |
|   correct ➜ false at CoroutineCancellationTraceReportingTest.isAbsurd(CoroutineCancellationTraceReportingTest.kt:36) |                                                                                                                                                           |
|   result: true                                                                                                       |                                                                                                                                                           |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
