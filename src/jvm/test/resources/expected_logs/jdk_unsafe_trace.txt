= Invalid execution results =
| ------------------------------- |
|    Thread 1    |    Thread 2    |
| ------------------------------- |
| increment(): 0 | increment(): 0 |
| ------------------------------- |

The following interleaving leads to the error:
| -------------------------------------------------------------------------------------------------------------------------------------------- |
|    Thread 1    |                                                          Thread 2                                                           |
| -------------------------------------------------------------------------------------------------------------------------------------------- |
|                | increment(): 0                                                                                                              |
|                |   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)       |
|                |   switch                                                                                                                    |
| increment(): 0 |                                                                                                                             |
|                |   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)      |
|                |   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86) |
|                |   result: 0                                                                                                                 |
| -------------------------------------------------------------------------------------------------------------------------------------------- |

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                             Thread 1                                                              |                                                            Thread 2                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                                                                   | increment(): 0                                                                                                                 |
|                                                                                                                                   |   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)          |
|                                                                                                                                   |   switch                                                                                                                       |
| increment(): 0                                                                                                                    |                                                                                                                                |
|   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)             |                                                                                                                                |
|   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)            |                                                                                                                                |
|   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86)       |                                                                                                                                |
|     put(1,2): null at JdkUnsafeTraceRepresentationTest.actionsJustForTrace(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:102) |                                                                                                                                |
|       putVal(1,2,false): null at ConcurrentHashMap.put(ConcurrentHashMap.java:1006)                                               |                                                                                                                                |
|         table.READ: null at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1014)                                                 |                                                                                                                                |
|         initTable(): Node[]#1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1017)                                            |                                                                                                                                |
|           table.READ: null at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2293)                                            |                                                                                                                                |
|           sizeCtl.READ: 0 at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2294)                                             |                                                                                                                                |
|           compareAndSetInt(0,-1): true at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2296)                                |                                                                                                                                |
|           table.READ: null at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2298)                                            |                                                                                                                                |
|           table.WRITE(Node[]#1) at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2302)                                       |                                                                                                                                |
|           sizeCtl.WRITE(12) at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2306)                                           |                                                                                                                                |
|         tabAt(Node[]#1,1): null at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1018)                                          |                                                                                                                                |
|           getReferenceAcquire(): null at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:760)                                      |                                                                                                                                |
|         casTabAt(Node[]#1,1,null,Node#1): true at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1019)                           |                                                                                                                                |
|           compareAndSetReference(null,Node#1): true at ConcurrentHashMap.casTabAt(ConcurrentHashMap.java:765)                     |                                                                                                                                |
|         addCount(1,0) at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1075)                                                    |                                                                                                                                |
|           counterCells.READ: null at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2326)                                      |                                                                                                                                |
|           baseCount.READ: 0 at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2326)                                            |                                                                                                                                |
|           compareAndSetLong(0,1): true at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2327)                                 |                                                                                                                                |
|           sizeCtl.READ: 12 at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2343)                                             |                                                                                                                                |
|   result: 0                                                                                                                       |                                                                                                                                |
|                                                                                                                                   |   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)         |
|                                                                                                                                   |   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86)    |
|                                                                                                                                   |     put(1,2): 2 at JdkUnsafeTraceRepresentationTest.actionsJustForTrace(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:102) |
|                                                                                                                                   |       putVal(1,2,false): 2 at ConcurrentHashMap.put(ConcurrentHashMap.java:1006)                                               |
|                                                                                                                                   |         table.READ: Node[]#1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1014)                                          |
|                                                                                                                                   |         tabAt(Node[]#1,1): Node#1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1018)                                     |
|                                                                                                                                   |           getReferenceAcquire(): Node#1 at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:760)                                 |
|                                                                                                                                   |         MONITORENTER at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1031)                                                  |
|                                                                                                                                   |         tabAt(Node[]#1,1): Node#1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1032)                                     |
|                                                                                                                                   |           getReferenceAcquire(): Node#1 at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:760)                                 |
|                                                                                                                                   |         MONITOREXIT at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1065)                                                   |
|                                                                                                                                   |   result: 0                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
