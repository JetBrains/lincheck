= Invalid execution results =
| ------------------------------- |
|    Thread 1    |    Thread 2    |
| ------------------------------- |
| increment(): 0 | increment(): 0 |
| ------------------------------- |

The following interleaving leads to the error:
| -------------------------------------------------------------------------------------------------------------------------------------------- |
|    Thread 1    |                                                          Thread 2                                                           |
| -------------------------------------------------------------------------------------------------------------------------------------------- |
|                | increment(): 0                                                                                                              |
|                |   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)       |
|                |   switch                                                                                                                    |
| increment(): 0 |                                                                                                                             |
|                |   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)      |
|                |   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86) |
|                |   result: 0                                                                                                                 |
| -------------------------------------------------------------------------------------------------------------------------------------------- |

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                             Thread 1                                                              |                                                            Thread 2                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                                                                   | increment(): 0                                                                                                                 |
|                                                                                                                                   |   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)          |
|                                                                                                                                   |   switch                                                                                                                       |
| increment(): 0                                                                                                                    |                                                                                                                                |
|   counter.READ: 0 at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)             |                                                                                                                                |
|   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)            |                                                                                                                                |
|   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86)       |                                                                                                                                |
|     put(1,2): null at JdkUnsafeTraceRepresentationTest.actionsJustForTrace(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:101) |                                                                                                                                |
|       putVal(1,2,false): null at ConcurrentHashMap.put(ConcurrentHashMap.java:1011)                                               |                                                                                                                                |
|         table.READ: null at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1019)                                                 |                                                                                                                                |
|         initTable(): Node[]@1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1022)                                            |                                                                                                                                |
|           table.READ: null at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2298)                                            |                                                                                                                                |
|           sizeCtl.READ: 0 at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2299)                                             |                                                                                                                                |
|           compareAndSetInt(0,-1): true at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2301)                                |                                                                                                                                |
|           table.READ: null at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2303)                                            |                                                                                                                                |
|           table.WRITE(Node[]@1) at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2307)                                       |                                                                                                                                |
|           sizeCtl.WRITE(12) at ConcurrentHashMap.initTable(ConcurrentHashMap.java:2311)                                           |                                                                                                                                |
|         tabAt(Node[]@1,1): null at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1023)                                          |                                                                                                                                |
|           getReferenceAcquire(): null at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:766)                                      |                                                                                                                                |
|         casTabAt(Node[]@1,1,null,Node@1): true at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1024)                           |                                                                                                                                |
|           compareAndSetReference(null,Node@1): true at ConcurrentHashMap.casTabAt(ConcurrentHashMap.java:771)                     |                                                                                                                                |
|         addCount(1,0) at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1080)                                                    |                                                                                                                                |
|           counterCells.READ: null at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2331)                                      |                                                                                                                                |
|           baseCount.READ: 0 at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2331)                                            |                                                                                                                                |
|           compareAndSetLong(0,1): true at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2332)                                 |                                                                                                                                |
|           sizeCtl.READ: 12 at ConcurrentHashMap.addCount(ConcurrentHashMap.java:2348)                                             |                                                                                                                                |
|   result: 0                                                                                                                       |                                                                                                                                |
|                                                                                                                                   |   counter.WRITE(1) at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:85)         |
|                                                                                                                                   |   actionsJustForTrace() at JdkUnsafeTraceRepresentationTest.increment(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:86)    |
|                                                                                                                                   |     put(1,2): 2 at JdkUnsafeTraceRepresentationTest.actionsJustForTrace(UnsafeUpdaterVarHandleTraceRepresentationTests.kt:101) |
|                                                                                                                                   |       putVal(1,2,false): 2 at ConcurrentHashMap.put(ConcurrentHashMap.java:1011)                                               |
|                                                                                                                                   |         table.READ: Node[]@1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1019)                                          |
|                                                                                                                                   |         tabAt(Node[]@1,1): Node@1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1023)                                     |
|                                                                                                                                   |           getReferenceAcquire(): Node@1 at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:766)                                 |
|                                                                                                                                   |         MONITORENTER at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1036)                                                  |
|                                                                                                                                   |         tabAt(Node[]@1,1): Node@1 at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1037)                                     |
|                                                                                                                                   |           getReferenceAcquire(): Node@1 at ConcurrentHashMap.tabAt(ConcurrentHashMap.java:766)                                 |
|                                                                                                                                   |         MONITOREXIT at ConcurrentHashMap.putVal(ConcurrentHashMap.java:1070)                                                   |
|                                                                                                                                   |   result: 0                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
