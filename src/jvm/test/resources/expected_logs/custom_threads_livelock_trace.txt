= The execution has hung =
| ------------------ |
|      Thread 1      |
| ------------------ |
| livelock(): <hung> |
| ------------------ |


The following interleaving leads to the error:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                               Thread 1                                                |                                                                                            Thread 2                                                                                            |                                                                                            Thread 3                                                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| livelock(): <hung>                                                                                    |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   Thread#2.start() at CustomThreadsRepresentationTest.livelock(CustomThreadsRepresentationTest.kt:95) |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   Thread#3.start() at CustomThreadsRepresentationTest.livelock(CustomThreadsRepresentationTest.kt:95) |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   switch (reason: waiting for Thread 2 to finish)                                                     |                                                                                                                                                                                                |                                                                                                                                                                                                |
|                                                                                                       |                                                                                                                                                                                                | run()                                                                                                                                                                                          |
|                                                                                                       |                                                                                                                                                                                                |   SpinLockTestKt.withLock(SpinLock#1,CustomThreadsRepresentationTest$livelock$t2$1$1) at CustomThreadsRepresentationTest.livelock$lambda$6(CustomThreadsRepresentationTest.kt:88)              |
|                                                                                                       |                                                                                                                                                                                                |     SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                           |
|                                                                                                       |                                                                                                                                                                                                |     switch                                                                                                                                                                                     |
|                                                                                                       | run()                                                                                                                                                                                          |                                                                                                                                                                                                |
|                                                                                                       |   SpinLockTestKt.withLock(SpinLock#2,CustomThreadsRepresentationTest$livelock$t1$1$1) at CustomThreadsRepresentationTest.livelock$lambda$5(CustomThreadsRepresentationTest.kt:81)              |                                                                                                                                                                                                |
|                                                                                                       |     SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                           |                                                                                                                                                                                                |
|                                                                                                       |     CustomThreadsRepresentationTest$livelock$t1$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                    |                                                                                                                                                                                                |
|                                                                                                       |       invoke() at CustomThreadsRepresentationTest$livelock$t1$1$1.invoke(CustomThreadsRepresentationTest.kt:81)                                                                                |                                                                                                                                                                                                |
|                                                                                                       |         SpinLockTestKt.withLock(SpinLock#1,CustomThreadsRepresentationTest$livelock$t1$1$1$1) at CustomThreadsRepresentationTest$livelock$t1$1$1.invoke(CustomThreadsRepresentationTest.kt:82) |                                                                                                                                                                                                |
|                                                                                                       |           SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                     |                                                                                                                                                                                                |
|                                                                                                       |             /* The following events repeat infinitely: */                                                                                                                                      |                                                                                                                                                                                                |
|                                                                                                       |         ┌╶> AtomicBoolean#1.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                              |                                                                                                                                                                                                |
|                                                                                                       |         └╶╶ switch (reason: active lock detected)                                                                                                                                              |                                                                                                                                                                                                |
|                                                                                                       |                                                                                                                                                                                                |     CustomThreadsRepresentationTest$livelock$t2$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                    |
|                                                                                                       |                                                                                                                                                                                                |       invoke() at CustomThreadsRepresentationTest$livelock$t2$1$1.invoke(CustomThreadsRepresentationTest.kt:88)                                                                                |
|                                                                                                       |                                                                                                                                                                                                |         SpinLockTestKt.withLock(SpinLock#2,CustomThreadsRepresentationTest$livelock$t2$1$1$1) at CustomThreadsRepresentationTest$livelock$t2$1$1.invoke(CustomThreadsRepresentationTest.kt:89) |
|                                                                                                       |                                                                                                                                                                                                |           SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                     |
|                                                                                                       |                                                                                                                                                                                                |             /* The following events repeat infinitely: */                                                                                                                                      |
|                                                                                                       |                                                                                                                                                                                                |         ┌╶> AtomicBoolean#2.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                              |
|                                                                                                       |                                                                                                                                                                                                |         └╶╶ switch (reason: active lock detected)                                                                                                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock

Detailed trace:
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                               Thread 1                                                |                                                                                            Thread 2                                                                                            |                                                                                            Thread 3                                                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| livelock(): <hung>                                                                                    |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   Thread#2.start() at CustomThreadsRepresentationTest.livelock(CustomThreadsRepresentationTest.kt:95) |                                                                                                                                                                                                |                                                                                                                                                                                                |
|     start Thread 2                                                                                    |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   Thread#3.start() at CustomThreadsRepresentationTest.livelock(CustomThreadsRepresentationTest.kt:95) |                                                                                                                                                                                                |                                                                                                                                                                                                |
|     start Thread 3                                                                                    |                                                                                                                                                                                                |                                                                                                                                                                                                |
|   switch (reason: waiting for Thread 2 to finish)                                                     |                                                                                                                                                                                                |                                                                                                                                                                                                |
|                                                                                                       |                                                                                                                                                                                                | run()                                                                                                                                                                                          |
|                                                                                                       |                                                                                                                                                                                                |   SpinLockTestKt.withLock(SpinLock#1,CustomThreadsRepresentationTest$livelock$t2$1$1) at CustomThreadsRepresentationTest.livelock$lambda$6(CustomThreadsRepresentationTest.kt:88)              |
|                                                                                                       |                                                                                                                                                                                                |     SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                           |
|                                                                                                       |                                                                                                                                                                                                |       AtomicBoolean#1.compareAndSet(false,true): true at SpinLock.lock(SpinLockTest.kt:83)                                                                                                     |
|                                                                                                       |                                                                                                                                                                                                |     switch                                                                                                                                                                                     |
|                                                                                                       | run()                                                                                                                                                                                          |                                                                                                                                                                                                |
|                                                                                                       |   SpinLockTestKt.withLock(SpinLock#2,CustomThreadsRepresentationTest$livelock$t1$1$1) at CustomThreadsRepresentationTest.livelock$lambda$5(CustomThreadsRepresentationTest.kt:81)              |                                                                                                                                                                                                |
|                                                                                                       |     SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                           |                                                                                                                                                                                                |
|                                                                                                       |       AtomicBoolean#2.compareAndSet(false,true): true at SpinLock.lock(SpinLockTest.kt:83)                                                                                                     |                                                                                                                                                                                                |
|                                                                                                       |     CustomThreadsRepresentationTest$livelock$t1$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                    |                                                                                                                                                                                                |
|                                                                                                       |       invoke() at CustomThreadsRepresentationTest$livelock$t1$1$1.invoke(CustomThreadsRepresentationTest.kt:81)                                                                                |                                                                                                                                                                                                |
|                                                                                                       |         SpinLockTestKt.withLock(SpinLock#1,CustomThreadsRepresentationTest$livelock$t1$1$1$1) at CustomThreadsRepresentationTest$livelock$t1$1$1.invoke(CustomThreadsRepresentationTest.kt:82) |                                                                                                                                                                                                |
|                                                                                                       |           SpinLock#1.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                     |                                                                                                                                                                                                |
|                                                                                                       |             /* The following events repeat infinitely: */                                                                                                                                      |                                                                                                                                                                                                |
|                                                                                                       |         ┌╶> AtomicBoolean#1.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                              |                                                                                                                                                                                                |
|                                                                                                       |         └╶╶ switch (reason: active lock detected)                                                                                                                                              |                                                                                                                                                                                                |
|                                                                                                       |                                                                                                                                                                                                |     CustomThreadsRepresentationTest$livelock$t2$1$1.invoke() at SpinLockTestKt.withLock(SpinLockTest.kt:96)                                                                                    |
|                                                                                                       |                                                                                                                                                                                                |       invoke() at CustomThreadsRepresentationTest$livelock$t2$1$1.invoke(CustomThreadsRepresentationTest.kt:88)                                                                                |
|                                                                                                       |                                                                                                                                                                                                |         SpinLockTestKt.withLock(SpinLock#2,CustomThreadsRepresentationTest$livelock$t2$1$1$1) at CustomThreadsRepresentationTest$livelock$t2$1$1.invoke(CustomThreadsRepresentationTest.kt:89) |
|                                                                                                       |                                                                                                                                                                                                |           SpinLock#2.lock() at SpinLockTestKt.withLock(SpinLockTest.kt:94)                                                                                                                     |
|                                                                                                       |                                                                                                                                                                                                |             /* The following events repeat infinitely: */                                                                                                                                      |
|                                                                                                       |                                                                                                                                                                                                |         ┌╶> AtomicBoolean#2.compareAndSet(false,true): false at SpinLock.lock(SpinLockTest.kt:83)                                                                                              |
|                                                                                                       |                                                                                                                                                                                                |         └╶╶ switch (reason: active lock detected)                                                                                                                                              |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
All unfinished threads are in deadlock
