= Invalid execution results =
| ---------------------------------------- |
|                 Thread 1                 |
| ---------------------------------------- |
| kotlinThread(): IllegalStateException #1 |
| ---------------------------------------- |

---
The number next to an exception name helps you find its stack trace provided after the interleaving section
---

The following interleaving leads to the error:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                             Thread 1                                                                             | Thread 2 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| kotlinThread(): IllegalStateException #1                                                                                                                         |          |
|   ThreadsKt.thread$default(false,false,null,null,0,t$1,31,null): thread$1 at CustomThreadsRepresentationTest.kotlinThread(CustomThreadsRepresentationTest.kt:61) |          |
|   switch (reason: waiting for Thread 2 to finish)                                                                                                                |          |
|                                                                                                                                                                  | run()    |
|   thread$1.join() at CustomThreadsRepresentationTest.kotlinThread(CustomThreadsRepresentationTest.kt:64)                                                         |          |
|   result: IllegalStateException #1                                                                                                                               |          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Exception stack traces:
#1: java.lang.IllegalStateException: Check failed.
	at org.jetbrains.kotlinx.lincheck_test.representation.CustomThreadsRepresentationTest.kotlinThread(CustomThreadsRepresentationTest.kt:65)
	at java.base/java.lang.Thread.run(Unknown Source)

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                             Thread 1                                                                             |                                                                         Thread 2                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| kotlinThread(): IllegalStateException #1                                                                                                                         |                                                                                                                                                          |
|   ThreadsKt.thread$default(false,false,null,null,0,t$1,31,null): thread$1 at CustomThreadsRepresentationTest.kotlinThread(CustomThreadsRepresentationTest.kt:61) |                                                                                                                                                          |
|     ThreadsKt.thread(true,false,null,null,-1,t$1): thread$1 at ThreadsKt.thread$default(Thread.kt:20)                                                            |                                                                                                                                                          |
|       thread$1.start() at ThreadsKt.thread(Thread.kt:42)                                                                                                         |                                                                                                                                                          |
|         start Thread 2                                                                                                                                           |                                                                                                                                                          |
|   switch (reason: waiting for Thread 2 to finish)                                                                                                                |                                                                                                                                                          |
|                                                                                                                                                                  | run()                                                                                                                                                    |
|                                                                                                                                                                  |   t$1.invoke(): Unit#1 at ThreadsKt$thread$thread$1.run(Thread.kt:30)                                                                                    |
|                                                                                                                                                                  |     invoke() at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:61)                                           |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.READ: 0 at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62)  |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.WRITE(1) at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62) |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.READ: 1 at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62)  |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.WRITE(2) at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62) |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.READ: 2 at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62)  |
|                                                                                                                                                                  |       CustomThreadsRepresentationTest#1.value.WRITE(3) at CustomThreadsRepresentationTest$kotlinThread$t$1.invoke(CustomThreadsRepresentationTest.kt:62) |
|                                                                                                                                                                  |   result: void                                                                                                                                           |
|   thread$1.join() at CustomThreadsRepresentationTest.kotlinThread(CustomThreadsRepresentationTest.kt:64)                                                         |                                                                                                                                                          |
|     join Thread 2                                                                                                                                                |                                                                                                                                                          |
|   result: IllegalStateException #1                                                                                                                               |                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
