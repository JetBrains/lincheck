= Invalid execution results =
| ----------------------- |
|  Thread 1   | Thread 2  |
| ----------------------- |
| foo(): void | bar(): -1 |
| ----------------------- |

The following interleaving leads to the error:
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                             Thread 1                                                             |                    Thread 2                     |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                  | bar(): -1                                       |
|                                                                                                                                  |   ResultKt.throwOnFailure(null)                 |
|                                                                                                                                  |   barStarted = true                             |
|                                                                                                                                  |   lock(null) [suspendable: Continuation#1]      |
|                                                                                                                                  |   counter ➜ 0                                   |
|                                                                                                                                  |   counter = 1                                   |
|                                                                                                                                  |   unlock(null)                                  |
|                                                                                                                                  |     isLocked(): true                            |
|                                                                                                                                  |     owner.get(): null                           |
|                                                                                                                                  |     MutexKt.getNO_OWNER(): <NO_OWNER>           |
|                                                                                                                                  |     MutexKt.getNO_OWNER(): <NO_OWNER>           |
|                                                                                                                                  |     switch                                      |
| foo()                                                                                                                            |                                                 |
|   ResultKt.throwOnFailure(null)                                                                                                  |                                                 |
|   barStarted ➜ true                                                                                                              |                                                 |
|   canEnterForbiddenBlock = true                                                                                                  |                                                 |
|   lock(null) [suspendable: Continuation#2]: COROUTINE_SUSPENDED                                                                  |                                                 |
|     tryLock(null): false                                                                                                         |                                                 |
|     lockSuspend(null) [suspendable: Continuation#2]: COROUTINE_SUSPENDED                                                         |                                                 |
|       CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#3): Continuation#4                               |                                                 |
|       acquire() [suspendable: Continuation#5]                                                                                    |                                                 |
|       cancellable.getResult(): COROUTINE_SUSPENDED                                                                               |                                                 |
|         isReusable(): false                                                                                                      |                                                 |
|         trySuspend(): true                                                                                                       |                                                 |
|         getParentHandle(): null                                                                                                  |                                                 |
|         installParentHandle(): ChildContinuation#1                                                                               |                                                 |
|           getContext(): CombinedContext#1                                                                                        |                                                 |
|           context.get(Key#1): JobImpl#1                                                                                          |                                                 |
|           getAsHandler()                                                                                                         |                                                 |
|           Job.DefaultImpls.invokeOnCompletion$default(JobImpl#1, true, false, ChildContinuation#1, 2, null): ChildContinuation#1 |                                                 |
|           switch                                                                                                                 |                                                 |
|                                                                                                                                  |     owner.compareAndSet(null, <NO_OWNER>): true |
|                                                                                                                                  |     release()                                   |
|                                                                                                                                  |   canEnterForbiddenBlock ➜ true                 |
|                                                                                                                                  |   Boxing.boxInt(-1): -1                         |
|                                                                                                                                  |   result: -1                                    |
|           _parentHandle.compareAndSet(null, ChildContinuation#1): true                                                           |                                                 |
|       DebugProbesKt.probeCoroutineSuspended(Continuation#2)                                                                      |                                                 |
|   ResultKt.throwOnFailure(Unit)                                                                                                  |                                                 |
|   counter ➜ 1                                                                                                                    |                                                 |
|   counter = 2                                                                                                                    |                                                 |
|   unlock(null)                                                                                                                   |                                                 |
|   canEnterForbiddenBlock = false                                                                                                 |                                                 |
|   result: void                                                                                                                   |                                                 |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

Detailed trace:
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                       Thread 1                                                                                                       |                                                                                         Thread 2                                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                                                                                                      | bar(): -1                                                                                                                                                                                |
|                                                                                                                                                                                                                      |   ResultKt.throwOnFailure(null) at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:36)                                                                           |
|                                                                                                                                                                                                                      |   barStarted = true at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:38)                                                                                       |
|                                                                                                                                                                                                                      |   lock(null) [suspendable: Continuation#1] at MutexKt.<unknown method>(Mutex.kt:125)                                                                                                     |
|                                                                                                                                                                                                                      |     tryLock(null): true at MutexImpl.lock(Mutex.kt:0)                                                                                                                                    |
|                                                                                                                                                                                                                      |       tryLockImpl(null): 0 at MutexImpl.<unknown method>(Mutex.kt:183)                                                                                                                   |
|                                                                                                                                                                                                                      |         tryAcquire(): true at MutexImpl.<unknown method>(Mutex.kt:189)                                                                                                                   |
|                                                                                                                                                                                                                      |           _availablePermits.get(): 1 at SemaphoreImpl.<unknown method>(Semaphore.kt:159)                                                                                                 |
|                                                                                                                                                                                                                      |           _availablePermits.compareAndSet(1, 0): true at SemaphoreImpl.<unknown method>(Semaphore.kt:171)                                                                                |
|                                                                                                                                                                                                                      |         DebugKt.getASSERTIONS_ENABLED(): true at MutexImpl.<unknown method>(Mutex.kt:190)                                                                                                |
|                                                                                                                                                                                                                      |         owner.get(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:190)                                                                                                              |
|                                                                                                                                                                                                                      |         MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:190)                                                                                                    |
|                                                                                                                                                                                                                      |         owner.set(null) at MutexImpl.<unknown method>(Mutex.kt:191)                                                                                                                      |
|                                                                                                                                                                                                                      |   counter ➜ 0 at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:40)                                                                                             |
|                                                                                                                                                                                                                      |   counter = 1 at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:40)                                                                                             |
|                                                                                                                                                                                                                      |   unlock(null) at MutexKt.<unknown method>(Mutex.kt:129)                                                                                                                                 |
|                                                                                                                                                                                                                      |     isLocked(): true at MutexImpl.<unknown method>(Mutex.kt:213)                                                                                                                         |
|                                                                                                                                                                                                                      |       getAvailablePermits(): 0 at MutexImpl.<unknown method>(Mutex.kt:149)                                                                                                               |
|                                                                                                                                                                                                                      |         _availablePermits.get(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:152)                                                                                                   |
|                                                                                                                                                                                                                      |         Math.max(0, 0): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:152)                                                                                                            |
|                                                                                                                                                                                                                      |     owner.get(): null at MutexImpl.<unknown method>(Mutex.kt:215)                                                                                                                        |
|                                                                                                                                                                                                                      |     MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:216)                                                                                                        |
|                                                                                                                                                                                                                      |     MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:220)                                                                                                        |
|                                                                                                                                                                                                                      |     switch                                                                                                                                                                               |
| foo()                                                                                                                                                                                                                |                                                                                                                                                                                          |
|   ResultKt.throwOnFailure(null) at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:27)                                                                                                       |                                                                                                                                                                                          |
|   barStarted ➜ true at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:29)                                                                                                                   |                                                                                                                                                                                          |
|   canEnterForbiddenBlock = true at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:29)                                                                                                       |                                                                                                                                                                                          |
|   lock(null) [suspendable: Continuation#2]: COROUTINE_SUSPENDED at MutexKt.<unknown method>(Mutex.kt:125)                                                                                                            |                                                                                                                                                                                          |
|     tryLock(null): false at MutexImpl.lock(Mutex.kt:0)                                                                                                                                                               |                                                                                                                                                                                          |
|       tryLockImpl(null): 1 at MutexImpl.<unknown method>(Mutex.kt:183)                                                                                                                                               |                                                                                                                                                                                          |
|         tryAcquire(): false at MutexImpl.<unknown method>(Mutex.kt:189)                                                                                                                                              |                                                                                                                                                                                          |
|           _availablePermits.get(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:159)                                                                                                                             |                                                                                                                                                                                          |
|     lockSuspend(null) [suspendable: Continuation#2]: COROUTINE_SUSPENDED at MutexImpl.lock(Mutex.kt:0)                                                                                                               |                                                                                                                                                                                          |
|       CancellableContinuationKt.getOrCreateCancellableContinuation(Continuation#3): Continuation#4 at CancellableContinuationKt.<unknown method>(CancellableContinuation.kt:333)                                     |                                                                                                                                                                                          |
|       acquire() [suspendable: Continuation#5] at MutexImpl.<unknown method>(Mutex.kt:177)                                                                                                                            |                                                                                                                                                                                          |
|         decPermits(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:207)                                                                                                                                          |                                                                                                                                                                                          |
|           _availablePermits.getAndDecrement(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:237)                                                                                                                 |                                                                                                                                                                                          |
|         addAcquireToQueue(Continuation#5): true at SemaphoreImpl.<unknown method>(Semaphore.kt:199)                                                                                                                  |                                                                                                                                                                                          |
|           tail.get(): SemaphoreSegment#1 at SemaphoreImpl.<unknown method>(Semaphore.kt:286)                                                                                                                         |                                                                                                                                                                                          |
|           enqIdx.getAndIncrement(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:287)                                                                                                                            |                                                                                                                                                                                          |
|           SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreImpl.<unknown method>(Semaphore.kt:289)                                                                                                                      |                                                                                                                                                                                          |
|           ConcurrentLinkedListKt.findSegmentInternal(SemaphoreSegment#1, 0, createNewSegment$1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:73)                           |                                                                                                                                                                                          |
|             cur.isRemoved(): false at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:26)                                                                                                            |                                                                                                                                                                                          |
|               cleanedAndPointers.get(): 131072 at Segment.<unknown method>(ConcurrentLinkedList.kt:222)                                                                                                              |                                                                                                                                                                                          |
|               getNumberOfSlots(): 16 at Segment.<unknown method>(ConcurrentLinkedList.kt:222)                                                                                                                        |                                                                                                                                                                                          |
|                 SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreSegment.<unknown method>(Semaphore.kt:364)                                                                                                             |                                                                                                                                                                                          |
|             SegmentOrClosed.constructor-impl(SemaphoreSegment#1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:38)                                                          |                                                                                                                                                                                          |
|           SegmentOrClosed.isClosed(SemaphoreSegment#1): false at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                                                                 |                                                                                                                                                                                          |
|             ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.isClosed-impl(ConcurrentLinkedList.kt:261)                                                                                               |                                                                                                                                                                                          |
|           SegmentOrClosed.getSegment(SemaphoreSegment#1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                                                  |                                                                                                                                                                                          |
|             ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.getSegment-impl(ConcurrentLinkedList.kt:263)                                                                                             |                                                                                                                                                                                          |
|           tail.get(): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                                                                                      |                                                                                                                                                                                          |
|           SegmentOrClosed.getSegment(SemaphoreSegment#1): SemaphoreSegment#1 at SemaphoreImpl.<unknown method>(Semaphore.kt:290)                                                                                     |                                                                                                                                                                                          |
|             ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.getSegment-impl(ConcurrentLinkedList.kt:263)                                                                                             |                                                                                                                                                                                          |
|           SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreImpl.<unknown method>(Semaphore.kt:291)                                                                                                                      |                                                                                                                                                                                          |
|           head.cas() at SemaphoreImpl.<unknown method>(Semaphore.kt:293)                                                                                                                                             |                                                                                                                                                                                          |
|             getAcquirers(): AtomicReferenceArray#1 at SemaphoreSegment.<unknown method>(Semaphore.kt:375)                                                                                                            |                                                                                                                                                                                          |
|             acquirers[0].compareAndSet(null, Continuation#5): true at SemaphoreSegment.<unknown method>(Semaphore.kt:375)                                                                                            |                                                                                                                                                                                          |
|           waiter.invokeOnCancellation(SemaphoreSegment#1, 0) at SemaphoreImpl.<unknown method>(Semaphore.kt:294)                                                                                                     |                                                                                                                                                                                          |
|             cont.invokeOnCancellation(SemaphoreSegment#1, 0) at MutexImpl.CancellableContinuationWithOwner.invokeOnCancellation(Mutex.kt:0)                                                                          |                                                                                                                                                                                          |
|               _decisionAndIndex.get(): 536870911 at CancellableContinuationImpl.invokeOnCancellation(CancellableContinuationImpl.kt:0)                                                                               |                                                                                                                                                                                          |
|               getIndex() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:389)                                                                                                         |                                                                                                                                                                                          |
|               getDecision() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:392)                                                                                                      |                                                                                                                                                                                          |
|               decisionAndIndex() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:392)                                                                                                 |                                                                                                                                                                                          |
|               _decisionAndIndex.compareAndSet(536870911, 0): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:392)                                                                |                                                                                                                                                                                          |
|               invokeOnCancellationImpl(SemaphoreSegment#1) at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:394)                                                                       |                                                                                                                                                                                          |
|                 DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:403)                                                                            |                                                                                                                                                                                          |
|                 _state.get(): Active#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:403)                                                                                           |                                                                                                                                                                                          |
|                 _state.compareAndSet(Active#1, SemaphoreSegment#1): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:407)                                                         |                                                                                                                                                                                          |
|       cancellable.getResult(): COROUTINE_SUSPENDED at CancellableContinuationKt.<unknown method>(CancellableContinuation.kt:342)                                                                                     |                                                                                                                                                                                          |
|         isReusable(): false at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:297)                                                                                                      |                                                                                                                                                                                          |
|           resumeMode ➜ 1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:141)                                                                                                         |                                                                                                                                                                                          |
|           DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:141)                                                                              |                                                                                                                                                                                          |
|         trySuspend(): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:300)                                                                                                       |                                                                                                                                                                                          |
|           _decisionAndIndex.get(): 0 at CancellableContinuationImpl.trySuspend(CancellableContinuationImpl.kt:0)                                                                                                     |                                                                                                                                                                                          |
|           getDecision() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:277)                                                                                                          |                                                                                                                                                                                          |
|           getIndex() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:278)                                                                                                             |                                                                                                                                                                                          |
|           decisionAndIndex() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:278)                                                                                                     |                                                                                                                                                                                          |
|           _decisionAndIndex.compareAndSet(0, 536870912): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:278)                                                                    |                                                                                                                                                                                          |
|         getParentHandle(): null at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:310)                                                                                                  |                                                                                                                                                                                          |
|           _parentHandle.get(): null at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:106)                                                                                              |                                                                                                                                                                                          |
|         installParentHandle(): ChildContinuation#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:311)                                                                               |                                                                                                                                                                                          |
|           getContext(): CombinedContext#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:346)                                                                                        |                                                                                                                                                                                          |
|           context.get(Key#1): JobImpl#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:346)                                                                                          |                                                                                                                                                                                          |
|             CoroutineContext.Element.DefaultImpls.get(JobImpl#1, Key#1): JobImpl#1 at Job.DefaultImpls.get(Job.kt:112)                                                                                               |                                                                                                                                                                                          |
|               getKey(): Key#1 at CoroutineContext.Element.DefaultImpls.get(CoroutineContext.kt:67)                                                                                                                   |                                                                                                                                                                                          |
|           getAsHandler() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:350)                                                                                                         |                                                                                                                                                                                          |
|           Job.DefaultImpls.invokeOnCompletion$default(JobImpl#1, true, false, ChildContinuation#1, 2, null): ChildContinuation#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:348) |                                                                                                                                                                                          |
|             JobImpl#1.invokeOnCompletion(true, true, ChildContinuation#1): ChildContinuation#1 at Job.DefaultImpls.invokeOnCompletion$default(Job.kt:357)                                                            |                                                                                                                                                                                          |
|           switch                                                                                                                                                                                                     |                                                                                                                                                                                          |
|                                                                                                                                                                                                                      |     owner.compareAndSet(null, <NO_OWNER>): true at MutexImpl.<unknown method>(Mutex.kt:220)                                                                                              |
|                                                                                                                                                                                                                      |     release() at MutexImpl.<unknown method>(Mutex.kt:222)                                                                                                                                |
|                                                                                                                                                                                                                      |       _availablePermits.getAndIncrement(): -1 at SemaphoreImpl.<unknown method>(Semaphore.kt:250)                                                                                        |
|                                                                                                                                                                                                                      |       tryResumeNextFromQueue(): true at SemaphoreImpl.<unknown method>(Semaphore.kt:265)                                                                                                 |
|                                                                                                                                                                                                                      |         head.get(): SemaphoreSegment#1 at SemaphoreImpl.<unknown method>(Semaphore.kt:319)                                                                                               |
|                                                                                                                                                                                                                      |         deqIdx.getAndIncrement(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:320)                                                                                                  |
|                                                                                                                                                                                                                      |         SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreImpl.<unknown method>(Semaphore.kt:321)                                                                                            |
|                                                                                                                                                                                                                      |         ConcurrentLinkedListKt.findSegmentInternal(SemaphoreSegment#1, 0, createNewSegment$1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:73) |
|                                                                                                                                                                                                                      |           cur.isRemoved(): false at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:26)                                                                                  |
|                                                                                                                                                                                                                      |             cleanedAndPointers.get(): 131072 at Segment.<unknown method>(ConcurrentLinkedList.kt:222)                                                                                    |
|                                                                                                                                                                                                                      |             getNumberOfSlots(): 16 at Segment.<unknown method>(ConcurrentLinkedList.kt:222)                                                                                              |
|                                                                                                                                                                                                                      |               SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreSegment.<unknown method>(Semaphore.kt:364)                                                                                   |
|                                                                                                                                                                                                                      |           SegmentOrClosed.constructor-impl(SemaphoreSegment#1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:38)                                |
|                                                                                                                                                                                                                      |         SegmentOrClosed.isClosed(SemaphoreSegment#1): false at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                                       |
|                                                                                                                                                                                                                      |           ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.isClosed-impl(ConcurrentLinkedList.kt:261)                                                                     |
|                                                                                                                                                                                                                      |         SegmentOrClosed.getSegment(SemaphoreSegment#1): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                        |
|                                                                                                                                                                                                                      |           ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.getSegment-impl(ConcurrentLinkedList.kt:263)                                                                   |
|                                                                                                                                                                                                                      |         head.get(): SemaphoreSegment#1 at ConcurrentLinkedListKt.<unknown method>(ConcurrentLinkedList.kt:74)                                                                            |
|                                                                                                                                                                                                                      |         SegmentOrClosed.getSegment(SemaphoreSegment#1): SemaphoreSegment#1 at SemaphoreImpl.<unknown method>(Semaphore.kt:324)                                                           |
|                                                                                                                                                                                                                      |           ConcurrentLinkedListKt.getCLOSED(): <CLOSED> at SegmentOrClosed.getSegment-impl(ConcurrentLinkedList.kt:263)                                                                   |
|                                                                                                                                                                                                                      |         segment.cleanPrev() at SemaphoreImpl.<unknown method>(Semaphore.kt:325)                                                                                                          |
|                                                                                                                                                                                                                      |           _prev.lazySet(null) at ConcurrentLinkedListNode.<unknown method>(ConcurrentLinkedList.kt:132)                                                                                  |
|                                                                                                                                                                                                                      |         SemaphoreKt.getSEGMENT_SIZE(): 16 at SemaphoreImpl.<unknown method>(Semaphore.kt:327)                                                                                            |
|                                                                                                                                                                                                                      |         SemaphoreKt.getPERMIT(): <PERMIT> at SemaphoreImpl.<unknown method>(Semaphore.kt:328)                                                                                            |
|                                                                                                                                                                                                                      |         head.getAndSet() at SemaphoreImpl.<unknown method>(Semaphore.kt:328)                                                                                                             |
|                                                                                                                                                                                                                      |           getAcquirers(): AtomicReferenceArray#1 at SemaphoreSegment.<unknown method>(Semaphore.kt:378)                                                                                  |
|                                                                                                                                                                                                                      |           acquirers[0].getAndSet(<PERMIT>): Continuation#5 at SemaphoreSegment.<unknown method>(Semaphore.kt:378)                                                                        |
|                                                                                                                                                                                                                      |         SemaphoreKt.getCANCELLED(): <CANCELLED> at SemaphoreImpl.<unknown method>(Semaphore.kt:339)                                                                                      |
|                                                                                                                                                                                                                      |         tryResumeAcquire(Continuation#5): true at SemaphoreImpl.<unknown method>(Semaphore.kt:340)                                                                                       |
|                                                                                                                                                                                                                      |           $this$tryResumeAcquire.tryResume(Unit, null, onCancellationRelease$1): <RESUME_TOKEN> at SemaphoreImpl.<unknown method>(Semaphore.kt:347)                                      |
|                                                                                                                                                                                                                      |             tryResume(Unit, null, onCancellationRelease$1): <RESUME_TOKEN> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:250)                                  |
|                                                                                                                                                                                                                      |               DebugKt.getASSERTIONS_ENABLED(): true at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:257)                                                         |
|                                                                                                                                                                                                                      |               MutexImpl.getOwner$FU(): AtomicReferenceFieldUpdaterImpl#1 at FakeKt.<unknown method>(fake.kt:1)                                                                           |
|                                                                                                                                                                                                                      |               owner.get(): <NO_OWNER> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:257)                                                                       |
|                                                                                                                                                                                                                      |               MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:257)                                                             |
|                                                                                                                                                                                                                      |               cont.tryResume(Unit, null, token$1): <RESUME_TOKEN> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:258)                                           |
|                                                                                                                                                                                                                      |                 tryResumeImpl(Unit, null, token$1): <RESUME_TOKEN> at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:582)                                   |
|                                                                                                                                                                                                                      |                   _state.get(): SemaphoreSegment#1 at CancellableContinuationImpl.tryResumeImpl(CancellableContinuationImpl.kt:0)                                                        |
|                                                                                                                                                                                                                      |                   resumeMode ➜ 1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:540)                                                                     |
|                                                                                                                                                                                                                      |                   resumedState(SemaphoreSegment#1, Unit, 1, token$1, null): CompletedContinuation#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:540)  |
|                                                                                                                                                                                                                      |                     DispatchedTaskKt.isCancellableMode(1): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:489)                                      |
|                                                                                                                                                                                                                      |                   _state.compareAndSet(SemaphoreSegment#1, CompletedContinuation#1): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:541)            |
|                                                                                                                                                                                                                      |                   detachChildIfNonResuable() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:542)                                                         |
|                                                                                                                                                                                                                      |                     isReusable(): false at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:565)                                                              |
|                                                                                                                                                                                                                      |                       resumeMode ➜ 1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:141)                                                                 |
|                                                                                                                                                                                                                      |                       DispatchedTaskKt.isReusableMode(1): false at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:141)                                      |
|                                                                                                                                                                                                                      |                     detachChild() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:565)                                                                    |
|                                                                                                                                                                                                                      |                       getParentHandle(): null at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:572)                                                        |
|                                                                                                                                                                                                                      |                         _parentHandle.get(): null at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:106)                                                    |
|                                                                                                                                                                                                                      |               DebugKt.getASSERTIONS_ENABLED(): true at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:264)                                                         |
|                                                                                                                                                                                                                      |               MutexImpl.getOwner$FU(): AtomicReferenceFieldUpdaterImpl#1 at FakeKt.<unknown method>(fake.kt:1)                                                                           |
|                                                                                                                                                                                                                      |               owner.get(): <NO_OWNER> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:264)                                                                       |
|                                                                                                                                                                                                                      |               MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:264)                                                             |
|                                                                                                                                                                                                                      |               MutexImpl.getOwner$FU(): AtomicReferenceFieldUpdaterImpl#1 at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:264)                                    |
|                                                                                                                                                                                                                      |               owner.set(null) at MutexImpl.CancellableContinuationWithOwner.<unknown method>(Mutex.kt:265)                                                                               |
|                                                                                                                                                                                                                      |           $this$tryResumeAcquire.completeResume(<RESUME_TOKEN>) at SemaphoreImpl.<unknown method>(Semaphore.kt:349)                                                                      |
|                                                                                                                                                                                                                      |             cont.completeResume(<RESUME_TOKEN>) at MutexImpl.CancellableContinuationWithOwner.completeResume(Mutex.kt:0)                                                                 |
|                                                                                                                                                                                                                      |               DebugKt.getASSERTIONS_ENABLED(): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:589)                                                  |
|                                                                                                                                                                                                                      |               resumeMode ➜ 1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:590)                                                                         |
|                                                                                                                                                                                                                      |               dispatchResume(1) at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:590)                                                                      |
|                                                                                                                                                                                                                      |                 tryResume(): false at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:472)                                                                   |
|                                                                                                                                                                                                                      |                   _decisionAndIndex.get(): 536870912 at CancellableContinuationImpl.tryResume(CancellableContinuationImpl.kt:0)                                                          |
|                                                                                                                                                                                                                      |                   getDecision() at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:287)                                                                      |
|                                                                                                                                                                                                                      |                 DispatchedTaskKt.dispatch(Continuation#4, 1) at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:474)                                         |
|                                                                                                                                                                                                                      |                   DebugKt.getASSERTIONS_ENABLED(): true at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:153)                                                                      |
|                                                                                                                                                                                                                      |                   $this$dispatch.getDelegate(): Continuation#3 at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:154)                                                               |
|                                                                                                                                                                                                                      |                   DispatchedTaskKt.resume(Continuation#4, Continuation#3, false) at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:168)                                             |
|                                                                                                                                                                                                                      |                     $this$resume.takeState(): CompletedContinuation#1 at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:174)                                                        |
|                                                                                                                                                                                                                      |                       getState(): CompletedContinuation#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:168)                                            |
|                                                                                                                                                                                                                      |                         _state.get(): CompletedContinuation#1 at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:108)                                        |
|                                                                                                                                                                                                                      |                     $this$resume.getExceptionalResult(CompletedContinuation#1): null at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:175)                                         |
|                                                                                                                                                                                                                      |                       getExceptionalResult(CompletedContinuation#1): null at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:613)                            |
|                                                                                                                                                                                                                      |                     $this$resume.getSuccessfulResult(CompletedContinuation#1) at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:176)                                                |
|                                                                                                                                                                                                                      |                     Result.constructor-impl(Unit) at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:176)                                                                            |
|                                                                                                                                                                                                                      |                     delegate.resumeWith(Unit) at DispatchedTaskKt.<unknown method>(DispatchedTask.kt:179)                                                                                |
|                                                                                                                                                                                                                      |   canEnterForbiddenBlock ➜ true at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:42)                                                                           |
|                                                                                                                                                                                                                      |   Boxing.boxInt(-1): -1 at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:42)                                                                                   |
|                                                                                                                                                                                                                      |   result: -1                                                                                                                                                                             |
|           _parentHandle.compareAndSet(null, ChildContinuation#1): true at CancellableContinuationImpl.<unknown method>(CancellableContinuationImpl.kt:352)                                                           |                                                                                                                                                                                          |
|       DebugProbesKt.probeCoroutineSuspended(Continuation#2) at CancellableContinuationKt.<unknown method>(CancellableContinuation.kt:332)                                                                            |                                                                                                                                                                                          |
|   ResultKt.throwOnFailure(Unit) at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:27)                                                                                                       |                                                                                                                                                                                          |
|   counter ➜ 1 at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:31)                                                                                                                         |                                                                                                                                                                                          |
|   counter = 2 at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:31)                                                                                                                         |                                                                                                                                                                                          |
|   unlock(null) at MutexKt.<unknown method>(Mutex.kt:129)                                                                                                                                                             |                                                                                                                                                                                          |
|     isLocked(): true at MutexImpl.<unknown method>(Mutex.kt:213)                                                                                                                                                     |                                                                                                                                                                                          |
|       getAvailablePermits(): 0 at MutexImpl.<unknown method>(Mutex.kt:149)                                                                                                                                           |                                                                                                                                                                                          |
|         _availablePermits.get(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:152)                                                                                                                               |                                                                                                                                                                                          |
|         Math.max(0, 0): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:152)                                                                                                                                        |                                                                                                                                                                                          |
|     owner.get(): null at MutexImpl.<unknown method>(Mutex.kt:215)                                                                                                                                                    |                                                                                                                                                                                          |
|     MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:216)                                                                                                                                    |                                                                                                                                                                                          |
|     MutexKt.getNO_OWNER(): <NO_OWNER> at MutexImpl.<unknown method>(Mutex.kt:220)                                                                                                                                    |                                                                                                                                                                                          |
|     owner.compareAndSet(null, <NO_OWNER>): true at MutexImpl.<unknown method>(Mutex.kt:220)                                                                                                                          |                                                                                                                                                                                          |
|     release() at MutexImpl.<unknown method>(Mutex.kt:222)                                                                                                                                                            |                                                                                                                                                                                          |
|       _availablePermits.getAndIncrement(): 0 at SemaphoreImpl.<unknown method>(Semaphore.kt:250)                                                                                                                     |                                                                                                                                                                                          |
|   canEnterForbiddenBlock = false at SuspendTraceReportingTest.<unknown method>(SuspendTraceReportingTest.kt:33)                                                                                                      |                                                                                                                                                                                          |
|   result: void                                                                                                                                                                                                       |                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
